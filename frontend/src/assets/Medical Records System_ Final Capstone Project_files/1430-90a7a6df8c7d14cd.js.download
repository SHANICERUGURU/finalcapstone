"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1430],{51988:(e,s,i)=>{i.d(s,{J:()=>c});var n=i(6029),l=i(26385),r=i(48810),t=i(19564),a=i(77650),o=i(55729),d=i(68871);let c=e=>{let{password:s,setPassword:i,retypedPassword:c,setRetypedPassword:x,onValidationChange:j}=e,u=s.length>0?(0,d.O)(s):[],h=s!==c,p=(0!==u.length||h)&&s.length>0;return(0,o.useEffect)(()=>{null==j||j(p)},[p,j]),(0,n.jsxs)(l.B,{spacing:4,children:[(0,n.jsx)(d.s,{label:(0,n.jsx)(t.x6,{id:"/nT6AE"}),placeholder:a.Ru._({id:"0StR7t"}),value:s,onChange:e=>i(e.target.value),showHelp:!1}),(0,n.jsx)(d.s,{label:(0,n.jsx)(t.x6,{id:"u968bF"}),placeholder:a.Ru._({id:"hyMBbi"}),value:c,onChange:e=>x(e.target.value),showHelp:!0}),(0,n.jsxs)(l.B,{spacing:1,mt:1,children:[h&&(0,n.jsx)(r.E,{color:"red.500",fontSize:"sm",children:(0,n.jsx)(t.x6,{id:"iHXlwG"})}),u.map((e,s)=>(0,n.jsx)(r.E,{color:"red.500",fontSize:"sm",children:e},s))]})]})}},60210:(e,s,i)=>{i.d(s,{g:()=>H});var n=i(6029),l=i(67909),r=i(36071),t=i(54731),a=i(3674),o=i(40691),d=i(17920),c=i(57405),x=i(48810),j=i(58959),u=i(61491),h=i(19564),p=i(55729),m=i(88586),g=i(46450),f=i(68492),b=i(12523),v=i(46898),C=i(49611),y=i(3276);let w=e=>"object"==typeof e&&"options"in e&&(null==e?void 0:e.options)!==void 0,E={plus:{oneTime:{amount:{options:[1500],start:1500}},recharge:{amount:{options:[1500],start:1500},threshold:{options:[500],start:500}}},pro:{oneTime:{amount:{options:[1500,3e3,4500,6e3],start:1500}},recharge:{amount:{options:[1500,3e3,4500,6e3],start:1500},threshold:{options:[500],start:500}}},ultra:{oneTime:{amount:{min:1500,step:1500,start:1500}},recharge:{amount:{min:1500,step:1500,start:1500},threshold:{min:500,step:500,start:500}}},team:{oneTime:{amount:{min:1500,step:1500,start:1500}},recharge:{amount:{min:1500,step:1500,start:1500},threshold:{min:500,step:500,start:500}}},business:{oneTime:{amount:{options:[1500],start:1500}},recharge:{amount:{min:1500,step:1500,start:1500},threshold:{min:500,step:500,start:500}}}};var S=i(68917),k=i(88516),O=i(16936),I=i(38036),z=i(78140),A=i(36999),D=i(41283),T=i(85595),_=i(26420),R=i(99492),N=i(48621),W=i(77650);let U=e=>{let{value:s,minValue:i,maxValue:l,setValue:r,step:t=1,isDisabled:a=!1}=e,{getInputProps:o,getIncrementButtonProps:d,getDecrementButtonProps:c}=(0,k.h)({step:t,value:s,onChange:e=>{let s=Number(e);isNaN(s)||s<i||l&&s>l||r(s)},min:i,max:l,isDisabled:a});return(0,n.jsxs)(j.z,{children:[(0,n.jsx)(O.K,{...c(),"aria-label":W.Ru._({id:"JvTdAL"}),icon:(0,n.jsx)(N.g,{icon:R.EZy}),size:"md",rounded:"md",variant:"outline",bg:"white",borderColor:"gray.200",color:"gray.500"}),(0,n.jsx)(I.p,{...o(),flex:1,px:0,textAlign:"center",isReadOnly:!0}),(0,n.jsx)(O.K,{...d(),size:"md","aria-label":W.Ru._({id:"kdkZBD"}),icon:(0,n.jsx)(N.g,{icon:R.QLR}),rounded:"md",variant:"outline",bg:"white",borderColor:"gray.200",color:"gray.500"})]})},M=e=>{let{options:s,value:i,setValue:l,isDisabled:r=!1}=e;return 1===s.length?(0,n.jsx)(z.W,{children:(0,n.jsxs)(A.I,{as:C.$,isDisabled:!0,w:"100%",textAlign:"start",rightIcon:(0,n.jsx)(S.D,{}),children:[i," credits"]})}):(0,n.jsxs)(z.W,{children:[(0,n.jsxs)(A.I,{as:C.$,w:"100%",textAlign:"start",rightIcon:(0,n.jsx)(S.D,{}),isDisabled:r,children:[i," credits"]}),(0,n.jsx)(D.c,{maxW:"sm",children:s.map(e=>(0,n.jsx)(T.D,{icon:e===i?(0,n.jsx)(N.g,{fixedWidth:!0,icon:R.e68}):(0,n.jsx)(_.a,{w:"14px",minW:"14px"}),onClick:()=>l(e),children:e},e))})]})},P=e=>{let{value:s,config:i,setValue:l,max:r,isDisabled:t=!1}=e,a=w(i)?500:i.step,o=a*Math.floor(r/a);return w(i)?(0,n.jsx)(M,{options:i.options.filter(e=>e<=r),value:s,setValue:l,isDisabled:t}):(0,n.jsx)(U,{value:s,minValue:i.min,maxValue:o,setValue:l,step:i.step,isDisabled:t})};var B=i(34823),F=i(11390);let L=e=>{let{creditCost:s,creditAmount:i}=e,{price:n,currency:l}=null!=s?s:{},r=(0,F.GP)(l),t=n?i/100*n/r:null;return t?(0,B.v)(t,{currency:l}):null},G=e=>{var s,i,l;let{subscription:r,product:t,credits:a,creditCost:o,creditsCap:d,onClose:u}=e,f=(0,v.d)(),{rechargeEnabled:b,rechargeThreshold:S,rechargeAmount:k}=(0,g.e)(null==r?void 0:r.workspaceId),O=null==E||null==(s=E[t.key])?void 0:s.recharge,[I,z]=(0,p.useState)(b&&null!=k?k:O.amount.start),[A,D]=(0,p.useState)(b&&null!=S?S:O.threshold.start),T=!w(O.threshold),_=L({creditCost:o,creditAmount:I}),[R,{loading:N}]=(0,m.mtJ)({}),W=(null==r||null==(l=r.products)||null==(i=l[0])?void 0:i.units)===1,U=()=>{f({title:(0,n.jsx)(h.x6,{id:"daCsuT"}),description:(0,n.jsx)(h.x6,{id:"pr91/M"}),status:"error",position:"top",duration:9e3,isClosable:!0})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(c.T,{alignItems:"start",spacing:4,children:[T&&(0,n.jsxs)(c.T,{alignItems:"start",w:"100%",children:[(0,n.jsx)(x.E,{fontWeight:"semibold",children:(0,n.jsx)(h.x6,{id:"wb4MVq"})}),"threshold"in O&&(0,n.jsx)(P,{value:A,config:O.threshold,setValue:D,max:d-I,isDisabled:N})]}),(0,n.jsxs)(c.T,{alignItems:"start",w:"100%",children:[(0,n.jsx)(x.E,{fontWeight:"semibold",children:(0,n.jsx)(h.x6,{id:"iGc2SS"})}),(0,n.jsx)(P,{value:I,config:O.amount,setValue:z,max:d-A,isDisabled:N})]}),(0,n.jsxs)(c.T,{spacing:2,alignItems:"start",children:[(0,n.jsx)(x.E,{fontWeight:"semibold",children:(0,n.jsx)(h.x6,{id:"8AULTO"})}),(0,n.jsx)(x.E,{children:W?(0,n.jsx)(h.x6,{id:"LhdMIO",values:{creditThreshold:A,creditAmount:I},components:{0:(0,n.jsx)("strong",{}),1:(0,n.jsx)("strong",{})}}):(0,n.jsx)(h.x6,{id:"cbQDGW",values:{creditThreshold:A,creditAmount:I},components:{0:(0,n.jsx)("strong",{}),1:(0,n.jsx)("strong",{})}})})]}),(0,n.jsxs)(c.T,{bg:"sky.50",p:4,w:"100%",rounded:"lg",alignItems:"start",children:[(0,n.jsxs)(j.z,{justifyContent:"space-between",w:"100%",children:[(0,n.jsx)(x.E,{fontSize:"lg",fontWeight:"semibold",children:(0,n.jsx)(h.x6,{id:"p69GUm"})}),(0,n.jsx)(x.E,{fontSize:"lg",fontWeight:"semibold",children:_})]}),(0,n.jsx)(x.E,{fontWeight:"thin",fontSize:"sm",children:(0,n.jsx)(h.x6,{id:"C0VHmp"})}),(0,n.jsx)(x.E,{fontSize:"sm",fontWeight:"thin"})]})]}),(0,n.jsx)(C.$,{onClick:()=>{if(r.workspaceId)try{var e;R({variables:{input:{workspaceId:r.workspaceId,productPriceId:null==t||null==(e=t.productPrice)?void 0:e.id,creditsThreshold:A,creditsToAdd:I,enabled:!0}},refetchQueries:["creditsAutoPurchase"],onCompleted:()=>{u();let e=a<A;f({title:e?b?(0,n.jsx)(h.x6,{id:"UxEuUA"}):(0,n.jsx)(h.x6,{id:"c0XqOU"}):b?(0,n.jsx)(h.x6,{id:"HJQnmN"}):(0,n.jsx)(h.x6,{id:"SsP/8Q"}),status:"success",position:"top",duration:5e3})},onError:()=>{U()}})}catch(e){console.error("Failed to update credits auto purchase:",e),U()}},variant:"solid",w:"100%",fontSize:"sm",my:4,isDisabled:N,leftIcon:N?(0,n.jsx)(y.y,{size:"xs"}):void 0,children:b?N?(0,n.jsx)(h.x6,{id:"QV52jP"}):(0,n.jsx)(h.x6,{id:"DZ7o4/"}):N?(0,n.jsx)(h.x6,{id:"mWN+qw"}):(0,n.jsx)(h.x6,{id:"tJYKc2"})})]})},V=e=>{let{subscription:s,productKey:i,creditCost:l,creditsCap:r,credits:t,onClose:a}=e,o=(0,v.d)(),d=E[i].oneTime,[u,g]=(0,p.useState)(d.amount.start),f=L({creditCost:l,creditAmount:u}),[b,{loading:w}]=(0,m.qs8)(),S=()=>{o({title:(0,n.jsx)(h.x6,{id:"nSu1Pt",values:{creditAmount:u}}),status:"success",position:"top",duration:5e3})},k=()=>{o({title:"Credits purchase failed",description:"Please try again or contact support if the issue persists",status:"error",position:"top",duration:5e3,isClosable:!0})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(c.T,{alignItems:"start",spacing:4,w:"100%",children:[(0,n.jsxs)(c.T,{alignItems:"start",w:"100%",children:[(0,n.jsx)(x.E,{fontWeight:"semibold",children:(0,n.jsx)(h.x6,{id:"iGc2SS"})}),(0,n.jsx)(P,{value:u,config:d.amount,setValue:g,max:r-t,isDisabled:w})]}),(0,n.jsxs)(c.T,{bg:"sky.50",p:4,w:"100%",rounded:"lg",alignItems:"start",children:[(0,n.jsxs)(j.z,{justifyContent:"space-between",w:"100%",children:[(0,n.jsx)(x.E,{fontSize:"lg",fontWeight:"semibold",children:(0,n.jsx)(h.x6,{id:"tV8kNA"})}),(0,n.jsx)(x.E,{fontSize:"lg",fontWeight:"semibold",children:f})]}),(0,n.jsx)(x.E,{fontWeight:"thin",fontSize:"sm",children:(0,n.jsx)(h.x6,{id:"C0VHmp"})}),(0,n.jsx)(x.E,{fontSize:"sm",fontWeight:"thin"})]})]}),(0,n.jsx)(C.$,{onClick:()=>{if(s.workspaceId)try{b({variables:{input:{workspaceId:s.workspaceId,amount:u}},refetchQueries:["getCredits"],onCompleted:()=>{a(),S()},onError:()=>{k()}})}catch(e){console.error("Failed to purchase credits:",e),o({title:"Credits purchase failed",description:"Please try again or contact support if the issue persists",status:"error",position:"top",duration:5e3,isClosable:!0})}},variant:"solid",w:"100%",fontSize:"sm",my:4,isDisabled:w,leftIcon:w?(0,n.jsx)(y.y,{size:"xs"}):void 0,children:w?(0,n.jsx)(h.x6,{id:"wdxRmt"}):(0,n.jsx)(h.x6,{id:"34+TCH"})})]})},$=e=>{var s,i,v;let{isBuyCreditsModalOpen:C,closeBuyCreditsModal:y,product:w,subscription:E,startInAutoRechargeMode:S}=e,[k,O]=(0,p.useState)(S?"recharge":"one-time"),{buyCredits:I,autoRecharge:z,isOnePersonWorkspace:A}=(0,b.f)(),D=I.shouldShow&&!I.isDisabled,{rechargeEnabled:T}=(0,g.e)(null==E?void 0:E.workspaceId),_=w.key,{credits:R,creditsCap:N}=(0,f._)(_),{data:W}=(0,m.sdf)({variables:{workspaceId:E.workspaceId,productType:m.chg.AddOn}}),U=null==W||null==(v=W.products)||null==(i=v.find(e=>"credits"===e.key))||null==(s=i.prices)?void 0:s[0];return(0,n.jsxs)(l.aF,{isOpen:C,size:"xl",onClose:y,closeOnEsc:!0,closeOnOverlayClick:!0,children:[(0,n.jsx)(r.m,{}),(0,n.jsxs)(t.$,{rounded:"3xl","data-id":"buy-credits-modal",children:[(0,n.jsx)(a.s,{_hover:{bgColor:"blackAlpha.50"}}),(0,n.jsxs)(o.c,{children:[(0,n.jsx)(d.r,{px:0,children:"one-time"===k?(0,n.jsx)(h.x6,{id:"34+TCH"}):T?(0,n.jsx)(h.x6,{id:"jPpLJz"}):A?(0,n.jsx)(h.x6,{id:"9n+Q7i"}):(0,n.jsx)(h.x6,{id:"5WyIEy"})}),(0,n.jsxs)(c.T,{alignItems:"start",spacing:4,children:[D&&!z.isDisabled&&(0,n.jsxs)(c.T,{spacing:2,alignItems:"start",children:[(0,n.jsx)(x.E,{size:"md",fontWeight:"semibold",children:(0,n.jsx)(h.x6,{id:"uohV9E"})}),(0,n.jsx)(j.z,{children:(0,n.jsx)(u.S,{isChecked:"recharge"===k,onChange:()=>{O("one-time"===k?"recharge":"one-time")},children:(0,n.jsx)(x.E,{children:(0,n.jsx)(h.x6,{id:"O/Rzj/"})})})})]}),"one-time"===k&&(0,n.jsx)(V,{subscription:E,productKey:_,creditCost:U,creditsCap:N,credits:R,onClose:y}),"recharge"===k&&(0,n.jsx)(G,{subscription:E,product:w,creditCost:U,creditsCap:N,credits:R,onClose:y})]})]})]})]})},H=e=>{var s;let{isBuyCreditsModalOpen:i,closeBuyCreditsModal:l,subscription:r,startInAutoRechargeMode:t=!1}=e;return r&&(null==(s=r.products)?void 0:s[0])?(0,n.jsx)($,{isBuyCreditsModalOpen:i,closeBuyCreditsModal:l,product:r.products[0],subscription:r,startInAutoRechargeMode:t}):null}},66432:(e,s,i)=>{i.d(s,{j:()=>r,n:()=>l});var n=i(46887);let l=()=>{n.A.remove("gamma_sso_hint")},r=()=>n.A.get("gamma_sso_hint")},68871:(e,s,i)=>{i.d(s,{s:()=>b,O:()=>f});var n=i(6029),l=i(27229),r=i(40697),t=i(83638),a=i(25223),o=i(72470),d=i(38036),c=i(77979),x=i(16936),j=i(5091),u=i(55597),h=i(48621),p=i(19564),m=i(77650),g=i(55729);let f=e=>{let s=[];return e.length<8&&s.push(m.Ru._({id:"cUUVem"})),e.match(/[A-Z]/)||s.push(m.Ru._({id:"+6oZdK"})),e.match(/[a-z]/)||s.push(m.Ru._({id:"Cjay54"})),e.match(/[0-9]/)||s.push(m.Ru._({id:"XcEl4D"})),e.match(/[\^$*.[\]{}()?"!@#%&/\\,><':;|_~`=+-]/)||s.push(m.Ru._({id:"EodnCE"})),s},b=(0,g.forwardRef)((e,s)=>{let{isOpen:i,onToggle:f}=(0,l.j)(),b=(0,g.useRef)(null),v=(0,g.useId)(),C=(0,r.SV)(b,s),y=!!((null==e?void 0:e.error)&&e.error.length>1);return(0,n.jsxs)(t.MJ,{isInvalid:y,children:[(0,n.jsx)(a.l,{htmlFor:v,fontSize:{base:"sm",md:"md"},mb:1,children:e.label||(0,n.jsx)(p.x6,{id:"8ZsakT"})}),(0,n.jsxs)(o.M,{children:[(0,n.jsx)(d.p,{id:v,ref:C,name:"password",type:i?"text":"password",autoComplete:"current-password",required:!0,...e}),(0,n.jsx)(c.t,{children:(0,n.jsx)(x.K,{variant:"ghost","aria-label":i?m.Ru._({id:"KJAyEq"}):m.Ru._({id:"B+wtoH"}),size:"sm",icon:i?(0,n.jsx)(h.g,{icon:u.k6j}):(0,n.jsx)(h.g,{icon:u.pS3}),onClick:()=>{f(),b.current&&b.current.focus({preventScroll:!0})},tabIndex:0})})]}),e.showHelp&&(0,n.jsx)(t.eK,{children:(0,n.jsx)(p.x6,{id:"v6cuzy"})}),e.error&&(0,n.jsx)(j.Wt,{children:e.error})]})});b.displayName="PasswordField"},91430:(e,s,i)=>{i.d(s,{Y:()=>t,X:()=>eY});var n=i(6029),l=i(40452),r=i(3276);let t=()=>(0,n.jsx)(l.s,{className:"full-page-spinner",flex:"1",justifyContent:"center",alignItems:"center",children:(0,n.jsx)(r.y,{})});var a=i(27229),o=i(78140),d=i(36999),c=i(96990),x=i(12514),j=i(41283),u=i(85595),h=i(83550),p=i(26385),m=i(48810),g=i(6760),f=i(99492),b=i(48621),v=i(47412),C=i(19564),y=i(55729),w=i(91938),E=i(82328),S=i(24302),k=i(73),O=i(68301),I=i(74003),z=i(46091),A=i(80299),D=i(60210),T=i(66264);let _=(0,z.A)(e=>{let{modalId:s="ai-credits-modal",segmentEvent:i,isDark:r,...t}=e,{credits:o,lowCreditStatus:d,onAICreditsModalOpen:c,onAICreditsModalClose:x,isAICreditsModalOpen:j}=(0,k.x)(s),{product:u}=(0,I.I)(),h=(0,O.u)("planCreditsLaunch"),p=(0,S.dU)("gray.50","elevation.2"),{isOpen:m,onOpen:g,onClose:f}=(0,a.j)({id:"buy-credits-modal"}),{subscription:b}=(0,I.I)();return u&&!h?null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.s,{bg:p,p:2,mx:-2,mb:-2,borderBottomRadius:"xl",alignItems:"center",justifyContent:"center",...t,children:(0,n.jsx)(T.S,{credits:o,onClick:c,lowCreditStatus:d,isDark:r})}),(0,n.jsx)(A.m,{isOpen:j,onOpen:c,onClose:x,credits:o,segmentEvent:i,onBuyCreditsOpen:g}),m&&(0,n.jsx)(D.g,{closeBuyCreditsModal:f,isBuyCreditsModalOpen:m,subscription:b,startInAutoRechargeMode:!1})]})});var R=i(5063),N=i(99767),W=i(73110),U=i(95889),M=i(82927),P=i(92816),B=i(58959),F=i(64268),L=i(96500),G=i(46898),V=i(67909),$=i(36071),H=i(54731),J=i(17920),Q=i(3674),K=i(40691),q=i(26420),Z=i(61491),X=i(16426),Y=i(61204),ee=i(49611),es=i(77650),ei=i(88586),en=i(99038),el=i(66432);let er=()=>(0,n.jsxs)(B.z,{px:2,py:2,border:"2px solid var(--chakra-colors-red-500)",borderRadius:"md",children:[(0,n.jsx)(P.u,{w:4,h:4,color:"red.500"}),(0,n.jsx)(m.E,{fontSize:"sm",color:"red.500",children:(0,n.jsx)(C.x6,{id:"Ofm9ns"})})]}),et=e=>{let{user:s,workspace:i,canDeleteAccount:r}=e;return(0,n.jsxs)(F.F,{status:s||(null==i?void 0:i.memberCount)&&i.memberCount<=1?"error":"warning",display:"flex",flexDirection:"column",alignItems:"normal",mt:2,children:[(0,n.jsxs)(l.s,{pb:3,flexDirection:["column","column","row","row"],align:"flex-start",gap:2,children:[(0,n.jsxs)(l.s,{flex:1,children:[(0,n.jsx)(c.e,{src:null==s?void 0:s.profileImageUrl,size:"sm",name:(null==s?void 0:s.displayName)||(null==i?void 0:i.name)}),(0,n.jsxs)(p.B,{spacing:0,ms:2,flex:"1",children:[(0,n.jsx)(m.E,{fontSize:"sm",flex:"1",wordBreak:"break-word",children:(null==s?void 0:s.displayName)||(null==i?void 0:i.name)}),s&&(0,n.jsx)(m.E,{fontSize:"xs",color:"gray.600",flex:"1",wordBreak:"break-word",children:s.email}),i&&(0,n.jsx)(m.E,{fontSize:"xs",color:"gray.600",children:(0,n.jsx)(C.x6,{id:"LaQ44M",values:{0:i.memberCount||0}})})]})]}),(0,n.jsx)(l.s,{flexShrink:1,children:(s||i&&(null==i?void 0:i.memberCount)===1)&&(0,n.jsx)(er,{})})]}),(0,n.jsx)(L.c,{borderColor:"blackAlpha.200"}),(0,n.jsxs)(m.E,{pt:2,fontSize:"sm",color:s||(null==i?void 0:i.memberCount)&&i.memberCount<=1?"red.500":"yellow.700",children:[r&&s&&(0,n.jsxs)(n.Fragment,{children:["⚠️"," ",(0,n.jsx)(C.x6,{id:"j95nHI",values:{GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:en.Ix}})]}),r&&(null==i?void 0:i.memberCount)&&(i.memberCount>1?(0,n.jsxs)(n.Fragment,{children:["⚠️ ",(0,n.jsx)(C.x6,{id:"QnF/9z"})]}):(0,n.jsxs)(n.Fragment,{children:["⚠️"," ",(0,n.jsx)(C.x6,{id:"PU+L+E",values:{GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:en.Ix}})]})),!r&&(0,n.jsxs)(n.Fragment,{children:["⚠️"," ",(0,n.jsx)(C.x6,{id:"eFx5qm"})]})]})]})},ea=e=>{var s,i;let{isOpen:l,onClose:r,user:t}=e,[a,o]=(0,y.useState)(!1),[d,c]=(0,y.useState)(!1),{data:x}=(0,ei.Agb)(),j=(0,G.d)(),[u]=(0,ei.HCE)(),h=(null==x||null==(i=x.user)||null==(s=i.workspaceMemberships)?void 0:s.filter(e=>!1===e.disabled))||[],g=h.filter(e=>{var s,i;return"admin"===e.role&&(null==(s=e.workspace)?void 0:s.adminCount)===1&&(null==(i=e.workspace)?void 0:i.memberCount)&&e.workspace.memberCount>1}),f=h.map(e=>e.workspace),b=0===g.length,v=(0,y.useCallback)(()=>{c(!0),(0,el.n)(),u().then(e=>{let{data:s}=e;s&&(window.location.href="".concat(w.$.API_HOST,"/logout?redirectTo=/user-deleted"))}).catch(()=>{c(!1),j({title:"Delete account failed. Try again or reach out to Gamma support.",status:"error",duration:3e3,position:"top",isClosable:!0})})},[j,u]);return(0,n.jsxs)(V.aF,{isOpen:l,onClose:r,size:"lg",closeOnOverlayClick:!1,children:[(0,n.jsx)($.m,{}),(0,n.jsxs)(H.$,{p:2,children:[(0,n.jsx)(J.r,{children:(0,n.jsx)(C.x6,{id:"pj33Dr",values:{GAMMA_PROPER_NOUN:en.On}})}),(0,n.jsx)(Q.s,{}),(0,n.jsxs)(K.c,{children:[b&&(0,n.jsxs)(p.B,{spacing:3,children:[(0,n.jsx)(m.E,{children:(0,n.jsx)(C.x6,{id:"gICMDu"})}),(0,n.jsxs)(q.a,{children:[(0,n.jsx)(m.E,{colorScheme:"gray",fontSize:"sm",children:(0,n.jsx)(C.x6,{id:"sG4820"})}),(0,n.jsx)(et,{user:t,canDeleteAccount:b})]}),f&&f.length>0&&(0,n.jsxs)(q.a,{children:[(0,n.jsx)(m.E,{colorScheme:"gray",fontSize:"sm",children:(0,n.jsx)(C.x6,{id:"dFEw4P"})}),null==f?void 0:f.map(e=>(0,n.jsx)(et,{workspace:e,canDeleteAccount:b},null==e?void 0:e.id))]}),(0,n.jsxs)(q.a,{children:[(0,n.jsx)(m.E,{colorScheme:"gray",fontSize:"sm",children:(0,n.jsx)(C.x6,{id:"R3XcoA"})}),(0,n.jsxs)(B.z,{bg:"gray.50",mt:2,p:3,ps:2,spacing:2,borderRadius:"sm",children:[(0,n.jsx)(Z.S,{size:"lg",spacing:"1rem",p:3,defaultChecked:a,onChange:e=>o(e.target.checked)}),(0,n.jsx)(m.E,{fontSize:"sm",children:(0,n.jsx)(C.x6,{id:"4YT8Pd"})})]})]})]}),!b&&(0,n.jsx)(p.B,{children:(0,n.jsxs)(q.a,{children:[(0,n.jsx)(m.E,{colorScheme:"gray",fontSize:"sm",children:(0,n.jsx)(C.x6,{id:"nhUDfL"})}),null==f?void 0:f.map(e=>(0,n.jsx)(et,{workspace:e,canDeleteAccount:b},null==e?void 0:e.id))]})})]}),b&&(0,n.jsx)(X.j,{children:(0,n.jsxs)(Y.e,{children:[(0,n.jsx)(ee.$,{variant:"ghost",colorScheme:"gray",onClick:r,children:(0,n.jsx)(C.x6,{id:"dEgA5A"})}),(0,n.jsx)(ee.$,{isDisabled:!a,variant:"hazardous",onClick:v,isLoading:d,loadingText:es.Ru._({id:"O71YIC"}),children:(0,n.jsx)(C.x6,{id:"dfBVKc"})})]})})]})]})};var eo=i(16936),ed=i(83817),ec=i.n(ed),ex=i(31615),ej=i(22445);let eu=e=>{let{isOpen:s,onClose:i,onConfirm:l,onDiscard:r,originalLocaleConfirmStrings:t}=e;return(0,n.jsxs)(V.aF,{isOpen:s,onClose:i,size:"xl",children:[(0,n.jsx)($.m,{}),(0,n.jsxs)(H.$,{children:[(0,n.jsx)(J.r,{children:(0,n.jsxs)(p.B,{spacing:0,children:[(0,n.jsx)(C.x6,{id:"sCTlv5"}),(null==t?void 0:t.title)?(0,n.jsxs)(m.E,{children:["(",null==t?void 0:t.title,")"]}):null]})}),(0,n.jsx)(Q.s,{}),(0,n.jsx)(K.c,{children:(0,n.jsxs)(p.B,{spacing:0,children:[(0,n.jsx)(m.E,{children:(0,n.jsx)(C.x6,{id:"EVJO23"})}),(null==t?void 0:t.body)?(0,n.jsxs)(m.E,{children:["(",null==t?void 0:t.body,")"]}):(0,n.jsx)(n.Fragment,{})]})}),(0,n.jsx)(X.j,{children:(0,n.jsxs)(Y.e,{flexWrap:"wrap",gap:"3",justifyContent:"flex-end",spacing:"0",children:[(0,n.jsx)(ee.$,{variant:"ghost",onClick:r,...(null==t?void 0:t.secondaryCTA)?{height:"fit-content",py:4}:{},children:(0,n.jsxs)(p.B,{spacing:0,children:[(0,n.jsx)(C.x6,{id:"3EbjfR"}),(null==t?void 0:t.secondaryCTA)?(0,n.jsxs)(m.E,{children:["(",null==t?void 0:t.secondaryCTA,")"]}):null]})}),(0,n.jsx)(ee.$,{variant:"solid",onClick:l,...(null==t?void 0:t.primaryCTA)?{height:"fit-content",py:4}:{},children:(0,n.jsxs)(p.B,{spacing:0,children:[(0,n.jsx)(C.x6,{id:"y3aU20"}),(null==t?void 0:t.primaryCTA)?(0,n.jsxs)(m.E,{children:["(",null==t?void 0:t.primaryCTA,")"]}):null]})})]})})]})]})},eh={route:"sign-in",profileImageUrl:"",firstName:"",lastName:"",authentication:{provider:"PASSWORD",email:""},emails:{onboardingEmails:!0,announcementEmails:!0},localeKey:void 0,allowTraining:void 0};var ep=i(83638),em=i(25223),eg=i(38036),ef=i(5091),eb=i(23293),ev=i(29810),eC=i(33787),ey=i(99430),ew=i(57405),eE=i(7761),eS=i(17789),ek=i(79138),eO=i(47880),eI=i(45485),ez=i(58297),eA=i(17496),eD=i(55597),eT=i(87996),e_=i(18640),eR=i(60908);let eN={cropped:"",original:""},eW=e=>{let{orgId:s,firstName:i,lastName:l,profileImageUrl:t,setStore:a}=e,[x,h]=(0,y.useState)(t);(0,y.useEffect)(()=>{h(t)},[t]);let[w,E]=(0,y.useState)(eN),[S,k]=(0,y.useState)("original"),[O,I]=(0,y.useState)("idle"),z=w.cropped&&"cropped"===S?w.cropped:w.original&&"original"===S?w.original:x||"",A=(0,y.useMemo)(()=>eT.Fk.createUppyInstance(s,{onUploadStart:e=>{E(eN),I("uploading"),k("original"),(0,eR.aI)(e.file.type||"")||(h(e.tempUrl),a(s=>({...s,profileImageUrl:e.tempUrl})))},onOriginalFileUpload:e=>{h(e.src),a(s=>({...s,profileImageUrl:e.src})),E(s=>({...s,original:e.src}))},onUploadComplete:e=>{let s=e.src;h(e=>e||s),a(e=>({...e,profileImageUrl:s})),E(()=>({original:e.src,cropped:e.croppedFace||""})),I("idle"),A.cancelAll()},onUploadFailed:()=>{I("error"),A.cancelAll()}},"profile"),[s,a]),{onClick:D,inputElement:T}=(0,e_.W)({uppy:A}),_=(0,y.useCallback)(()=>{h(null),E(eN),a(e=>({...e,profileImageUrl:null}))},[a]),R=(0,y.useCallback)(e=>{let s=e.target.checked;k(s?"cropped":"original");let i=s?w.cropped:w.original;h(i),a(e=>({...e,profileImageUrl:i}))},[w.cropped,w.original,a]);return(0,n.jsxs)(p.B,{spacing:3,alignItems:"center",children:[T,(0,n.jsxs)(q.a,{w:0,h:0,children:[(0,n.jsx)(eC._,{src:w.original}),(0,n.jsx)(eC._,{src:w.cropped})]}),(0,n.jsx)(q.a,{position:"relative",children:(0,n.jsxs)(o.W,{placement:"bottom-start",offset:[100,0],children:[(0,n.jsx)(v.Tz,{label:(0,n.jsx)(C.x6,{id:"etzA4s"}),openDelay:750,placement:"top",children:(0,n.jsx)(d.I,{position:"relative",disabled:"uploading"===O,userSelect:"none",cursor:"pointer",role:"group",_hover:{opacity:.9},children:(0,n.jsxs)(c.e,{src:z||"",name:"".concat(i," ").concat(l),size:{base:"xl",md:"2xl"},_groupHover:{shadow:"lg"},ignoreFallback:!0,children:["uploading"===O&&(0,n.jsx)(ez.j,{position:"absolute",size:"full",justifyContent:"center",alignItems:"center",bg:"gray.300",opacity:.5,children:(0,n.jsx)(r.y,{size:"xl",thickness:"2px"})}),(0,n.jsx)(ez.j,{position:"absolute",bottom:0,right:0,borderRadius:"full",color:"gray.800",textAlign:"center",bg:"gray.200",size:9,_groupHover:{shadow:"lg",transform:"scale(1.02)"},children:(0,n.jsx)(b.g,{icon:x?f.rwq:f.MT7,width:16,height:16,size:"xs"})})]})})}),(0,n.jsxs)(j.c,{fontSize:"sm",children:[(0,n.jsx)(u.D,{onClick:()=>{"uploading"!==O&&D()},children:(0,n.jsxs)(B.z,{children:[(0,n.jsx)(b.g,{icon:eD.MNJ}),(0,n.jsx)(m.E,{children:(0,n.jsx)(C.x6,{id:"wPTug2"})})]})}),x&&(0,n.jsx)(g.N,{}),x&&(0,n.jsx)(u.D,{onClick:_,children:(0,n.jsxs)(B.z,{color:"var(--chakra-colors-red-500)",children:[(0,n.jsx)(b.g,{icon:f.sjs,color:"var(--chakra-colors-red-500)"}),(0,n.jsx)(m.E,{children:(0,n.jsx)(C.x6,{id:"k8od7T"})})]})})]})]})}),(0,n.jsx)(eA.S,{in:!!x&&!!w.cropped&&x!==t&&"idle"===O,animateOpacity:!0,children:(0,n.jsx)(Z.S,{size:"sm",fontSize:"12px",color:"gray.500",isChecked:"cropped"===S,onChange:R,mb:3,children:(0,n.jsx)(C.x6,{id:"+J8/VC"})})}),(0,n.jsx)(ef.Wt,{children:"error"===O&&(0,n.jsx)(C.x6,{id:"CCcfKO"})})]})},eU=e=>{let{isOpen:s,onClose:i,onConfirm:l}=e;return(0,n.jsxs)(V.aF,{isOpen:s,onClose:i,isCentered:!0,children:[(0,n.jsx)($.m,{}),(0,n.jsxs)(H.$,{children:[(0,n.jsx)(J.r,{children:(0,n.jsx)(C.x6,{id:"1FFoxQ"})}),(0,n.jsx)(Q.s,{}),(0,n.jsx)(K.c,{children:(0,n.jsx)(m.E,{children:(0,n.jsx)(C.x6,{id:"RLdvpT",values:{GAMMA_PROPER_NOUN:en.On},components:{0:(0,n.jsx)("strong",{})}})})}),(0,n.jsxs)(X.j,{children:[(0,n.jsx)(ee.$,{variant:"plain",me:3,onClick:i,children:(0,n.jsx)(C.x6,{id:"1cHrEd"})}),(0,n.jsx)(ee.$,{variant:"hazardous",onClick:l,children:(0,n.jsx)(C.x6,{id:"M5446u"})})]})]})]})},eM=e=>{let{orgId:s,store:i,setStore:r,onClose:t,tabIndex:a,setTabIndex:o,setRoute:d,onAccountDeleteModalOpen:c,isDirty:x,onResetStore:j,isSaving:u,hasSentAddPasswordEmail:h}=e,g=(0,y.useMemo)(()=>i.firstName.trim().length<1&&i.lastName.trim().length<1,[null==i?void 0:i.firstName,null==i?void 0:i.lastName]),v=(0,eI._z)(),w=(0,y.useMemo)(()=>{let e=[{key:"basic-info",label:(0,n.jsx)(C.x6,{id:"o+K7xz"}),icon:f.X46,content:(0,n.jsx)(eP,{orgId:s,store:i,setStore:r,hasErrorWithNames:g})},{key:"email-notifications",label:(0,n.jsx)(C.x6,{id:"aW3TOw"}),description:(0,n.jsx)(C.x6,{id:"2ZAirE"}),icon:f.y_8,content:(0,n.jsx)(eF,{store:i,setStore:r})},{key:"sign-in-security",label:(0,n.jsx)(C.x6,{id:"T0jvBg"}),icon:f.DW4,content:(0,n.jsx)(eB,{store:i,setRoute:d,onAccountDeleteModalOpen:c,hasSentAddPasswordEmail:h})}];return"hidden"!==v&&e.push({key:"privacy",label:(0,n.jsx)(C.x6,{id:"4GGzDT"}),icon:f.D6w,content:(0,n.jsx)(eL,{store:i,setStore:r,visibility:v})}),e},[s,i,r,g,d,c,h,v]),E=(0,y.useMemo)(()=>w.map(e=>({key:e.key,label:e.label,icon:(0,n.jsx)(b.g,{icon:e.icon,fixedWidth:!0})})),[w]),S=(0,y.useMemo)(()=>{let e=w[a];return{key:e.key,label:e.label,icon:(0,n.jsx)(b.g,{icon:e.icon,fixedWidth:!0})}},[a,w]),k=(0,y.useCallback)(e=>{o(w.findIndex(s=>s.key===e.key))},[o,w]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(K.c,{p:"6",children:(0,n.jsxs)(p.B,{spacing:"6",children:[(0,n.jsx)(eE.x,{options:E,selectedOption:S,setSelectedOption:k,dropdownButtonLeftIcon:S.icon,dropdownMenuTitle:es.Ru._({id:"T3FM0r"}),size:"md"}),(0,n.jsxs)(p.B,{spacing:"4",children:[w[a].description&&(0,n.jsx)(m.E,{children:w[a].description}),w[a].content]})]})}),(0,n.jsx)(L.c,{}),(0,n.jsx)(X.j,{children:(0,n.jsxs)(l.s,{flexWrap:"wrap",justifyContent:"flex-end",gap:2,children:[x&&(0,n.jsx)(ee.$,{variant:"ghost",colorScheme:"gray",onClick:j,children:(0,n.jsx)(C.x6,{id:"dEgA5A"})}),(0,n.jsx)(ee.$,{variant:"solid",isDisabled:g,onClick:t,isLoading:u,children:x?(0,n.jsx)(C.x6,{id:"y3aU20"}):(0,n.jsx)(C.x6,{id:"DPfwMq"})})]})})]})},eP=e=>{let{orgId:s,store:i,setStore:l,hasErrorWithNames:r}=e,t=i.authentication.email,a=i.profileImageUrl,o=(0,W.O)();return(0,eO.O)(i.localeKey||o),(0,n.jsxs)(p.B,{spacing:4,direction:{base:"column",md:"row"},children:[(0,n.jsxs)(p.B,{flex:"1.5",alignItems:"center",spacing:"3",children:[(0,n.jsx)(eW,{orgId:s,firstName:i.firstName,lastName:i.lastName,profileImageUrl:a,setStore:l}),(0,n.jsxs)(p.B,{w:"100%",alignItems:"center",spacing:"1",children:[(0,n.jsxs)(m.E,{fontWeight:"bold",textAlign:"center",fontSize:"xl",wordBreak:"break-word",maxW:"100%",children:[i.firstName," ",i.lastName]}),(0,n.jsx)(m.E,{color:"gray.500",wordBreak:"break-word",maxW:"100%",children:t})]})]}),(0,n.jsxs)(p.B,{flex:"2",spacing:"4",minW:"0",children:[(0,n.jsxs)(ep.MJ,{isInvalid:r,children:[(0,n.jsx)(em.l,{children:(0,n.jsx)(C.x6,{id:"V1EGGU"})}),(0,n.jsx)(eg.p,{w:"100%",value:i.firstName,onChange:e=>l(s=>({...s,firstName:e.target.value.slice(0,60)}))})]}),(0,n.jsxs)(ep.MJ,{isInvalid:r,children:[(0,n.jsx)(em.l,{children:(0,n.jsx)(C.x6,{id:"1ZaQUH"})}),(0,n.jsx)(eg.p,{w:"100%",value:i.lastName,onChange:e=>l(s=>({...s,lastName:e.target.value.slice(0,60)}))}),(0,n.jsx)(ef.Wt,{children:(0,n.jsx)(C.x6,{id:"yQeiGC"})})]}),(0,n.jsxs)(ep.MJ,{children:[(0,n.jsx)(em.l,{children:(0,n.jsxs)(p.B,{direction:"row",alignItems:"center",gap:2,children:[(0,n.jsx)(b.g,{icon:f.Bwz}),(0,n.jsx)(C.x6,{id:"vXIe7J"})]})}),(0,n.jsx)(ek.m,{selectedLocale:N.zd[o],onLocaleSelect:e=>{l(s=>({...s,localeKey:e}))}})]})]})]})},eB=e=>{let{store:s,setRoute:i,onAccountDeleteModalOpen:l,hasSentAddPasswordEmail:r}=e,[t,a]=(0,y.useState)(!1),[o]=(0,eS.hli)(),d=(0,G.d)(),c=(0,U.st)(),x=(0,y.useCallback)(()=>{a(!1)},[]),j=(0,y.useCallback)(async()=>{try{var e,s;(null==(s=(await o()).data)||null==(e=s.signOutOfAllDevices)?void 0:e.success)&&(null==c||c.track(U.VV.USER_SIGNOUT_ALL_DEVICES,{success:!0}),window.location.href="".concat(w.$.API_HOST,"/logout"))}catch(e){null==c||c.track(U.VV.USER_SIGNOUT_ALL_DEVICES,{success:!1}),d({title:(0,n.jsx)(C.x6,{id:"SlfejT"}),description:(0,n.jsx)(C.x6,{id:"GZmirP"}),status:"error",duration:5e3,isClosable:!0})}finally{a(!1)}},[o,d,c]),u="PASSWORD"===s.authentication.provider,h="GOOGLE"===s.authentication.provider,g="SSO"===s.authentication.provider,E=s.authentication.email,S=(0,y.useCallback)(e=>{i(e)},[i]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(p.B,{spacing:"6",divider:(0,n.jsx)(L.c,{}),children:[(0,n.jsxs)(p.B,{spacing:"4",children:[(0,n.jsxs)(eb.D,{as:"h4",size:"sm",children:[(0,n.jsx)(b.g,{icon:f.OKD})," ",(0,n.jsx)(C.x6,{id:"P8fBlG"})]}),g&&(0,n.jsx)(q.a,{children:(0,n.jsxs)(B.z,{p:"5",border:"2px solid",borderColor:"gray.100",borderRadius:"md",spacing:"3",boxShadow:"sm",w:"100%",children:[(0,n.jsx)(m.E,{fontWeight:"medium",children:(0,n.jsx)(C.x6,{id:"vnS6Rf"})}),(0,n.jsx)(ev.h,{})]})}),h&&(0,n.jsxs)(q.a,{children:[(0,n.jsxs)(B.z,{justifyContent:"space-between",alignItems:"flex-start",children:[(0,n.jsx)(C.x6,{id:"sdDSDG"}),!u&&(0,n.jsx)(v.Tz,{placement:"top",label:es.Ru._({id:"dqLfRI",values:{displayEmail:E}}),children:(0,n.jsx)(ee.$,{variant:"link",onClick:()=>S("add-password"),isDisabled:r,children:(0,n.jsx)(C.x6,{id:"5/Zg7X"})})})]}),(0,n.jsxs)(B.z,{p:"5",border:"2px solid",borderColor:"gray.100",borderRadius:"md",spacing:"3",boxShadow:"sm",w:"100%",children:[(0,n.jsx)(eC._,{src:"https://static.gamma.app/icons/v0/google_logo-ed9087d7.svg"}),(0,n.jsx)(m.E,{children:E}),(0,n.jsx)(ev.h,{})]})]}),u&&(0,n.jsxs)(p.B,{spacing:"4",children:[(0,n.jsxs)(ep.MJ,{children:[(0,n.jsxs)(B.z,{justifyContent:"space-between",children:[(0,n.jsx)(em.l,{children:(0,n.jsx)(C.x6,{id:"O3oNi5"})}),!1]}),(0,n.jsx)(eg.p,{value:s.authentication.email,pointerEvents:"none",readOnly:!0})]}),(0,n.jsxs)(ep.MJ,{children:[(0,n.jsxs)(B.z,{justifyContent:"space-between",mb:2,children:[(0,n.jsx)(m.E,{children:(0,n.jsx)(C.x6,{id:"8ZsakT"})}),(0,n.jsx)(ee.$,{variant:"link",onClick:()=>S("update-password"),children:(0,n.jsx)(C.x6,{id:"Q3MPWA"})})]}),(0,n.jsx)(eg.p,{value:"password",type:"password",pointerEvents:"none",readOnly:!0})]})]})]}),(0,n.jsxs)(p.B,{spacing:"4",children:[(0,n.jsxs)(eb.D,{as:"h4",size:"sm",children:[(0,n.jsx)(b.g,{icon:f.YBv})," ",(0,n.jsx)(C.x6,{id:"qwhpzz"})]}),(0,n.jsx)(ee.$,{variant:"plain",width:"fit-content",size:"md",leftIcon:(0,n.jsx)(b.g,{icon:f.yBu,fixedWidth:!0}),onClick:()=>a(!0),children:(0,n.jsx)(C.x6,{id:"eFB9sk"})})]}),(0,n.jsxs)(p.B,{spacing:"4",children:[(0,n.jsxs)(eb.D,{as:"h4",size:"sm",children:[(0,n.jsx)(b.g,{icon:f.QJT,fixedWidth:!0})," ",(0,n.jsx)(C.x6,{id:"Zz6Cxn"})]}),(0,n.jsx)(ee.$,{variant:"hazardous",width:"fit-content",leftIcon:(0,n.jsx)(b.g,{icon:f.sjs,fixedWidth:!0}),onClick:l,children:(0,n.jsx)(C.x6,{id:"ktknoE"})})]})]}),(0,n.jsx)(eU,{isOpen:t,onClose:x,onConfirm:j})]})},eF=e=>{let{store:s,setStore:i}=e,l=(0,S.dU)("gray.100","elevation.3");return(0,n.jsxs)(p.B,{p:"4",bg:l,borderRadius:"md",children:[(0,n.jsxs)(B.z,{w:"100%",justifyContent:"space-between",children:[(0,n.jsx)(m.E,{children:(0,n.jsx)(C.x6,{id:"aQpE/g"})}),(0,n.jsx)(ey.d,{size:"md",isChecked:s.emails.onboardingEmails,onChange:e=>i(s=>({...s,emails:{...s.emails,onboardingEmails:e.target.checked}}))})]}),(0,n.jsxs)(B.z,{w:"100%",justifyContent:"space-between",children:[(0,n.jsx)(m.E,{children:(0,n.jsx)(C.x6,{id:"ThnnAz"})}),(0,n.jsx)(ey.d,{size:"md",isChecked:s.emails.announcementEmails,onChange:e=>i(s=>({...s,emails:{...s.emails,announcementEmails:e.target.checked}}))})]})]})},eL=e=>{let{store:s,setStore:i,visibility:l}=e,r=(0,S.dU)("gray.100","elevation.3"),t="opt-out-not-allowed"===l,a=(0,n.jsx)(C.x6,{id:"cyXB8d",values:{GAMMA_PROPER_NOUN:en.On}});return(0,n.jsxs)(ew.T,{gap:4,alignItems:"flex-start",children:[(0,n.jsx)(p.B,{w:"100%",children:(0,n.jsx)(eb.D,{as:"h4",size:"sm",children:(0,n.jsx)(C.x6,{id:"4GGzDT"})})}),(0,n.jsxs)(B.z,{w:"100%",justifyContent:"space-between",alignItems:"flex-start",p:"4",bg:r,borderRadius:"md",children:[(0,n.jsxs)(p.B,{spacing:"1",children:[(0,n.jsxs)(m.E,{children:[(0,n.jsx)(C.x6,{id:"q5o8GB",values:{GAMMA_PROPER_NOUN:en.On}})," ",(0,n.jsx)(v.qT,{label:(0,n.jsx)(C.x6,{id:"G9cZvu",values:{GAMMA_PROPER_NOUN:en.On}})})]}),t&&(0,n.jsx)(m.E,{fontSize:"xs",color:"gray.600",children:a})]}),(0,n.jsx)(v.Tz,{placement:"top",label:a,isDisabled:!t,shouldWrapChildren:!0,children:(0,n.jsx)(ey.d,{id:"allow-training",size:"md",isChecked:!t&&s.allowTraining,isDisabled:t,onChange:e=>i(s=>({...s,allowTraining:e.target.checked}))})})]})]})},eG=e=>{let{icon:s=f.SGM,iconColor:i="green.500",iconProps:l,title:r,description:t,children:a}=e,o=(0,S.dU)(i,i);return(0,n.jsxs)(p.B,{alignItems:"center",p:"6",bg:"gray.100",spacing:"4",minH:"180px",justifyContent:"center",children:[(0,n.jsxs)(p.B,{alignItems:"center",textAlign:"center",spacing:"2",children:[(0,n.jsx)(q.a,{p:2,children:(0,n.jsx)(b.g,{icon:s,...l,size:"2x",style:{color:o}})}),(0,n.jsx)(eb.D,{as:"h3",size:"md",fontWeight:"700",fontFamily:"body",children:r}),t&&(0,n.jsx)(m.E,{children:t})]}),a]})},eV=e=>{var s;let{store:i,setRoute:l,onEmailSent:r}=e,[t,a]=(0,y.useState)(!1),[o,d]=(0,y.useState)(!1),c=(0,W.O)(),[x]=(0,ei.y2x)(),j=(0,U.st)(),u=null==i||null==(s=i.authentication)?void 0:s.email,h=()=>{l(null)},g=async()=>{d(!0);let e=!1;try{var s;let i=await (0,ex.hw)(eS.ySq.AddPassword),{emailSent:n}=(null==(s=(await x({variables:{input:{email:u,token:i,scenario:eS.acy.AddPassword,settings:{locale:c}}}})).data)?void 0:s.sendCode)||{};if(!n)throw Error("Failed to send email");a(!0),null==r||r(),e=!0}catch(e){}finally{d(!1);let s=!!u&&u.toLowerCase().includes("@gmail.com");null==j||j.track(U.VV.USER_PASSWORD_ADD,{success:e,isGmail:s})}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(K.c,{p:"6",children:(0,n.jsxs)(p.B,{spacing:"6",minH:"300px",children:[!t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.E,{children:(0,n.jsx)(C.x6,{id:"UvBNsM",values:{email:u},components:{0:(0,n.jsx)("strong",{})}})}),(0,n.jsx)(ee.$,{w:"100%",leftIcon:(0,n.jsx)(b.g,{icon:f.y_8,fixedWidth:!0}),onClick:g,isLoading:o,isDisabled:t,children:(0,n.jsx)(C.x6,{id:"wlmEWp"})})]}),t&&(0,n.jsx)(eG,{icon:f.iW_,iconColor:"#3182CE",title:(0,n.jsx)(C.x6,{id:"CSCmIt"}),description:(0,n.jsx)(C.x6,{id:"Qon8E4",values:{email:u},components:{0:(0,n.jsx)("strong",{})}})})]})}),(0,n.jsxs)(X.j,{children:[!t&&(0,n.jsx)(ee.$,{variant:"plain",onClick:h,isDisabled:o,children:(0,n.jsx)(C.x6,{id:"dEgA5A"})}),t&&(0,n.jsx)(ee.$,{variant:"solid",onClick:h,children:(0,n.jsx)(C.x6,{id:"DPfwMq"})})]})]})};var e$=i(68871),eH=i(51988);let eJ=e=>{let{setRoute:s}=e,i=(0,G.d)(),[l,r]=(0,y.useState)(""),[t,a]=(0,y.useState)(""),[o,d]=(0,y.useState)(""),[c,x]=(0,y.useState)(!1),[j,u]=(0,y.useState)(!1),[h,g]=(0,y.useState)(!1),f=(0,U.st)(),[b]=(0,eS.SVg)(),v=!t||!o||!l||c||h,w=async()=>{var e,s,r,a;x(!0);let o=!1;try{let a=await b({variables:{input:{currentPassword:l,newPassword:t}}});if(null==(e=a.errors)?void 0:e.length){let e=a.errors[0].message||(0,n.jsx)(C.x6,{id:"XLO6fp"});i({title:(0,n.jsx)(C.x6,{id:"WOLn0C"}),description:e,status:"error",position:"top",isClosable:!0});return}if(!(null==(r=a.data)||null==(s=r.changePassword)?void 0:s.success))return void i({title:(0,n.jsx)(C.x6,{id:"WOLn0C"}),description:(0,n.jsx)(C.x6,{id:"2TG1lq"}),status:"error",position:"top",isClosable:!0});u(!0),i({title:(0,n.jsx)(C.x6,{id:"DA2pbs"}),status:"success",position:"top"}),o=!0}catch(l){let e=null==(a=l.graphQLErrors)?void 0:a[0],s=(null==e?void 0:e.message)||l.message||(0,n.jsx)(C.x6,{id:"XLO6fp"});i({title:(0,n.jsx)(C.x6,{id:"WOLn0C"}),description:s,status:"error",position:"top",isClosable:!0})}finally{x(!1),null==f||f.track(U.VV.USER_PASSWORD_UPDATE,{success:o})}},E=()=>{s(null)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(K.c,{p:"6",children:(0,n.jsxs)(p.B,{spacing:"4",children:[!j&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.E,{children:(0,n.jsx)(C.x6,{id:"NSicHD"})}),(0,n.jsx)(e$.s,{label:(0,n.jsx)(C.x6,{id:"Pn2B7/"}),placeholder:es.Ru._({id:"fR9laE"}),onChange:e=>r(e.target.value),showHelp:!1}),(0,n.jsx)(eH.J,{password:t,setPassword:a,retypedPassword:o,setRetypedPassword:d,onValidationChange:g})]}),j&&(0,n.jsx)(eG,{title:(0,n.jsx)(C.x6,{id:"fSy6T1"}),description:(0,n.jsx)(C.x6,{id:"rzqEOW"})})]})}),(0,n.jsxs)(X.j,{children:[!j&&(0,n.jsxs)(Y.e,{children:[(0,n.jsx)(ee.$,{variant:"plain",onClick:E,isDisabled:c,children:(0,n.jsx)(C.x6,{id:"dEgA5A"})}),(0,n.jsx)(ee.$,{variant:"solid",onClick:w,isDisabled:v,isLoading:c,children:(0,n.jsx)(C.x6,{id:"Q3MPWA"})})]}),j&&(0,n.jsx)(ee.$,{variant:"solid",onClick:E,children:(0,n.jsx)(C.x6,{id:"DPfwMq"})})]})]})},eQ={"update-password":(0,n.jsx)(C.x6,{id:"vEdQb2"}),"add-password":(0,n.jsx)(C.x6,{id:"f/dPsx"}),"change-email":(0,n.jsx)(C.x6,{id:"Xl7vxL"})};async function eK(e,s,i,n,l,r){if(!i.current||!l||!r)return!1;let t=i.current,a={};s.firstName!==t.firstName&&(a.firstName=s.firstName),s.lastName!==t.lastName&&(a.lastName=s.lastName),s.profileImageUrl!==t.profileImageUrl&&(a.profileImageUrl=s.profileImageUrl||""),s.allowTraining!==t.allowTraining&&(a.trainingOptOut=!s.allowTraining);let o={},d=t.emails,c=s.emails;c.announcementEmails!==d.announcementEmails&&(o.unsubscribeAnnouncementEmails=!c.announcementEmails),c.onboardingEmails!==d.onboardingEmails&&(o.unsubscribeOnboardingEmails=!c.onboardingEmails),s.localeKey!==t.localeKey&&(o.locale=s.localeKey);try{Object.keys(a).length>0&&await n({variables:{input:{id:e,...a}}});let s=Object.keys(o).length>0;s&&await l({set:o}),s||await r()}catch(e){return!1}return!0}let eq=e=>{let{orgId:s,user:i,isOpen:l,onClose:r,onAccountDeleteModalOpen:t}=e,[a]=(0,ei.H7G)(),[o,d]=(0,y.useState)(!1),{refetch:c,setSettings:x}=(0,M.ur)(),[j,u]=(0,y.useState)(0),[h,p]=(0,y.useState)(null),m=(0,W.O)(),g=(0,y.useMemo)(()=>m,[]),[v,w]=(0,y.useState)(g),[E,S]=(0,y.useState)(!1),k=(0,G.d)(),O=(0,y.useRef)(null),[I,z]=(0,y.useState)(eh);(0,y.useEffect)(()=>{if(l){var e,s;let n={route:"sign-in",profileImageUrl:i.profileImageUrl||"",firstName:i.firstName,lastName:i.lastName,authentication:{provider:i.authProvider,email:i.email},emails:{onboardingEmails:!(null==(e=i.settings)?void 0:e.unsubscribeOnboardingEmails),announcementEmails:!(null==(s=i.settings)?void 0:s.unsubscribeAnnouncementEmails)},localeKey:v,allowTraining:!i.trainingOptOutTime};O.current=structuredClone(n),z(n),d(!1)}},[l,i,v]);let[A,D]=(0,y.useState)(!1);(0,y.useEffect)(()=>{D(!ec()(O.current,I))},[I]);let{isOpen:T,onOpen:_,onClose:R}=(0,ej.E)({id:"account-settings-unsaved-changes"}),N=async()=>{if(!A)return void r();_()},U=async()=>{if(!A)return void r();S(!0);let e=await eK(i.id,I,O,a,x,c);S(!1),r(),e?k({title:(0,n.jsx)(C.x6,{id:"wAvGr+"}),position:"top",status:"success",isClosable:!0,duration:3e3}):k({title:(0,n.jsx)(C.x6,{id:"ttXyaw"}),position:"top",status:"error",isClosable:!0,duration:3e3})},[P]=(0,y.useState)({title:es.Ru._({id:"sCTlv5"}),body:es.Ru._({id:"EVJO23"}),primaryCTA:es.Ru._({id:"y3aU20"}),secondaryCTA:es.Ru._({id:"3EbjfR"})});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ex.vj,{}),(0,n.jsxs)(V.aF,{trapFocus:!1,isOpen:!0,size:"3xl",onClose:N,children:[(0,n.jsx)($.m,{}),(0,n.jsxs)(H.$,{children:[(0,n.jsxs)(J.r,{children:[null!==h&&(0,n.jsx)(eo.K,{"aria-label":"Back",size:"sm",variant:"ghost",icon:(0,n.jsx)(b.g,{icon:f.Wzs}),onClick:()=>{p(null)},me:2}),h&&eQ[h]||(0,n.jsx)(C.x6,{id:"T3FM0r"})]}),(0,n.jsx)(L.c,{}),(0,n.jsx)(Q.s,{}),null===h&&(0,n.jsx)(eM,{orgId:s,store:I,setStore:z,onClose:U,tabIndex:j,setTabIndex:u,setRoute:p,onAccountDeleteModalOpen:()=>{t(),r()},isDirty:A,onResetStore:()=>{O.current&&z(structuredClone(O.current))},isSaving:E,hasSentAddPasswordEmail:o}),"add-password"===h&&(0,n.jsx)(eV,{store:I,setRoute:p,onEmailSent:()=>d(!0)}),"update-password"===h&&(0,n.jsx)(eJ,{setRoute:p})]})]}),(0,n.jsx)(eu,{isOpen:T,onClose:R,onConfirm:U,onDiscard:()=>{R(),r()},originalLocaleConfirmStrings:v!==g?P:null})]})};var eZ=i(45143);let eX={maxWidth:"sm",whiteSpace:"break-spaces"},eY=(0,y.memo)(e=>{var s;let{showRing:i}=e,{isInOfflineMode:l}=(0,E.u)(),{user:r,anonymousUser:t,isUserLoading:y,color:S,currentWorkspace:k}=(0,M.ur)(),{isOpen:O,onOpen:I,onClose:z}=(0,a.j)({id:"locale-modal-profile-menu"}),A=(0,W.O)(),D=(0,eZ.h5)(["xs","sm"]),T={...t,organizations:[]},{displayName:P,profileImageUrl:B}=r||T,{isConnected:F}=(0,E.u)(),{isOpen:L,onOpen:G,onClose:V}=(0,a.j)({id:"user-settings-modal"}),{isOpen:$,onOpen:H,onClose:J}=(0,a.j)({id:"account-delete-modal"});return(0,n.jsxs)(o.W,{children:[(0,n.jsx)(v.Tz,{label:F?r?(0,n.jsx)(C.x6,{id:"hBHHtH"}):P:(0,n.jsx)(C.x6,{id:"ysdDIA"}),children:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(d.I,{tabIndex:0,_focus:{shadow:"outline"},as:c.e,bg:S.value,color:S.isDark?"white":"black",border:i?"solid 2px ".concat(S.value):"solid 2px var(--chakra-colors-gray-50)",shadow:i?"base":void 0,outline:"none",name:y?void 0:P,src:B,size:D,alignItems:"center",className:"profile-menu-avatar",flexDirection:"column",cursor:"pointer",transition:"box-shadow 150ms ease-out",_hover:{shadow:"0 0 0 3px #CBD5E0"},onDragStart:e=>e.preventDefault(),sx:{span:{display:"none"}}})})}),(0,n.jsx)(x.Z,{children:(0,n.jsx)(j.c,{zIndex:"popover",children:r?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(h.r,{sx:eX,children:[(0,n.jsxs)(p.B,{spacing:0,px:2,py:1,children:[(0,n.jsx)(m.E,{fontWeight:"bold",children:P}),(0,n.jsx)(m.E,{fontSize:"sm",color:"gray.500",children:r.email})]}),(0,n.jsx)(g.N,{}),(0,n.jsx)(u.D,{icon:(0,n.jsx)(b.g,{icon:f.BH7,fixedWidth:!0}),onClick:G,isDisabled:l,children:(0,n.jsx)(C.x6,{id:"LpPf/O"})}),(0,n.jsx)(u.D,{icon:(0,n.jsx)(b.g,{fixedWidth:!0,icon:f.Bwz}),onClick:I,children:(null==(s=N.zd[A])?void 0:s.displayName)||"Unknown"}),(0,n.jsx)(u.D,{color:"red.500",icon:(0,n.jsx)(b.g,{icon:f.GxD,fixedWidth:!0}),onClick:()=>{(0,el.n)(),window.location.href="".concat(w.$.API_HOST,"/logout")},isDisabled:l,mb:2,children:(0,n.jsx)(C.x6,{id:"fcWrnU"})}),(0,n.jsx)(_,{modalId:"ai-credits-modal-profile-menu",segmentEvent:U.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_PROFILE_MENU})]})}):(0,n.jsx)(u.D,{icon:(0,n.jsx)(b.g,{icon:f.rhE,fixedWidth:!0}),onClick:()=>{window.location.href="/signin"},isDisabled:l,children:(0,n.jsx)(C.x6,{id:"n1ekoW"})})})}),L&&r&&(0,n.jsx)(eq,{orgId:(null==k?void 0:k.id)||"",user:r,isOpen:L,onClose:V,onAccountDeleteModalOpen:H}),$&&r&&(0,n.jsx)(ea,{user:r,isOpen:$,onClose:J}),O&&(0,n.jsx)(R.l,{onClose:z})]})});eY.displayName="ProfileMenu"}}]);
//# sourceMappingURL=1430-90a7a6df8c7d14cd.js.map