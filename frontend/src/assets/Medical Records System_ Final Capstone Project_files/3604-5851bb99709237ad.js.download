(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3604],{343:(e,i,t)=>{"use strict";t.d(i,{$:()=>x});var s=t(55729),n=t(88586),l=t(56450),r=t(20715),o=t(68104),a=t(51817),d=t(72492),c=t(82927),u=t(53505);let x=()=>{let[e]=(0,n.wdY)(),{user:i}=(0,c.ur)();return(0,s.useCallback)(async t=>{let{title:s,path:c,documentAttributes:x,file:h,source:p,titleEdited:m}=t,g=(0,o.k5)(x),j=(0,d.p0)(g);if(!h)throw Error("Tried to create a page without file");let f=(0,u.X)({path:c,pages:h.pages}),{data:b}=await e({variables:{fileId:h.id,title:s,titleEdited:m,path:f,source:p&&l.a[p]||n.ALe.SitesAddPage,initialContent:{ydoc:j,schemaVersion:a.f$,editors:[null==i?void 0:i.id]}}});if(!b)throw Error("Mutation didnt return data");let{createPage:{id:v}}=b;return(0,r.cg)({doc_id:v,source:p||n.ALe.SitesAddPage,channel:null}),{docId:v}},[e,null==i?void 0:i.id])}},1036:(e,i,t)=>{"use strict";t.d(i,{p:()=>r});var s=t(6029),n=t(40452),l=t(3276);let r=e=>{let{spinnerProps:i}=e;return(0,s.jsx)(n.s,{justifyContent:"center",alignItems:"center",w:"100%",h:"100%",position:"absolute",zIndex:1e3,bg:"whiteAlpha.800",children:(0,s.jsx)(l.y,{...i})})}},2942:(e,i,t)=>{"use strict";t.d(i,{Z0:()=>d,ip:()=>u,mm:()=>c});var s=t(81278),n=t(55729),l=t(15342),r=t(43634),o=t(70006),a=t(81664);let d=(0,n.createContext)({openSiteSettings:e=>{},openSharePanel:(e,i)=>{}}),c=e=>{let{push:i}=(0,s.useRouter)(),t=(0,l.CU)();return(0,n.useMemo)(()=>({openSiteSettings:e=>{a.R.emit("openSiteSettings",e)},openSharePanel:async(s,n)=>{let l=()=>a.R.emit("openSharePanel",n);if(s!==e){let e=(0,o.pF)({docId:s});await i(e);let n=t.subscribe(()=>{(0,r.sX)(t.getState())===s&&(l(),n())})}else l()}}),[e,i,t])},u=()=>(0,n.useContext)(d)},3844:(e,i,t)=>{"use strict";t.d(i,{A:()=>s});let s={src:"/_next/static/media/gamma-logo-profile-image.73d64ea1.png",height:800,width:800,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAARVBMVEX////3/f+64P9Zb47H5v+l1v40VYGOyv/v9/zh8f5uh6d/kKgtSHHD1OjV3OMZMF4dK1tIZYufy/JPealwmsbE0uCXttYFpAwdAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAPklEQVR4nCXFRxKAMAwEsHVc1g4l9P8/lWHQRSDpJAn344yrOcwi+mMNtYw79ipIztq3FAhW1SnxsfaPqgReR38Br+Tzt/8AAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}},10744:(e,i,t)=>{"use strict";t.d(i,{n:()=>nj});var s=t(6029),n=t(67909),l=t(36071),r=t(54731),o=t(3674),a=t(47412),d=t(55729),c=t(69768),u=t(22445),x=t(15342),h=t(17920),p=t(40691),m=t(48810),g=t(16426),j=t(61204),f=t(49611),b=t(19564);let v=e=>{let{isOpen:i,onClose:t,onConfirm:a}=e;return(0,s.jsxs)(n.aF,{isOpen:i,onClose:t,children:[(0,s.jsx)(l.m,{}),(0,s.jsxs)(r.$,{children:[(0,s.jsx)(h.r,{children:(0,s.jsx)(b.x6,{id:"sCTlv5"})}),(0,s.jsx)(o.s,{}),(0,s.jsx)(p.c,{children:(0,s.jsx)(m.E,{children:(0,s.jsx)(b.x6,{id:"nvyKWT"})})}),(0,s.jsx)(g.j,{children:(0,s.jsxs)(j.e,{flexWrap:"wrap",gap:"3",justifyContent:"flex-end",spacing:"0",children:[(0,s.jsx)(f.$,{variant:"ghost",onClick:t,children:(0,s.jsx)(b.x6,{id:"4OjqAQ"})}),(0,s.jsx)(f.$,{variant:"hazardous",onClick:a,children:(0,s.jsx)(b.x6,{id:"a7JgI7"})})]})})]})]})};var y=t(91792),w=t(4950),C=t(91264),k=t(72386),S=t(70006),_=t(9620),I=t(40452),A=t(29810),R=t(26385),E=t(26420),T=t(33787),D=t(99492),P=t(48621),z=t(82927),O=t(58959),M=t(27828),F=t(45143);let N=e=>{let{children:i}=e,t=(0,F.h5)({base:"var(--chakra-sizes-sm)",lg:"var(--chakra-sizes-xl)",xl:"var(--chakra-sizes-2xl)","2xl":"var(--chakra-sizes-3xl)"})||"var(--chakra-sizes-md)";return(0,s.jsx)(I.s,{"data-config-pane":!0,direction:"column",height:"100%",w:t,children:i})},L=e=>{let{children:i}=e;return(0,s.jsx)(m.E,{textAlign:"center",w:"100%",fontSize:"lg",fontWeight:"semibold",children:i})},G=e=>{let{children:i,onClick:t,leftIcon:n}=e;return(0,s.jsx)(f.$,{position:"absolute",left:"2",top:"2.5",color:"gray.800",variant:"ghost",onClick:t,leftIcon:(0,s.jsx)(P.g,{icon:n}),children:i})},B=e=>{let{children:i}=e;return(0,s.jsx)(E.a,{children:(0,s.jsx)(O.z,{p:"4",minH:"14",w:"100%",alignItems:"center",justifyContent:"center",children:i})})},U=e=>{let{children:i,stackProps:t}=e;return(0,s.jsx)(E.a,{p:"4",borderTop:"1px solid",borderColor:"gray.200",children:(0,s.jsx)(O.z,{justifyContent:"space-between",position:"relative",...t,children:i})})},W=e=>{let{children:i}=e;return(0,s.jsx)(E.a,{flex:"1",p:4,w:"100%",overflowY:"auto",children:(0,s.jsx)(M.m,{maxW:"container.md",mx:"auto",children:i})})},V=e=>{let{children:i}=e;return(0,s.jsx)(I.s,{direction:"column",height:"100%",flex:1,minW:0,pos:"relative",children:i})};var H=t(34807),$=t(3276),X=t(83004),K=t(95695),J=t(42726),q=t(74127),Q=t(71128);let Z="theme-editor-root",Y=(0,d.memo)(e=>{let{theme:i,setEditor:t}=e,n=(0,d.useMemo)(()=>(0,J.t)(),[]),l=(0,H.A)(K.H4),r=(0,H.A)(Q.OA),o=i?(0,Q.qh)(i,r):null,[a,c]=(0,d.useState)(!1);return((0,d.useEffect)(()=>{if(a)return;let e=setTimeout(()=>{c(!0)},500);return()=>clearTimeout(e)},[a]),a&&i)?(0,s.jsxs)(I.s,{className:Z,css:{"--editor-width":"100%",...o?{"--doc-padding-left":"".concat(o.width+o.paddingX/2,"px")}:{},"--editor-font-size":l,"*":{transitionProperty:"color, background-color, border-color, fill, stroke",transitionDuration:"50ms",transitionTimingFunction:"ease-out"}},overflowY:"scroll",children:[(0,s.jsx)(X.mL,{styles:{"#doc-main":{display:"none"}}}),(0,s.jsx)(I.s,{w:"100%","data-testid":"custom-theme-preview-editor",className:"disable-card-size-animations",pointerEvents:"none",children:(0,s.jsx)(q.u,{onCreate:e=>{null==t||t(e.editor)},initialContent:n,theme:i,scrollingParentSelector:".".concat(Z),isInsideDrawer:!0,animationsEnabled:!1})})]}):(0,s.jsx)(I.s,{direction:"column",height:"100%",flex:1,minW:0,w:"100%",align:"center",justify:"center",bg:"gray.50",children:(0,s.jsx)($.y,{size:"sm"})})});Y.displayName="PreviewPaneEditor";var ee=t(7312);let ei=e=>{let{children:i}=e;return(0,s.jsx)(O.z,{flex:1,spacing:0,h:"100%",divider:(0,s.jsx)(ee.G,{}),children:i})};var et=t(46898),es=t(88586),en=t(95889);let el=e=>{let{onComplete:i,flow:t}=e,[n,{loading:l}]=(0,es.if9)(),[r,{loading:o}]=(0,es.p2Z)(),{currentWorkspace:a}=(0,z.ur)(),c=(0,en.st)(),u=(0,et.d)(),h=(0,d.useCallback)(e=>{let{id:l,...r}=e;return n({variables:{input:r},update:(e,i)=>{let{data:t}=i;(null==t?void 0:t.createTheme)&&e.writeQuery({query:es.a83,variables:{workspaceId:a.id,archived:!1},data:{themes:[t.createTheme]}})},optimisticResponse:{createTheme:{__typename:"Theme",...e,archived:!1,createdTime:new Date().toISOString(),updatedTime:new Date().toISOString()}}}).then(n=>{let{data:l}=n;if(null==l?void 0:l.createTheme){var r;null==c||c.track(en.VV.THEME_CREATED,{theme_id:null==l||null==(r=l.createTheme)?void 0:r.id,type:"new",flow:t}),null==i||i(l.createTheme)}return u({position:"top",title:(0,s.jsx)(b.x6,{id:"c1Vll8",values:{0:e.name}}),status:"success",duration:5e3,isClosable:!0}),w.R.emit("closeThemeConfiguration",{}),null==l?void 0:l.createTheme}).catch(e=>{if(e.graphQLErrors&&e.graphQLErrors.length>0&&"duplicate_theme_name"===e.graphQLErrors[0].code)return void u({position:"top",title:(0,s.jsx)(b.x6,{id:"9RJBro"}),status:"error",duration:5e3,isClosable:!0});u({position:"top",title:(0,s.jsx)(b.x6,{id:"y47vGS"}),status:"error",duration:5e3,isClosable:!0})})},[n,a,u,c,t,i]),p=(0,d.useCallback)(e=>{r({variables:{input:e},update:(e,i)=>{let{data:t}=i;(null==t?void 0:t.updateTheme)&&e.writeQuery({query:es.a83,variables:{workspaceId:a.id,archived:!1},data:{themes:[t.updateTheme]}})},optimisticResponse:{updateTheme:{__typename:"Theme",...e,archived:!1,createdTime:new Date().toISOString(),updatedTime:new Date().toISOString()}}}).then(e=>{let{data:n}=e;if(null==n?void 0:n.updateTheme){var l;null==c||c.track(en.VV.THEME_UPDATED,{theme_id:null==n||null==(l=n.updateTheme)?void 0:l.id,flow:t}),null==i||i(n.updateTheme)}u({position:"top",title:(0,s.jsx)(b.x6,{id:"iZRx4V"}),status:"success",duration:5e3,isClosable:!0}),w.R.emit("closeThemeConfiguration",{})}).catch(e=>{if(e.graphQLErrors&&e.graphQLErrors.length>0&&"duplicate_theme_name"===e.graphQLErrors[0].code)return void u({position:"top",title:(0,s.jsx)(b.x6,{id:"9RJBro"}),status:"error",duration:5e3,isClosable:!0});u({position:"top",title:(0,s.jsx)(b.x6,{id:"y47vGS"}),status:"error",duration:5e3,isClosable:!0})})},[r,a,u,c,t,i]),m=(0,d.useCallback)(()=>{let e=(0,C.s0)(null==a?void 0:a.id)((0,x.KA)().getState());(null==e?void 0:e.id)==="new"?h(e):p(e)},[h,p,null==a?void 0:a.id]);return{createTheme:h,persistTheme:m,isThemeSaving:l||o}},er=e=>{let i=(0,x.jL)();(0,d.useEffect)(()=>(i((0,C.kD)({flow:e})),()=>{i((0,C.kD)({flow:null}))}),[i,e])};var eo=t(92699),ea=t(99038),ed=t(96500),ec=t(53996),eu=t(16491),ex=t(91938),eh=t(95918),ep=t(96259),em=t(69164);let eg=e=>{let i=(0,d.useCallback)(async(i,t)=>{var s;if(t.mimeType!==eh.M.GOOGLE_SLIDES)return;null==(s=e.onImportStarted)||s.call(e,t.id);let n=await (0,em.m)({token:i,fileId:t.id,mimeType:eh.M.PPTX,filename:"".concat(t.name,".pptx")});e.onImportComplete(n)},[e]),{initiateGoogleImport:t}=(0,ep.MB)({onSelect:i,pickers:{docs:!1,slides:!0}});return{initiateGoogleImport:t}};var ej=t(35816),ef=t(27695),eb=t(8859);let ev=()=>{let[e]=(0,es.oF7)();return(0,d.useCallback)(async i=>{var t,s;let{fileUrl:n,interactionId:l}=i;if(!n)throw Error("fileUrl is required");let r=await e({variables:{input:{workspaceId:(0,z.gx)(),fileUrl:n,interactionId:l}}});if(!(null==(t=r.data)?void 0:t.generateImportPptTheme))throw Error("Failed to generate theme");return null==(s=r.data)?void 0:s.generateImportPptTheme},[e])},ey=()=>{let e=(0,x.jL)(),i=(0,en.st)(),t=(0,et.d)(),{fontsMap:n}=(0,y.II)(),l=ev(),r=(0,x.CU)(),o=(0,d.useRef)(null),a=(0,d.useRef)(0),c=(0,d.useCallback)(i=>{a.current=performance.now(),e((0,_.Gh)({fileId:i})),o.current=i},[e]),u=(0,d.useCallback)(async d=>{let c=(0,_.IX)(r.getState());if(o.current!==c||!c)return;let u=r.getState();e((0,_.pr)({inputFile:d}));try{let t=await l({fileUrl:d.fileUrl,interactionId:(0,_.f9)(u)});t&&(e((0,_.o6)({themeSuggestions:t.theme,thumbnails:t.thumbnails,fontsMap:n})),null==i||i.track(en.VV.THEME_IMPORTED,{source:"PptxUpload",latency:performance.now()-a.current,src:d.fileUrl,filename:d.filename}))}catch(i){e((0,_.QJ)()),console.error(i),t({title:(0,s.jsx)(b.x6,{id:"jK6rIX"}),description:i.message,status:"error",duration:null,isClosable:!0,position:"top"})}},[i,e,n,l,t,r]),h=(0,d.useCallback)(t=>{e((0,_.QJ)()),null==i||i.track(en.VV.THEME_IMPORT_FAILED,{source:"PptxUpload",latency:performance.now()-a.current,message:t.message})},[i,e]);(0,d.useCallback)(()=>{e((0,_.QJ)())},[e]);let{uppyInstance:p}=eC({onStarted:c,onComplete:u,onError:h});return(0,s.jsx)(eu.G_,{clientId:ex.$.GOOGLE_DRIVE_IMPORT_CLIENT_ID,children:(0,s.jsxs)(R.B,{children:[(0,s.jsx)(eb.j,{uppyInstance:p}),(0,s.jsxs)(E.a,{position:"relative",py:"3",children:[(0,s.jsx)(ed.c,{}),(0,s.jsx)(ec.R,{bg:"white",px:"4",children:(0,s.jsx)(m.E,{color:"gray.600",children:(0,s.jsx)(b.x6,{id:"BzEFor"})})})]}),(0,s.jsx)(ew,{uppyInstance:p})]})})},ew=e=>{let{uppyInstance:i}=e,[t,n]=(0,d.useState)(!1),{initiateGoogleImport:l}=eg({onImportStarted:(0,d.useCallback)(()=>{n(!0)},[]),onImportComplete:(0,d.useCallback)(async e=>{try{i.addFile({name:e.name,type:e.type,data:e}),await i.upload()}catch(e){}finally{n(!1)}},[i])});return(0,s.jsx)(f.$,{variant:"plain",color:"gray.700",onClick:l,isLoading:t,leftIcon:(0,s.jsx)(T._,{src:ej.A.src,boxSize:4,alt:"Google Drive"}),children:(0,s.jsx)(b.x6,{id:"5nN3Wd"})})},eC=e=>{let i=(0,et.d)();return{uppyInstance:(0,d.useMemo)(()=>(0,ef.ib)().maxNumberOfFiles(1).maxFileSize(0xc800000).orgId((0,z.gx)()).templateId(ex.$.TRANSLOADIT_FILE_TEMPLATE_ID).allowedFileTypes([eh.M.PPTX]).onRestrictionFailed((e,t)=>{i({title:(0,s.jsx)(b.x6,{id:"SlfejT"}),description:(0,s.jsx)(b.x6,{id:"cHJvHu",values:{0:null==e?void 0:e.name}}),status:"error",duration:5e3,isClosable:!0,position:"top"})}).onError(i=>{var t;null==(t=e.onError)||t.call(e,i)}).onFileAdded(i=>{var t;null==(t=e.onStarted)||t.call(e,i.id)}).onTransloaditComplete(i=>{let t=i.results[":original"];if(!t){var s;null==(s=e.onError)||s.call(e,Error("No results for original file"));return}let n={fileUrl:t[0].url,filename:t[0].original_name};e.onComplete(n)}).build(),[e,i])}},ek=(0,d.memo)(()=>(0,s.jsx)(M.m,{p:6,children:(0,s.jsxs)(R.B,{spacing:4,children:[(0,s.jsx)(m.E,{children:(0,s.jsx)(b.x6,{id:"aVYU1Z",values:{GAMMA_PROPER_NOUN:ea.On}})}),(0,s.jsx)(m.E,{fontSize:"sm",color:"gray.600",children:(0,s.jsx)(b.x6,{id:"fLNR+e"})}),(0,s.jsx)(ey,{})]})}));ek.displayName="InitialStep";var eS=t(58297),e_=t(64268),eI=t(83638),eA=t(25223),eR=t(38036),eE=t(80314),eT=t(37930),eD=t(6760),eP=t(48478),ez=t(78140),eO=t(36999),eM=t(41283),eF=t(77650),eN=t(98087),eL=t(404),eG=t(32617),eB=t(69413),eU=t(89528),eW=t(89942),eV=t(85443),eH=t(92382),e$=t(55597);let eX=e=>{let{label:i,description:t,labelColor:n="black",fontFamily:l,fontStyle:r="normal",fontWeight:o=400}=e,a=(0,s.jsxs)(O.z,{alignItems:"baseline",children:[(0,s.jsx)(E.a,{color:"yellow.400",children:(0,s.jsx)(P.g,{icon:e$.QJT})}),(0,s.jsx)(m.E,{textAlign:"start",color:n,fontWeight:o,fontSize:"lg",fontFamily:l,fontStyle:r,children:i})]});return t?(0,s.jsxs)(E.a,{children:[a,(0,s.jsx)(m.E,{fontSize:"xs",color:"gray.500",children:t})]}):a},eK=eN.Y1,eJ=e=>{let{value:i,updateValue:t,onFontUploadClick:n,weight:l="regular",defaultFont:r,fonts:o,customFontsEnabled:c=!0,...u}=e,x=e=>{t(e||void 0)},h=(0,eG.u)("allGoogleFonts"),p=(0,d.useRef)(null),g=(0,d.useRef)(null),[j,v]=(0,d.useState)(""),{workspaceFonts:w,globalFonts:C}=o,{allGlobalFonts:k}=(0,y.vk)(),S=(0,d.forwardRef)((e,i)=>{let{children:t,...n}=e;return(0,s.jsx)(eT.i,{...n,onChange:x,ref:i,"data-font-picker-list":!0,children:t})});S.displayName="MenuOptionGroupWrapper";let _=(0,d.useMemo)(()=>j?w.filter(e=>e.name.toLowerCase().includes(j.toLowerCase())):w,[w,j]),I=(0,d.useMemo)(()=>{let e=h&&k.length>0?k:C;if(!j){if(i&&!C.find(e=>e.id===i)){let t=e.find(e=>e.id===i),s=[...C];return t&&s.push(t),s.sort((e,i)=>{var t;return(null==e||null==(t=e.name)?void 0:t.localeCompare((null==i?void 0:i.name)||""))||0})}return C}return e.filter(e=>e.name.toLowerCase().includes(j.toLowerCase()))},[C,k,j,h,i]),[A,R,T]=(0,d.useMemo)(()=>{let e=[...w,...C,...!0===h?k:[]],t=e.find(e=>e.id===i);return[t,(0,eH.vt)(e,i),(0,eH.vt)(e,i,!1)]},[C,w,i,k,h]),z=c&&w.filter(e=>!e.archived||e.id===(null==A?void 0:A.id)).length>0,O=(0,d.useMemo)(()=>{let e=[];return z&&(e.push({type:"section",label:"Uploaded fonts",id:"section-workspace"}),_.forEach(t=>{var s;let n=t.id!==i,l=t.archived&&n,r=(null==(s=t.fontFiles)?void 0:s.length)===0&&n;!t.fontFiles||r||l||e.push({type:"font",font:t,value:t.id,id:t.id})}),e.push({type:"divider",id:"divider"}),e.push({type:"section",label:"Built-in fonts",id:"section-builtin"})),e.push({type:"font",value:"",id:"Inter",name:"Inter"}),I.forEach(i=>{e.push({type:"font",font:i,value:i.id,id:i.id})}),e},[z,_,I,i]),M=!1,F="normal",N="bold"===l?700:400;if(A&&null!==A.workspaceId){M=!0===A.archived;let e=[...A.fontFiles||[]];F=(0,eB.Q3)(e)?"italic":"normal";let i=(0,eB.Eu)(e);N=(0,eB.g9)(i,"bold"===l?700:400)||400}let{currentWorkspace:L}=(0,eV.u)(),G=(0,eW.ez)("custom_fonts",L),B=(0,d.useMemo)(()=>O.findIndex(e=>e.id===i),[O,i]);return(0,s.jsxs)(ez.W,{matchWidth:!0,isLazy:!0,strategy:"fixed",onClose:()=>v(""),onOpen:()=>{setTimeout(()=>{if(p.current&&p.current.focus(),g.current){var e;let i=null==(e=g.current.querySelector('[role="group"]'))?void 0:e.children[0];i&&i.scrollTop!==40*B&&i.scrollTo({top:40*B})}},20)},children:[(0,s.jsx)(eO.I,{size:"lg",as:f.$,borderRadius:"md",overflow:"hidden",rightIcon:(0,s.jsx)(P.g,{icon:D.Jt$,transform:"shrink-6"}),variant:"toolbar",px:4,h:10,w:"100%",border:"1px solid",borderColor:"gray.200",...u,children:c&&M?(0,s.jsx)(eX,{label:T||"",fontFamily:'"'.concat(R,'"'),labelColor:i?"gray.700":"gray.400",fontStyle:F,fontWeight:N}):(0,s.jsxs)(m.E,{textAlign:"start",fontFamily:'"'.concat(R||r,'"'),fontWeight:N,color:i?"gray.700":"gray.400",fontStyle:F,children:[(0,s.jsx)(eE.N,{as:"link",href:null==A?void 0:A.cssUrl,rel:"stylesheet","data-gamma-font":null==A?void 0:A.id}),T||(0,s.jsx)(b.x6,{id:"Ff/YaY",values:{defaultFont:r,GAMMA_PROPER_NOUN:ea.On}})]})}),(0,s.jsxs)(eM.c,{p:0,zIndex:"dropdown",children:[(0,s.jsx)(E.a,{p:3,borderBottom:"1px solid",borderColor:"gray.200",children:(0,s.jsx)(eR.p,{ref:p,placeholder:eF.Ru._({id:"VPp+PK"}),value:j,onChange:e=>v(e.target.value),size:"sm",bg:"white",border:"1px solid",borderColor:"gray.300",_focus:{borderColor:"blue.500",boxShadow:"0 0 0 1px var(--chakra-colors-blue-500)"},_hover:{borderColor:"gray.400"}})}),(0,s.jsx)(E.a,{ref:g,children:(0,s.jsx)(S,{type:"radio",value:i||"",children:(0,s.jsx)(eK,{height:Math.min(300,40*O.length),itemCount:O.length,itemSize:40,initialScrollOffset:B>=0?40*B:0,width:"100%",style:{overflowX:"hidden"},overscanCount:20,children:e=>{let{index:t,style:n}=e,o=O[t];if("section"===o.type)return(0,s.jsx)("div",{style:n,children:(0,s.jsx)(a._x,{m:2,ms:3,children:"Uploaded fonts"===o.label?(0,s.jsx)(b.x6,{id:"syCKVA"}):(0,s.jsx)(b.x6,{id:"Z/0bkt"})})});if("divider"===o.type)return(0,s.jsx)("div",{style:n,children:(0,s.jsx)(eD.N,{})});if("font"===o.type){let e=o.font;if(""===o.value)return(0,s.jsx)(eP.k,{value:"",style:n,onClick:()=>x(null==e?void 0:e.id),children:(0,s.jsx)(m.E,{fontFamily:r,fontSize:"lg",fontWeight:l,color:"gray.400",children:(0,s.jsx)(b.x6,{id:"Ff/YaY",values:{defaultFont:r,GAMMA_PROPER_NOUN:ea.On}})})});let t=null!==e.workspaceId&&e.fontFiles&&(0,eB.Q3)(e.fontFiles)?"italic":"normal";return null!==e.workspaceId&&!0===e.archived&&e.id===i?(0,s.jsx)(eP.k,{value:e.id,disabled:!0,style:n,children:(0,s.jsx)(eX,{fontFamily:e.name,label:e.name,fontStyle:t,description:(0,s.jsx)(b.x6,{id:"gxQo+B"})})}):(0,s.jsxs)(eP.k,{value:e.id,style:n,onClick:()=>x(null==e?void 0:e.id),children:[(0,s.jsx)(eE.N,{as:"link",href:null==e?void 0:e.cssUrl,rel:"stylesheet","data-gamma-font":null==e?void 0:e.id}),(0,s.jsx)(m.E,{fontFamily:(0,eH.rO)(e.id)?'"'.concat(e.id,'"'):'"'.concat(e.name,'"'),fontSize:"lg",fontWeight:l,fontStyle:t,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",maxW:"100%",children:e.name})]})}return null}})})}),c&&(0,s.jsx)(eL.N,{label:(0,s.jsx)(b.x6,{id:"vNYIdl"}),leftIcon:(0,s.jsx)(P.g,{icon:D.MNJ,fixedWidth:!0}),badge:G?void 0:(0,s.jsx)(eU.zL,{product:"pro"}),onClick:n,isSticky:!0})]})]})};var eq=t(74771),eQ=t(74907);let eZ=e=>{var i,t,n;let{font:l,value:r,defaultWeight:o,updateValue:a,...c}=e,u=(0,d.useCallback)(e=>{let i=Number(e);Number.isNaN(i)||a(i)},[a]),x=(null==r?void 0:r.toString())||"",h=(0,eQ.w)()[o],{weightOptions:p,isDeletedFontWeight:g}=(0,d.useMemo)(()=>{let e=(0,eH.yi)(l),i=void 0!==r&&!e.includes(r);return i&&r?{isDeletedFontWeight:i,weightOptions:[...e,r].sort((e,i)=>e-i)}:{isDeletedFontWeight:i,weightOptions:e}},[l,r]),j=l&&(null==l?void 0:l.workspaceId)!==null,v=j&&(null==(i=l.fontFiles)?void 0:i.length)===0,y=g&&j,w=(0,S.Zi)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(ez.W,{matchWidth:!0,isLazy:!0,strategy:"fixed",children:[(0,s.jsx)(eO.I,{size:"lg",as:f.$,borderRadius:"md",rightIcon:(0,s.jsx)(P.g,{icon:D.Jt$,transform:"shrink-6"}),variant:"toolbar",px:4,h:10,w:"100%",border:"1px solid",borderColor:"gray.200",isDisabled:p.length<=1,...c,children:g?(0,s.jsx)(eX,{label:v?(0,s.jsx)(b.x6,{id:"EqUVJs"}):null!=(t=(0,eQ.w)()[x])?t:h,labelColor:r?"gray.700":"gray.400"}):(0,s.jsx)(m.E,{textAlign:"start",color:r?"gray.700":"gray.400",fontWeight:400,children:null!=(n=(0,eQ.w)()[x])?n:h})}),(0,s.jsx)(eM.c,{maxH:"320px",overflow:"auto",zIndex:"dropdown",children:(0,s.jsx)(eT.i,{type:"radio",value:x,onChange:u,children:p.map(e=>{var i,t;return g&&r===e?(0,s.jsx)(eP.k,{value:e.toString(),disabled:!0,children:(0,s.jsx)(eX,{label:null!=(i=(0,eQ.w)()[e])?i:h,description:y?(0,s.jsx)(b.x6,{id:"KFmni+"}):(0,s.jsx)(b.x6,{id:"mGTUJj"})})},e):(0,s.jsx)(eP.k,{value:e.toString(),children:(0,s.jsx)(m.E,{fontSize:"lg",children:null!=(t=(0,eQ.w)()[e])?t:h})},e)})})})]}),y&&(0,s.jsx)(m.E,{fontSize:"xs",mt:1.5,children:(0,s.jsxs)(eE.N,{href:w,textDecoration:"underline",isExternal:!0,children:[(0,s.jsx)(b.x6,{id:"RUO69p"}),(0,s.jsx)(eq.p,{ms:1})]})})]})};var eY=t(57405),e0=t(16936),e1=t(87996),e6=t(59230),e5=t(22216),e2=t(43634),e4=t(80180),e3=t(60908);let e8="250px",e9=e=>{let{imgSrc:i,fileName:t,showBackground:n,isDark:l,imageHeight:r=e8}=e;return(0,s.jsxs)(E.a,{border:"1px solid",borderColor:"gray.300",borderRadius:"md",background:n?l?"gray.900":"gray.50":"transparent",p:1,overflow:"hidden",children:[(0,s.jsx)(E.a,{aspectRatio:"1 / 1",height:r,margin:"auto",children:(0,s.jsx)(T._,{src:i,height:r,margin:"auto",alt:t||"",objectFit:"contain",onMouseDown:e4.Fw})}),t&&(0,s.jsx)(E.a,{p:2,children:(0,s.jsx)(m.E,{fontSize:"xs",noOfLines:1,title:t,children:t})})]})},e7=e=>{let{value:i,updateValue:t,onLogoUploadStart:n,onLogoUploadFail:l}=e,[r,o]=(0,d.useState)(null),[c,u]=(0,d.useState)(null),h="placeholder"==c,p=(0,x.GV)(e2.aQ),{currentWorkspace:m}=(0,z.ur)(),g=p||(null==m?void 0:m.id);return g?i||c?(0,s.jsx)(eY.T,{align:"flex-start",spacing:4,children:(0,s.jsxs)(E.a,{position:"relative",w:"100%",role:"group",children:[h?(0,s.jsx)(e5.Pf,{height:e8,colorMode:"light"}):(0,s.jsx)(e9,{imgSrc:i||c||void 0,fileName:void 0,showBackground:!h,isDark:!1,imageHeight:e8}),r==e6.A.Uploading&&(0,s.jsx)(e5.Td,{}),r==e6.A.Error&&(0,s.jsx)(e5.Hy,{}),r!==e6.A.Uploading&&(0,s.jsx)(a.Tz,{label:(0,s.jsx)(b.x6,{id:"cILfnJ"}),placement:"top",children:(0,s.jsx)(e0.K,{opacity:0,_groupHover:{opacity:1},color:"red.600",size:"sm",icon:(0,s.jsx)(P.g,{icon:D.yLS}),"aria-label":eF.Ru._({id:"FtfRJJ"}),onClick:()=>{t(null),o(null)},position:"absolute",top:2,insetEnd:2})})]})}):(0,s.jsx)(e1.Zc,{orgId:g,uploadType:"image",editType:"icon",dropHereText:eF.Ru._({id:"cmRkd1",values:{0:"%{browse}"}}),customHeight:e8,customFontSize:"sm",onUploadStart:e=>{let{file:i,tempUrl:t}=e;o(e6.A.Uploading),n&&n(),i.type&&(0,e3.aI)(i.type)?u("placeholder"):u(t)},onUploadSuccess:e=>{o(e6.A.Done),t(e),u(null)},onUploadFailed:e=>{o(e6.A.Error),l&&l()}}):null};var ie=t(26779),ii=t(62452),it=t(16595),is=t(56143);let il=()=>{let e=(0,en.st)(),i=(0,x.GV)(_.f9),t=(0,d.useCallback)(t=>{null==e||e.track(en.VV.THEME_RATED,{rating:t,method:"import",interactionId:i})},[e,i]),n=(0,d.useCallback)((t,s,n)=>{null==e||e.track(en.VV.THEME_FEEDBACK,{feedback:s,tags:n,rating:t,method:"import",interactionId:i})},[e,i]);return(0,s.jsx)(is.No,{feedbackTags:ir,trackRating:t,trackFeedback:n})},ir=[{key:"wrong-colors",label:(0,s.jsx)(b.x6,{id:"VqNHwM"})},{key:"wrong-fonts",label:(0,s.jsx)(b.x6,{id:"zwod6v"})},{key:"missing-logo",label:(0,s.jsx)(b.x6,{id:"HRiDli"})},{key:"not-enough-options",label:(0,s.jsx)(b.x6,{id:"XsRFrT"})},{key:"other",label:(0,s.jsx)(b.x6,{id:"/IX/7x"})}],io=e=>{let{children:i}=e;return(0,s.jsx)(m.E,{fontSize:"md",fontWeight:"semibold",color:"gray.600",children:i})},ia="200px",id=e=>{var i;let{color:t,isSelected:n,onClick:l}=e;return(0,s.jsx)(a.Tz,{label:(0,s.jsxs)(R.B,{spacing:"0",children:[(0,s.jsx)(m.E,{textAlign:"center",fontSize:"xs",color:"gray.200",children:(0,s.jsx)(b.x6,{id:"nyQWMb"})}),(0,s.jsx)(m.E,{textAlign:"center",children:null==(i=t.color)?void 0:i.toUpperCase()})]}),placement:"top",children:(0,s.jsx)(eS.j,{transitionProperty:"background",transitionDuration:"normal",size:"9",cursor:"pointer",_hover:{bg:n?"trueblue.200":"gray.50"},bg:n?"trueblue.200":"white",onClick:l,children:(0,s.jsx)(eS.j,{size:"7",bg:t.color,border:"1px solid",borderColor:n?"transparent":"gray.300"})})})},ic=e=>{let{logo:i,onClick:t,isSelected:n}=e;return(0,s.jsx)(E.a,{py:1,px:1,as:"button",borderRadius:"md",boxShadow:"sm",bg:"gray.50",onClick:t,cursor:n?"default":"pointer",border:"3px solid",borderColor:n?"trueblue.200":"transparent","aria-pressed":n,"aria-label":"Select logo ".concat(i.url),tabIndex:0,_hover:{border:"3px solid",borderColor:"trueblue.200"},children:(0,s.jsx)(T._,{src:i.url,maxHeight:"40px",draggable:!1,width:"auto",marginRight:"2"})},i.url)},iu=()=>{let{globalFonts:e,workspaceFonts:i,fontsMap:t}=(0,y.II)(),n=(0,x.GV)(_.ly),l=(0,x.jL)(),r=(0,d.useCallback)(e=>{l((0,_.qv)({name:e.target.value}))},[l]),o=(0,d.useCallback)(e=>{l((0,_.hi)({color:e}))},[l]),a=(0,d.useCallback)(e=>{l((0,_.fB)({color:e}))},[l]),c=(0,ii.VH)(n),u=(0,x.GV)(_.O5),h=(0,x.GV)(_.Ob),p=(0,ii.fQ)(n),g=(0,x.GV)(_.Yd),j=(0,x.GV)(_.wd),f=(0,ii.Lz)(n),v=(0,x.GV)(_.sY),w=(0,ii.Tn)(n),C=(0,ii.H7)(n),k=(0,x.GV)(_.OH),{suggestedBodyFont:T,suggestedHeadingFont:D}=(0,x.GV)(_.gi),P=t[n.bodyFont||K.z8.bodyFont]||t[K.z8.bodyFont],z=t[n.headingFont||K.z8.headingFont]||t[K.z8.headingFont],F=(0,x.GV)(_.Hs),N=(0,d.useCallback)(e=>{l((0,_.ds)({color:e}))},[l]),L=(0,d.useCallback)(()=>{let e=(0,S.Zi)();window.open(e,"_blank")},[]),G=(0,d.useCallback)(e=>{l((0,_.Fl)({font:e,fontsMap:t}))},[l,t]),B=(0,d.useCallback)(e=>{l((0,_.zs)({weight:e}))},[l]),U=(0,d.useCallback)(e=>{l((0,_.lc)({font:e,fontsMap:t}))},[l,t]),W=(0,d.useCallback)(e=>{l((0,_.lm)({weight:e}))},[l]),V=(0,d.useCallback)(e=>{l((0,_.jY)({color:e}))},[l]),H=(0,d.useCallback)(e=>{l((0,_.do)({color:e}))},[l]),$=(0,d.useCallback)(e=>{l((0,_.uQ)({logo:e}))},[l]),X=(0,d.useMemo)(()=>({globalFonts:e,workspaceFonts:i}),[e,i]);return(0,s.jsxs)(M.m,{children:[(0,s.jsx)(R.B,{p:6,spacing:"5",pt:"0",w:"100%",children:(0,s.jsx)(e_.F,{colorScheme:"gray",children:(0,s.jsx)(m.E,{children:(0,s.jsx)(b.x6,{id:"ISK5qv",components:{0:(0,s.jsx)("span",{role:"img","aria-label":"thumbs up"})}})})})}),(0,s.jsxs)(R.B,{spacing:8,children:[(0,s.jsxs)(eI.MJ,{children:[(0,s.jsx)(eA.l,{children:(0,s.jsx)(io,{children:(0,s.jsx)(b.x6,{id:"HZ7fEu"})})}),(0,s.jsx)(eR.p,{type:"text",value:n.name,onChange:r})]}),(0,s.jsxs)(R.B,{spacing:2,children:[(0,s.jsx)(io,{children:(0,s.jsx)(b.x6,{id:"1HfW/F"})}),(0,s.jsxs)(eI.MJ,{children:[(0,s.jsx)(eA.l,{children:(0,s.jsx)(b.x6,{id:"Udsgl4"})}),(0,s.jsxs)(I.s,{direction:"row",justify:"space-between",w:"100%",children:[(0,s.jsx)(E.a,{w:ia,children:(0,s.jsx)(ie.Wv,{theme:n,color:c,updateColor:N,palette:"none"})}),(0,s.jsx)(R.B,{direction:"row",spacing:0,ml:2,children:u.map((e,i)=>(0,s.jsx)(id,{color:e,isSelected:(0,ii.Gw)(c,e),onClick:()=>{N(e)}},e.color+i))})]})]}),(0,s.jsxs)(eI.MJ,{children:[(0,s.jsx)(eA.l,{children:(0,s.jsx)(b.x6,{id:"ihFuMH"})}),(0,s.jsxs)(I.s,{direction:"row",justify:"space-between",w:"100%",children:[(0,s.jsx)(E.a,{width:ia,children:(0,s.jsx)(ie.a9,{color:w,theme:n,updateColor:o,palette:"none"})}),(0,s.jsx)(R.B,{direction:"row",spacing:0,ml:2,children:h.map((e,i)=>(0,s.jsx)(id,{color:e,isSelected:(0,ii.Gw)(w,e),onClick:()=>{o(e)}},e.color+i))})]})]}),(0,s.jsxs)(eI.MJ,{children:[(0,s.jsx)(eA.l,{children:(0,s.jsx)(b.x6,{id:"ErggF8"})}),(0,s.jsxs)(I.s,{direction:"row",justify:"space-between",w:"100%",children:[(0,s.jsx)(E.a,{width:ia,children:(0,s.jsx)(ie.a9,{color:C,theme:n,updateColor:a,palette:"none"})}),(0,s.jsx)(R.B,{direction:"row",spacing:0,ml:2,children:k.map((e,i)=>(0,s.jsx)(id,{color:e,isSelected:(0,ii.Gw)(C,e),onClick:()=>{a(e)}},e.color+i))})]})]})]}),(0,s.jsxs)(R.B,{spacing:2,children:[(0,s.jsx)(io,{children:(0,s.jsx)(b.x6,{id:"7OvVwW"})}),D&&D.suggested===n.headingFont&&D.suggested!==D.original&&(0,s.jsxs)(m.E,{fontSize:"xs",color:"gray.600",children:[(0,s.jsx)("span",{role:"img","aria-label":"warning",children:"⚠️"})," ","We substituted ",D.suggested," for"," ",D.original,". You can"," ",(0,s.jsx)(eE.N,{href:(0,S.Zi)(),isExternal:!0,children:"upload"})," ",D.original," later."]}),(0,s.jsx)(eJ,{fonts:X,value:n.headingFont,updateValue:G,onFontUploadClick:L,weight:"bold",defaultFont:K.z8.headingFont,"data-testid":"theme-importer-heading-font-picker",my:0}),(0,s.jsx)(eZ,{font:z,value:n.headingFontWeight,defaultWeight:700,updateValue:B,my:0}),(0,s.jsxs)(O.z,{children:[(0,s.jsx)(E.a,{width:ia,children:(0,s.jsx)(ie.Wv,{color:f,theme:n,updateColor:H,palette:"accent"})}),(0,s.jsx)(A.h,{}),(0,s.jsx)(R.B,{direction:"row",spacing:0,ml:2,children:v.map((e,i)=>(0,s.jsx)(id,{color:e,isSelected:(0,ii.Gw)(f,e),onClick:()=>{H(e)}},e.color+i))})]})]}),(0,s.jsxs)(R.B,{spacing:2,children:[(0,s.jsx)(io,{children:(0,s.jsx)(b.x6,{id:"B4QCf7"})}),T&&T.suggested===n.bodyFont&&T.suggested!==T.original&&(0,s.jsxs)(m.E,{fontSize:"xs",color:"gray.600",children:[(0,s.jsx)("span",{role:"img","aria-label":"warning",children:"⚠️"})," ","We substituted ",T.suggested," for"," ",T.original,". You can"," ",(0,s.jsx)(eE.N,{href:(0,S.Zi)(),isExternal:!0,children:"upload"})," ",T.original," later."]}),(0,s.jsx)(eJ,{fonts:X,value:n.bodyFont,updateValue:U,onFontUploadClick:L,weight:"bold",defaultFont:K.z8.bodyFont,"data-testid":"theme-importer-body-font-picker",my:0}),(0,s.jsx)(eZ,{font:P,value:n.bodyFontWeight,defaultWeight:400,updateValue:W,my:0}),(0,s.jsxs)(O.z,{children:[(0,s.jsx)(E.a,{width:ia,children:(0,s.jsx)(ie.a9,{color:p,theme:n,updateColor:V,palette:"accent"})}),(0,s.jsx)(A.h,{}),(0,s.jsx)(R.B,{direction:"row",spacing:0,ml:2,children:g.map((e,i)=>(0,s.jsx)(id,{color:e,isSelected:(0,ii.Gw)(p,e),onClick:()=>{V(e)}},e.color+i))})]})]}),(0,s.jsxs)(R.B,{spacing:2,children:[(0,s.jsx)(io,{children:(0,s.jsx)(b.x6,{id:"iG7KNr"})}),j.length>0&&(0,s.jsx)(O.z,{alignItems:"start",spacing:2,justifyContent:"start",role:"group","aria-label":"Logo selection",children:j.map(e=>(0,s.jsx)(ic,{logo:e,onClick:()=>$(e),isSelected:F===e.url},e.url))}),(0,s.jsx)(E.a,{maxW:"min(100%, 300px)",children:(0,s.jsx)(e7,{value:F,onLogoUploadStart:()=>{l((0,_.QZ)())},updateValue:e=>{if(!e)return void l((0,_.Zw)());l((0,_.$k)({logoImage:(0,it.yK)({result:e,isError:!1})}))},onLogoUploadFail:()=>{l((0,_.UY)())}})})]}),(0,s.jsx)(il,{})]})]})};var ix=t(65092),ih=t(91613),ip=t(78801),im=t(62070),ig=t(61461),ij=t(13271),ib=t(77940),iv=t(90211);let iy=()=>[{title:(0,s.jsx)(b.x6,{id:"bGa3Fk"}),duration:1e3},{title:(0,s.jsx)(b.x6,{id:"a+mYi4"}),duration:1e3},{title:(0,s.jsx)(b.x6,{id:"Zc41Kf"}),duration:1e3},{title:(0,s.jsx)(b.x6,{id:"DaFziV"}),duration:null}],iw=()=>{let e=(0,x.GV)(_.Cq),i=iy(),[t,n]=(0,d.useState)(0);(0,d.useEffect)(()=>{"parsing"===e&&t<i.length-1&&setTimeout(()=>{n(t+1)},5e3)},[t,i.length,e]);let l=(0,x.jL)(),r=(0,et.d)(),o=(0,d.useCallback)(()=>{l((0,_.QJ)()),r({title:(0,s.jsx)(b.x6,{id:"GfnBRU"}),status:"info",isClosable:!0,position:"top"})},[l,r]);return(0,s.jsxs)(R.B,{p:6,spacing:"8",pt:"0",children:[(0,s.jsx)(e_.F,{colorScheme:"gray",children:(0,s.jsx)(m.E,{children:(0,s.jsx)(b.x6,{id:"olO1VR"})})}),(0,s.jsx)(ix.C,{index:t,orientation:"vertical",height:"400px",gap:"0",children:i.map((e,i)=>(0,s.jsxs)(ih.p,{children:[(0,s.jsxs)(O.z,{alignItems:"top",children:[(0,s.jsx)(ip.S,{children:(0,s.jsx)(im.x,{complete:(0,s.jsx)(ig.W,{}),incomplete:(0,s.jsx)(ij.Q,{}),active:(0,s.jsx)(ij.Q,{})})}),(0,s.jsx)(ib.J,{style:{paddingTop:4},children:(0,s.jsxs)(O.z,{children:[(0,s.jsx)(m.E,{maxW:"100%",children:e.title})," ",t===i&&(0,s.jsx)($.y,{size:"sm",color:"trueblue.400"})]})})]}),(0,s.jsx)(iv.m,{})]},i))}),(0,s.jsx)(f.$,{onClick:o,variant:"hazardous",children:(0,s.jsx)(b.x6,{id:"dEgA5A"})})]})},iC=(0,d.memo)(e=>{let{onTabChange:i,currentTab:t}=e;return(0,s.jsxs)(j.e,{p:2,position:"absolute",top:"3",insetInlineStart:"50%",transform:"translateX(-50%)",zIndex:"sticky",bg:"white",size:"sm",variant:"ghost",borderRadius:"md",boxShadow:"md",children:[(0,s.jsx)(f.$,{borderRadius:"md",bg:"thumbnails"===t?"trueblue.50":"transparent",color:"thumbnails"===t?"trueblue.500":"gray.600",onClick:()=>{i("thumbnails")},children:(0,s.jsx)(b.x6,{id:"l3s5ri"})}),(0,s.jsx)(f.$,{borderRadius:"md",bg:"editor"===t?"trueblue.50":"transparent",color:"editor"===t?"trueblue.500":"gray.600",onClick:()=>{i("editor")},children:(0,s.jsx)(b.x6,{id:"FEr96N"})})]})});iC.displayName="PreviewTabSwitcher";let ik=()=>{let{currentWorkspace:e}=(0,z.ur)(),i=null==e?void 0:e.id,t=(0,x.jL)(),{createTheme:n,isThemeSaving:l}=el({flow:"import"});er("import");let r=(0,x.GV)(_.ly),o=(0,x.GV)(_.jp),c=(0,x.GV)(_.D6),u=(0,x.GV)(_.hB),h=(0,x.GV)((0,_.JH)(i)),[p,m]=(0,d.useState)("thumbnails");(0,d.useEffect)(()=>{"reviewStep"===u&&m("editor")},[u]),(0,d.useEffect)(()=>()=>{t((0,_.QJ)())},[t]);let g=!h.name,v=(0,d.useCallback)(async()=>{n(h)},[n,h]),y=(0,d.useCallback)(async()=>{let e=await n(h);e&&(0,eo.vd)({theme:e})},[n,h]),C=(0,d.useCallback)(()=>{m("thumbnails"),t((0,_.QJ)())},[t]);return(0,s.jsxs)(ei,{children:[(0,s.jsx)(N,{children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(B,{children:["initialStep"===u&&(0,s.jsx)(G,{leftIcon:D.CeG,onClick:()=>{w.R.emit("setThemeConfigurationView",{view:"splash"})},children:(0,s.jsx)(b.x6,{id:"ydzS9x"})}),(0,s.jsx)(L,{children:(0,s.jsx)(b.x6,{id:"l3s5ri"})})]}),(0,s.jsxs)(W,{children:["initialStep"===u&&(0,s.jsx)(ek,{}),"uploadStep"===u&&(0,s.jsx)(iw,{}),"reviewStep"===u&&(0,s.jsx)(iu,{})]}),"reviewStep"===u&&(0,s.jsx)(U,{children:(0,s.jsxs)(I.s,{w:"100%",children:[(0,s.jsx)(f.$,{variant:"plain",onClick:C,leftIcon:(0,s.jsx)(P.g,{icon:D.U23}),children:(0,s.jsx)(b.x6,{id:"i88wdJ"})}),(0,s.jsx)(A.h,{}),(0,s.jsxs)(j.e,{children:[(0,s.jsx)(a.Tz,{label:(0,s.jsx)(b.x6,{id:"INxusr"}),isDisabled:!g,shouldWrapChildren:!0,children:(0,s.jsx)(f.$,{isLoading:l,variant:"plain",onClick:y,isDisabled:g||c,children:(0,s.jsx)(b.x6,{id:"ZSZK3s"})})}),(0,s.jsx)(a.Tz,{label:(0,s.jsx)(b.x6,{id:"INxusr"}),isDisabled:!g,shouldWrapChildren:!0,children:(0,s.jsx)(f.$,{isLoading:l,variant:"solid",onClick:v,rightIcon:(0,s.jsx)(P.g,{icon:D.e68}),isDisabled:g||c,children:(0,s.jsx)(b.x6,{id:"ul+W4g"})})})]})]})})]})}),(0,s.jsxs)(V,{children:["reviewStep"===u&&(0,s.jsx)(iC,{onTabChange:m,currentTab:p}),"initialStep"===u?(0,s.jsx)(I.s,{h:"100%",w:"100%"}):"thumbnails"===p&&o.length>0?(0,s.jsx)(R.B,{w:"100%",overflow:"auto",h:"100%",align:"center",children:o.map(e=>(0,s.jsx)(E.a,{children:(0,s.jsx)(T._,{src:e.url})},e.index))}):"editor"===p?(0,s.jsx)(Y,{theme:r}):null]})]})};var iS=t(23293);let i_=(0,d.memo)(e=>{let{onTabChange:i,currentTab:t}=e;return(0,s.jsxs)(j.e,{p:2,position:"absolute",top:"3",left:"50%",transform:"translateX(-50%)",zIndex:"sticky",bg:"white",size:"sm",variant:"ghost",borderRadius:"md",shadow:"md",children:[(0,s.jsx)(f.$,{borderRadius:"md",bg:"testerDoc"===t?"trueblue.50":"transparent",color:"testerDoc"===t?"trueblue.500":"gray.600",onClick:()=>{i("testerDoc")},"data-testid":"preview-tab-tester-doc",children:(0,s.jsx)(b.x6,{id:"ypSaiK"})}),(0,s.jsx)(f.$,{borderRadius:"md",bg:"currentDoc"===t?"trueblue.50":"transparent",color:"currentDoc"===t?"trueblue.500":"gray.600",onClick:()=>{i("currentDoc")},"data-testid":"preview-tab-current-doc",children:(0,s.jsx)(b.x6,{id:"VJUm9p"})})]})});i_.displayName="PreviewTabSwitcher";let iI=()=>{let e=(0,x.GV)(C.eo),i=(0,x.GV)(C.Sb),t=(0,d.useRef)(void 0),[n,l]=(0,d.useState)("testerDoc"),r=(0,d.useCallback)(e=>{var s,n;l(e),"currentDoc"===e?i&&(null==(s=t.current)||s.commands.setContent(i,!0)):null==(n=t.current)||n.commands.setContent((0,J.t)(),!0)},[i]),o=(0,d.useCallback)(e=>{t.current=e},[]);return e?(0,s.jsxs)(s.Fragment,{children:[i&&(0,s.jsx)(i_,{onTabChange:r,currentTab:n}),(0,s.jsx)(Y,{theme:e,setEditor:o})]}):(0,s.jsx)(s.Fragment,{})},iA={colors:{name:(0,s.jsx)(b.x6,{id:"1HfW/F"}),description:(0,s.jsx)(b.x6,{id:"lsknHp"}),icon:D.fyG},fonts:{name:(0,s.jsx)(b.x6,{id:"I0oBSl"}),description:(0,s.jsx)(b.x6,{id:"0kBA53"}),icon:D.tiU},design:{name:(0,s.jsx)(b.x6,{id:"f8fH8W"}),description:(0,s.jsx)(b.x6,{id:"7dxcBr"}),icon:D.ffg},logo:{name:(0,s.jsx)(b.x6,{id:"iG7KNr"}),description:(0,s.jsx)(b.x6,{id:"pSG+r5"}),icon:D.Cyq},themeName:{name:(0,s.jsx)(b.x6,{id:"HZ7fEu"}),description:(0,s.jsx)(b.x6,{id:"JMXrv3"}),icon:D.SGM}},iR={base:"repeat(1, 1fr)",md:"repeat(2, 1fr)",lg:"repeat(2, 1fr)",xl:"repeat(3, 1fr)"};var iE=t(40162),iT=t(4192),iD=t(56570),iP=t(43724),iz=t.n(iP),iO=t(30361),iM=t.n(iO),iF=t(88839),iN=t(52762),iL=t(30892),iG=t(26194),iB=t.n(iG),iU=t(831),iW=t.n(iU),iV=t(33612),iH=t.n(iV);let i$=e=>{let{theme:i,onSelect:t,onShuffle:n,isSelected:l=!1}=e,r=(0,ii.Ik)((0,ii.H7)(i)),o=(0,ii.Tn)(i).color,a=(0,ii.Sf)((0,ii.Lz)(i)),c=(0,ii.fQ)(i).color,u=(0,ii.Sf)((0,ii.jO)(i)),x=(0,ii.ND)(i,!1,!0),h=(0,d.useMemo)(()=>iB()(iW()(x,ii.$j),e=>-iH()((0,ii.Ik)(e)).getLuminance()),[x]);return(0,s.jsxs)(I.s,{position:"relative",align:"center",justify:"center",role:"group",children:[(0,s.jsx)(f.$,{variant:"ghost",h:"auto",p:2,flex:1,w:"100%",textAlign:"left",whiteSpace:"wrap",fontWeight:"500",onClick:t,borderWidth:"2px",borderColor:l?"trueblue.300":"transparent",bg:l?"trueblue.50":void 0,children:(0,s.jsx)(I.s,{bg:r,borderRadius:"md",boxShadow:"md",overflow:"hidden",flex:1,direction:"column",borderWidth:"1px",position:"relative",children:(0,s.jsxs)(I.s,{p:4,flex:1,children:[(0,s.jsx)(I.s,{p:4,bg:o,borderRadius:"md",boxShadow:"sm",flex:1,children:(0,s.jsxs)(R.B,{flex:1,spacing:1,children:[(0,s.jsx)(O.z,{opacity:.8,children:(0,s.jsx)(I.s,{w:"70%",h:1.5,css:a,borderRadius:"sm"})}),(0,s.jsx)(I.s,{h:1,opacity:.6,bg:c,borderRadius:"sm"}),(0,s.jsx)(I.s,{h:1,opacity:.6,bg:c,borderRadius:"sm"}),(0,s.jsx)(I.s,{h:2.5,opacity:.9,borderRadius:"full",w:"40px",align:"center",justify:"center",css:u,mt:1})]})}),(0,s.jsx)(O.z,{spacing:0,flex:1,w:"100%",position:"absolute",bottom:"-2",left:"0",opacity:0,transitionProperty:"opacity, bottom",transitionDuration:"normal",_groupHover:{opacity:1,bottom:0},children:h.map((e,i)=>(0,s.jsx)(I.s,{css:(0,ii.Sf)(e),flex:1,h:2},i))})]})})}),l&&(0,s.jsx)(f.$,{size:"xs",variant:"solid",position:"absolute",bottom:"5",right:"5",leftIcon:(0,s.jsx)(P.g,{icon:D.tW}),opacity:0,_groupHover:{opacity:1},onClick:n,children:(0,s.jsx)(b.x6,{id:"gH5Gbn"})})]})},iX=()=>({all:{label:(0,s.jsx)(b.x6,{id:"Zvbsrl"})},light:{label:(0,s.jsx)(b.x6,{id:"4kr8nm"})},dark:{label:(0,s.jsx)(b.x6,{id:"P9X6Mu"})},red:{label:(0,s.jsx)(b.x6,{id:"Ppz2lw"}),colors:["red.400","#DC143C","#B22222","#8B0000"]},orange:{label:(0,s.jsx)(b.x6,{id:"Td1Axu"}),colors:["orange.400","#FF8C00","#FF7F50","#FF6347"]},yellow:{label:(0,s.jsx)(b.x6,{id:"UHB0wN"}),colors:["yellow.400","#FFD700","#FFA500","#FF8C00"]},green:{label:(0,s.jsx)(b.x6,{id:"fyzS0F"}),colors:["green.400","#32CD32","#00FF00","#ADFF2F"]},blue:{label:(0,s.jsx)(b.x6,{id:"m1hucM"}),colors:["blue.400","#1E90FF","#00BFFF","#ADD8E6"]},purple:{label:(0,s.jsx)(b.x6,{id:"AI9Iqf"}),colors:["purple.400","#8A2BE2","#9370DB","#BA55D3"]},pink:{label:(0,s.jsx)(b.x6,{id:"aj7xux"}),colors:["pink.400","#FFB6C1","#FF69B4","#FF1493"]},neutral:{label:(0,s.jsx)(b.x6,{id:"z9uvvN"}),colors:["#D2BEA1","#808080","#C0C0C0","#D3D3D3"]},gray:{label:(0,s.jsx)(b.x6,{id:"HA64AU"}),colors:["gray.400","#A9A9A9","#C0C0C0","#D3D3D3"]},professional:{label:(0,s.jsx)(b.x6,{id:"wXRbPe"})},colorful:{label:(0,s.jsx)(b.x6,{id:"Drp0HH"})},futuristic:{label:(0,s.jsx)(b.x6,{id:"Uk8MFz"})},modern:{label:(0,s.jsx)(b.x6,{id:"kJB3k/"})}}),iK=()=>{var e;let i=(0,x.GV)(C.eo),t=(0,x.jL)(),[n,l]=(0,d.useState)("all"),{data:r}=(0,es.Snx)({variables:{workspaceId:null,archived:!1},fetchPolicy:"cache-first",nextFetchPolicy:"cache-only"}),o=null==r?void 0:r.themes,[a,c]=(0,d.useState)(i&&(null==(e=iz()(o,e=>iJ(i,e)))?void 0:e.id)||null),u=(0,d.useMemo)(()=>Object.entries(iX()),[]),h=(0,d.useMemo)(()=>(null==o?void 0:o.filter(e=>{if(e.config.disableReadabilityAdjustment)return!1;if("all"===n)return!0;let{keywords:i}=e.config;return!!i&&(i.color.includes(n)||i.tone.includes(n))}))||[],[n,o]),p=(0,d.useCallback)(e=>{c(e.id);let i=(0,ii.j8)((0,ii.H7)(e))||{type:iN.h.NONE},s=(0,iF.M)(e),n={primaryColor:(0,ii.VH)(e),secondaryColors:(0,ii.gx)(e),cardColor:(0,ii.Tn)(e),headingColor:(0,ii.Lz)(e),bodyColor:(0,ii.fQ)(e),accentBackgrounds:e.config.accentBackgrounds,stylePrompt:e.config.stylePrompt,background:i,shapeColorScheme:"custom"===s.shapeColorScheme?"accent":s.shapeColorScheme};t((0,C._R)({config:n}))},[t]),g=(0,d.useCallback)(e=>{t((0,C._R)({config:iq(e)}))},[t]);if(!i)throw Error("Theme is undefined");return(0,s.jsxs)(R.B,{spacing:6,children:[(0,s.jsx)(iE.B,{children:u.map(e=>{let[i,{label:t,colors:r}]=e;return(0,s.jsx)(iT.vw,{onClick:()=>{l(i)},colorScheme:n===i?"trueblue":"gray",cursor:"pointer",children:(0,s.jsxs)(O.z,{spacing:2,children:[r?(0,s.jsx)(I.s,{boxSize:3,bg:r[0],borderRadius:"sm"}):null,(0,s.jsx)(m.E,{children:t})]})},i)})}),(0,s.jsx)(R.B,{children:(0,s.jsx)(iD.x,{templateColumns:iR,gap:3,children:h.map(e=>(0,s.jsx)(i$,{theme:e,onSelect:()=>{p(e)},onShuffle:()=>g(e),isSelected:a===e.id},e.id))})})]})},iJ=(e,i)=>JSON.stringify((0,ii.ND)(e))===JSON.stringify((0,ii.ND)(i)),iq=e=>{let i=(0,ii.ND)(e),t=(0,ii.Tn)(e),s=i.map(ii.Ik).filter(e=>{let i=(0,iL.VU)(e);return i>.8||i<.2}).map(ii.Ik),n=iM()(s)||(0,ii.Ik)(t),l=(0,iL.$p)(n),r=(0,iL.VU)(n),o={type:"solid",color:n},a=i.filter(e=>(0,ii.$j)(e)!==(0,ii.$j)(o)),d=iM()(a),c=[d,{type:"solid",color:l?ii.kF:ii.Hs}],u=iM()(c),x={type:"solid",color:l?ii.Cs:ii.nI},h=[(0,ii.Ik)(d),(0,iL.Zt)(n,r>.1?-12:12)],p=iM()(h);return{headingColor:u,bodyColor:x,cardColor:o,primaryColor:d,background:(0,ii.j8)({type:"solid",color:p}),shapeColorScheme:iM()(["default","accent"])}};var iQ=t(49146),iZ=t(23908),iY=t(36693),i0=t(20061),i1=t(3448);let i6=e=>{let{defaultTab:i,customTab:t}=e;return(0,s.jsxs)(iQ.t,{isFitted:!0,isLazy:!0,variant:"soft-rounded",size:"sm",children:[(0,s.jsxs)(iZ.w,{children:[(0,s.jsx)(iY.o,{children:(0,s.jsxs)(O.z,{children:[(0,s.jsx)(P.g,{icon:D.qcK}),(0,s.jsx)(m.E,{children:(0,s.jsx)(b.x6,{id:"M0Q+0g"})})]})}),(0,s.jsx)(iY.o,{children:(0,s.jsxs)(O.z,{children:[(0,s.jsx)(P.g,{icon:D.MT7}),(0,s.jsx)(m.E,{children:(0,s.jsx)(b.x6,{id:"srRMnJ"})})]})})]}),(0,s.jsxs)(i0.T,{children:[(0,s.jsx)(i1.K,{px:0,children:i}),(0,s.jsx)(i1.K,{px:0,children:t})]})]})};var i5=t(61491),i2=t(51504),i4=t(1057),i3=t(66079),i8=t(62961),i9=t(59858);let i7=e=>(0,i9.S0)(e)&&(0,i9.R4)(e),te=e=>{let{setBackground:i,background:t,defaultMessage:n,isDark:l,isValidSource:r,contextualTheme:o}=e,[a,c]=(0,d.useState)("default"),u=i3.Fn[a],x=(0,d.useCallback)(e=>r?r(e)&&i7(e):i7(e),[r]),h=(0,d.useCallback)(e=>{i({...t,...e})},[t,i]);return(0,s.jsx)(i8.v,{isDark:l,isValidSource:x,defaultMessage:n,currentBackground:t,currentSource:u,updateCurrentBackground:h,setCurrentSourceKey:c,currentSourceKey:a,editType:"themeBackground",contextualTheme:o})},ti=()=>{let e=(0,x.GV)(C.eo),i=(0,x.jL)();if(!e)throw Error("Theme is undefined");let t=(0,ii.fQ)(e);return(0,s.jsx)(ie.a9,{dataTestId:"custom-theme-body-color-picker",theme:e,color:t||void 0,defaultColor:t,updateColor:e=>{i((0,C.jY)({color:e}))},palette:"accent"})},tt=()=>{let e=(0,x.GV)(C.eo),i=(0,x.jL)();if(!e)throw Error("Theme is undefined");let t=(0,ii.Lz)(e);return(0,s.jsx)(ie.tN,{dataTestId:"custom-theme-heading-color-picker",theme:e,color:t||void 0,defaultColor:t,updateColor:e=>{i((0,C.do)({color:e}))},palette:"accent"})},ts=(0,d.memo)(()=>{var e;let i=(0,x.jL)(),t=(0,x.GV)(C.eo),n="builder"===(0,x.GV)(C.yV),l=(0,d.useCallback)(e=>{var t,s;(null==e?void 0:e.type)===iN.h.IMAGE&&(null==(t=e.image)?void 0:t.uploadStatus)===e6.A.Uploading?i((0,C.VT)({background:e})):(null==e?void 0:e.type)===iN.h.IMAGE&&(null==(s=e.image)?void 0:s.uploadStatus)===e6.A.Error?i((0,C.Px)()):i((0,C.Co)({background:e}))},[i]),r={size:"sm"};if(!t)throw Error("Theme is undefined");let[o,...c]=(0,ii.CD)(t),u=(0,ii.Tn)(t),h=(0,i4.Ee)(t),p=(0,ii.Mw)(t);return(0,s.jsxs)(R.B,{spacing:8,children:[(0,s.jsxs)(R.B,{spacing:"3",children:[(0,s.jsxs)(iS.D,{...r,children:[(0,s.jsx)(b.x6,{id:"DNUgpN"})," ",(0,s.jsx)(a.qT,{label:(0,s.jsx)(b.x6,{id:"+GFtYe"})})]}),(0,s.jsxs)(eI.MJ,{children:[(0,s.jsx)(eA.l,{children:(0,s.jsx)(b.x6,{id:"Udsgl4"})}),(0,s.jsx)(ie.Wv,{dataTestId:"custom-theme-primary-color-picker",theme:t,color:o,updateColor:e=>{n?i((0,C.uL)({color:e})):i((0,C.ds)({color:e}))},palette:"none"})]}),(0,s.jsxs)(eI.MJ,{children:[(0,s.jsx)(eA.l,{children:(0,s.jsx)(b.x6,{id:"k7VWXk"})}),(0,s.jsx)(ie.oB,{theme:t,colors:c,updateColors:e=>{i((0,C.Kf)({colors:e}))},minColors:0,maxColors:8,palette:"none"})]})]}),(0,s.jsxs)(R.B,{spacing:"3",children:[(0,s.jsx)(iS.D,{...r,children:(0,s.jsx)(b.x6,{id:"xeiujy"})}),(0,s.jsxs)(eI.MJ,{children:[(0,s.jsx)(eA.l,{children:(0,s.jsx)(b.x6,{id:"v9mrgh"})}),(0,s.jsx)(tt,{})]}),(0,s.jsxs)(eI.MJ,{children:[(0,s.jsx)(eA.l,{children:(0,s.jsx)(b.x6,{id:"jx8uni"})}),(0,s.jsx)(ti,{})]})]}),(0,s.jsxs)(R.B,{spacing:3,children:[(0,s.jsx)(iS.D,{...r,children:"Accessibility"}),(0,s.jsx)(eI.MJ,{children:(0,s.jsx)(e_.F,{colorScheme:"gray",children:(0,s.jsx)(i5.S,{isChecked:!(null==(e=t.config)?void 0:e.disableReadabilityAdjustment),onChange:()=>i((0,C._w)()),children:(0,s.jsxs)(m.E,{fontSize:"sm",children:[(0,s.jsx)(b.x6,{id:"KmUJ3J"})," ",(0,s.jsx)(a.qT,{label:(0,s.jsx)(b.x6,{id:"J9NJr0",values:{GAMMA_PROPER_NOUN:ea.On}})})]})})})})]}),(0,s.jsxs)(R.B,{spacing:"3",children:[(0,s.jsx)(iS.D,{...r,children:"Background"}),(0,s.jsxs)(eI.MJ,{children:[(0,s.jsx)(eA.l,{children:(0,s.jsx)(b.x6,{id:"ihFuMH"})}),(0,s.jsx)(ie.a9,{dataTestId:"custom-theme-card-color-picker",theme:t,color:u,updateColor:e=>{i((0,C.hi)({color:e}))},defaultColor:{type:"solid",color:"#FFFFFF"},palette:"accent"})]}),(0,s.jsxs)(eI.MJ,{children:[(0,s.jsx)(eA.l,{children:(0,s.jsx)(b.x6,{id:"8rfGAV"})}),(0,s.jsx)(te,{setBackground:l,background:h,defaultMessage:(0,s.jsxs)(e_.F,{fontSize:"xs",children:[(0,s.jsx)(i2._,{}),(0,s.jsx)(m.E,{children:(0,s.jsx)(b.x6,{id:"j+PsQe"})})]}),isDark:p,contextualTheme:t})]})]})]})});ts.displayName="CustomColorSettings";let tn=(0,d.memo)(()=>(0,s.jsx)(R.B,{spacing:6,children:(0,s.jsx)(i6,{defaultTab:(0,s.jsx)(iK,{}),customTab:(0,s.jsx)(ts,{})})}));tn.displayName="ColorStep";var tl=t(95571);let tr={...K.AG,cardBorderColor:void 0},to=e=>{let{isSelected:i=!1,onClick:t,theme:n,pack:l}=e,{title:r,description:o,knobs:a}=l,c=(0,ii.Ik)((0,ii.H7)(n))||"white",u=(0,d.useMemo)(()=>{let e={...tr,...a(n)};return(0,tl.tL)({cardColor:(0,ii.Tn)(n),config:e,theme:{...n,config:{...n.config,...e}}})},[n,a]);return(0,s.jsx)(f.$,{variant:"ghost",onClick:t,bg:i?"trueblue.50":"white",borderColor:i?"trueblue.400":"transparent",borderWidth:"2px",minH:"auto",h:"auto",minW:"auto",w:"100%",p:2,flex:1,color:"gray.800",textAlign:"left",whiteSpace:"normal",alignItems:"flex-start",css:u,children:(0,s.jsxs)(R.B,{flex:1,spacing:4,children:[(0,s.jsx)(I.s,{h:24,bg:c,borderRadius:"md",borderWidth:"1px",shadow:"inner",align:"center",justify:"center",p:5,children:(0,s.jsx)(I.s,{w:"100%",h:"100%",sx:{boxShadow:"var(--card-shadow)",backdropFilter:"var(--card-backdrop-filter)",backgroundColor:"var(--card-background-color)",borderRadius:"var(--card-border-radius)"}})}),(0,s.jsxs)(R.B,{spacing:1,children:[(0,s.jsx)(m.E,{fontSize:"md",children:r}),(0,s.jsx)(m.E,{fontWeight:"500",color:"gray.500",fontSize:"xs",children:o})]})]})})};var ta=t(8099),td=t(51684);let tc=e=>{let{label:i,isSelected:t=!1,type:n="card",onClick:l=()=>{},sx:r={},children:o}=e;return(0,s.jsx)(a.Tz,{label:i?i():"",placement:"top",children:(0,s.jsx)(f.$,{h:"auto",p:0,variant:"ghost",onClick:l,children:(0,s.jsxs)(I.s,{h:"14",minH:"14",minW:"88px",position:"relative",overflow:"hidden",alignItems:"center",justifyContent:"center",borderRadius:"md",bg:t?"trueblue.200":"gray.200",border:"2px solid",borderColor:t?"trueblue.400":"gray.200",transitionProperty:"background-color, border-color",transitionDuration:"normal",_hover:{bg:t?void 0:"trueblue.100",borderColor:t?void 0:"trueblue.300"},children:["layout"===n&&(0,s.jsx)(R.B,{bg:"white",h:"100%",w:"100%",p:"2",children:(0,s.jsx)(O.z,{h:"100%",w:"100%",borderRadius:"md",alignItems:"stretch",spacing:"1",filter:"grayscale(1)",children:[void 0,void 0,void 0].map((e,i)=>(0,s.jsx)(I.s,{flex:"1",sx:r},i))})}),"card"===n&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(E.a,{zIndex:"0",position:"relative",fontSize:"2xl",color:t?"trueblue.600":"gray.600",children:(0,s.jsx)(P.g,{icon:td.Cyq})}),(0,s.jsx)(E.a,{zIndex:"10",bg:"white",position:"absolute",left:"-4",borderRadius:"md",bottom:"-4",h:"14",w:"100%",sx:r})]}),"button"===n&&(0,s.jsx)(f.$,{sx:r,p:4,size:"sm",variant:"plain",pointerEvents:"none",boxShadow:"none",border:"none",maxW:"100%",transform:"scale(0.8)",children:(0,s.jsx)(b.x6,{id:"hxBFty"})}),o]})})})},tu=e=>{let{label:i,isSelected:t=!1,type:n="radius",onClick:l=()=>{},sx:r={}}=e;return(0,s.jsx)(a.Tz,{label:i?i():"",placement:"top",children:(0,s.jsxs)(f.$,{p:"0",variant:"ghost",bg:t?"trueblue.100":"gray.200",border:"2px solid",borderColor:t?"trueblue.400":"gray.200",w:"12",h:"12",alignItems:"flex-start",overflow:"hidden",textAlign:"left",onClick:l,position:"relative",children:["radius"===n&&(0,s.jsx)(E.a,{zIndex:"10",bg:"white",h:"16",w:"16",position:"absolute",top:"3",right:"3",sx:r}),"shadow"===n&&(0,s.jsx)(E.a,{zIndex:"10",bg:"white",h:"16",w:"16",position:"absolute",bottom:"3",left:"3",borderRadius:"sm",sx:r}),"block-shadow"===n&&(0,s.jsx)(E.a,{w:"100%",h:"100%",bg:"white",children:(0,s.jsx)(E.a,{zIndex:"10",bg:"gray.50",h:"16",w:"16",position:"absolute",bottom:"3",left:"3",borderRadius:"sm",sx:r})}),"card"===n&&(0,s.jsxs)(I.s,{color:"gray.400",alignItems:"center",h:"100%",w:"100%",justifyContent:"center",position:"relative",children:[(0,s.jsx)(P.g,{icon:td.Cyq}),(0,s.jsx)(E.a,{position:"absolute",bg:"white",zIndex:"10",top:"0",left:"0",bottom:"0",right:"0",sx:r})]})]})})},tx=e=>{let{label:i,tooltip:t,isSelected:n,onClick:l}=e;return(0,s.jsx)(ta.m,{label:t?t():"",placement:"top",children:(0,s.jsx)(f.$,{h:"auto",p:"3",variant:"ghost",bg:n?"trueblue.50":"gray.50",textAlign:"left",minW:"14",onClick:l,children:i&&(0,s.jsx)(m.E,{maxW:"100%",noOfLines:1,color:n?"trueblue.600":"gray.600",children:i})})})};var th=t(68093);let tp=()=>{let e=(0,x.jL)(),i=(0,x.GV)(C.eo);if(!i)throw Error("Theme is undefined");let t=(0,iF.M)(i),n="hard"===t.cardShadow;if(!("none"!==t.cardBorder||n))return null;let l=(0,ii.J1)(i),{config:r}=i;return(0,s.jsxs)(eI.MJ,{children:[(0,s.jsx)(eA.l,{children:n?(0,s.jsx)(b.x6,{id:"Nz77Ud"}):(0,s.jsx)(b.x6,{id:"ITgjHB"})}),(0,s.jsx)(ie.a9,{theme:i,color:r.cardBorderColor,defaultColor:l,updateColor:i=>{e((0,C.rg)({color:i}))},palette:"accent"})]})};var tm=t(15863),tg=t(86442);let tj=()=>{let e=(0,x.jL)(),i=(0,x.GV)(C.eo);if(!i)throw Error("Theme is undefined");let t=(0,ii.bh)(i),n=(0,iF.M)(i);return(0,s.jsxs)(eI.MJ,{children:[(0,s.jsx)(eA.l,{children:(0,s.jsx)(b.x6,{id:"QMdgje"})}),(0,s.jsxs)(eY.T,{spacing:2,align:"start",children:[";",(0,s.jsx)(tm.z,{children:(0,s.jsx)(R.B,{children:Object.entries(K.Xt).map(t=>{let[l,r]=t,o=(0,ii.QD)(i,l);return(0,s.jsx)(tg.s,{isChecked:l===n.shapeColorScheme,onChange:()=>{e((0,C.BH)({shapeColorScheme:l}))},children:(0,s.jsxs)(O.z,{children:["custom"!==l&&(0,s.jsx)(eS.j,{size:"5",bg:(0,ii.Ik)(o)}),(0,s.jsx)(m.E,{fontSize:"sm",children:r.name()})]})},l)})})}),"custom"===n.shapeColorScheme&&(0,s.jsxs)(R.B,{w:"100%",children:[(0,s.jsx)(m.E,{fontSize:"sm",color:"gray.600",children:(0,s.jsx)(b.x6,{id:"U+j5it"})}),(0,s.jsx)(ie.oB,{theme:i,colors:t,updateColors:i=>{e((0,C.h)({colors:i}))},minColors:1,maxColors:10,solidOnly:!0,palette:"accent"})]})]})]})},tf=(0,d.memo)(()=>{let e=[{label:()=>eF.Ru._({id:"Ccpbzh"}),Component:(0,s.jsx)(tb,{})},{label:()=>eF.Ru._({id:"Uw3jqG"}),Component:(0,s.jsx)(tv,{})},{label:()=>eF.Ru._({id:"0ZDH3e"}),Component:(0,s.jsx)(ty,{})}];return(0,s.jsxs)(iQ.t,{variant:"soft-rounded",isFitted:!0,size:"sm",children:[(0,s.jsx)(iZ.w,{children:e.map((e,i)=>(0,s.jsx)(iY.o,{"data-testid":"theme-config-tab-".concat(i),children:e.label()},i))}),(0,s.jsx)(i0.T,{children:e.map((e,i)=>(0,s.jsx)(i1.K,{px:"0","data-testid":"theme-config-tab-panel-".concat(i),children:(0,s.jsx)(R.B,{spacing:4,children:e.Component})},i))})]})});tf.displayName="DesignSettings";let tb=(0,d.memo)(()=>{let e=(0,x.jL)(),i=(0,x.GV)(C.eo);if(!i)throw Error("Theme is undefined");let t=(0,iF.M)(i);return(0,s.jsxs)(R.B,{spacing:8,children:[(0,s.jsxs)(eI.MJ,{children:[(0,s.jsxs)(eA.l,{children:[(0,s.jsx)(b.x6,{id:"aBxw8F"}),(0,s.jsx)(a.qT,{ms:1.5,label:(0,s.jsx)(b.x6,{id:"IUHTyS"})})]}),(0,s.jsx)(j.e,{p:.5,children:Object.entries(K.T5).map(i=>{let[n,l]=i;return(0,s.jsx)(tu,{label:l.name,type:"radius",isSelected:n===t.roundness,sx:l.previewSx,onClick:()=>{e((0,C.n4)({roundness:n}))}},n)})})]}),(0,s.jsxs)(eI.MJ,{children:[(0,s.jsxs)(eA.l,{children:[(0,s.jsx)(b.x6,{id:"n0Xbfn"}),(0,s.jsx)(a.qT,{ms:1.5,label:(0,s.jsx)(b.x6,{id:"bsqZlK"})})]}),(0,s.jsx)(j.e,{p:.5,children:Object.entries(K.Jm).map(i=>{let[n,l]=i;return l.deprecated&&n!==t.cardShadow?null:(0,s.jsx)(tu,{label:l.name,type:"shadow",isSelected:n===t.cardShadow||!t.cardShadow&&"default"===n,sx:l.previewSx,onClick:()=>{e((0,C.E0)({cardShadow:n}))}},n)})})]}),(0,s.jsxs)(eI.MJ,{children:[(0,s.jsx)(eA.l,{children:(0,s.jsx)(b.x6,{id:"XDmFR6"})}),(0,s.jsx)(j.e,{p:.5,isAttached:!0,children:Object.entries(K.ws).map(i=>{let[n,l]=i;return(0,s.jsx)(tx,{tooltip:l.name,isSelected:n===t.cardBorder,label:l.icon,onClick:()=>{e((0,C.Cg)({cardBorder:n}))}},n)})})]}),(0,s.jsx)(tp,{}),(0,s.jsxs)(eI.MJ,{children:[(0,s.jsx)(eA.l,{children:(0,s.jsx)(b.x6,{id:"yu3Nvs"})}),(0,s.jsx)(j.e,{p:.5,children:Object.entries(K.Xg).map(i=>{let[n,l]=i;return(0,s.jsx)(tc,{label:l.name,type:"card",isSelected:n===t.cardTransparency,sx:l.previewSx,onClick:()=>{e((0,C.SM)({cardTransparency:n}))}},n)})})]}),(0,s.jsxs)(eI.MJ,{children:[(0,s.jsx)(eA.l,{children:(0,s.jsx)(b.x6,{id:"ae2ouI"})}),(0,s.jsx)(j.e,{p:.5,flexWrap:"wrap",isAttached:!0,gap:2,children:Object.entries(th.e).map(i=>{let[n,l]=i;return(0,s.jsx)(tc,{label:l.name,type:"layout-cut",isSelected:n===t.accentCut,onClick:()=>{e((0,C.m7)({accentCut:n}))},children:(0,s.jsxs)(O.z,{h:"100%",w:"100%",spacing:"0",bg:"white",children:[(0,s.jsx)(I.s,{flex:"2",h:"100%"}),(0,s.jsx)(I.s,{flex:"1",h:"100%",bg:"gray.200",color:"gray.500",alignItems:"center",justifyContent:"end",sx:l.maskStyles.right,p:2,children:(0,s.jsx)(P.g,{icon:e$.Cyq})})]})},n)})})]})]})});tb.displayName="CardsTab";let tv=(0,d.memo)(()=>{let e=(0,x.jL)(),i=(0,x.GV)(C.eo);if(!i)throw Error("Theme is undefined");let t=(0,iF.M)(i);return(0,s.jsxs)(R.B,{spacing:8,children:[(0,s.jsx)(tj,{}),(0,s.jsxs)(eI.MJ,{children:[(0,s.jsx)(eA.l,{children:(0,s.jsx)(b.x6,{id:"xQJpEa"})}),(0,s.jsx)(j.e,{p:.5,isAttached:!0,children:Object.entries(K.z0).map(i=>{let[n,l]=i;return(0,s.jsx)(tx,{tooltip:l.name,isSelected:n===t.shapeFill,label:l.icon,onClick:()=>{e((0,C.Ow)({shapeFill:n})),"none"===n&&"none"===t.shapeBorder&&e((0,C.HC)({shapeBorder:"md"}))}},n)})})]}),(0,s.jsxs)(eI.MJ,{children:[(0,s.jsx)(eA.l,{children:"Block border"}),(0,s.jsx)(j.e,{isAttached:!0,children:Object.entries(K.ws).map(i=>{let[n,l]=i;return(0,s.jsx)(tx,{tooltip:l.name,isSelected:n===t.shapeBorder,label:l.icon,onClick:()=>{e((0,C.HC)({shapeBorder:n}))}},n)})})]}),(0,s.jsxs)(eI.MJ,{children:[(0,s.jsx)(eA.l,{children:"Block shadow"}),(0,s.jsx)(j.e,{as:iE.B,children:Object.entries(K.kI).map(i=>{let[n,l]=i;return l.deprecated&&n!==t.shapeShadow?null:(0,s.jsx)(tu,{type:"block-shadow",label:l.name,isSelected:n===t.shapeShadow,sx:{border:"1px solid",borderColor:"gray.200",backgroundColor:"gray.50",...l.previewSx},onClick:()=>{e((0,C.pe)({shapeShadow:n}))}},n)})})]})]})});tv.displayName="BlocksTab";let ty=(0,d.memo)(()=>{let e=(0,x.GV)(C.eo),i=(0,x.jL)();if(!e)throw Error("Theme is undefined");let t=(0,iF.M)(e),{config:n}=e,l=(0,ii.Jh)(e),r=(0,ii.jO)(e);return(0,s.jsxs)(R.B,{spacing:8,children:[(0,s.jsxs)(eI.MJ,{children:[(0,s.jsxs)(eA.l,{children:[(0,s.jsx)(b.x6,{id:"Ptp9MF"})," ",(0,s.jsx)(a.qT,{label:(0,s.jsx)(b.x6,{id:"W3CvLD"})})]}),(0,s.jsx)(ie.tN,{theme:e,color:n.buttonColor,defaultColor:r,updateColor:e=>{i((0,C.$W)({color:e}))},palette:"accent"})]}),(0,s.jsxs)(eI.MJ,{children:[(0,s.jsx)(eA.l,{children:"Button shape"}),(0,s.jsx)(j.e,{as:iE.B,children:Object.entries(K.OE).map(e=>{let[n,l]=e;return(0,s.jsx)(tc,{type:"button",label:l.name,isSelected:n===t.buttonRoundness,sx:l.previewSx,onClick:()=>{i((0,C.L_)({roundness:n}))}},n)})})]}),(0,s.jsxs)(eI.MJ,{children:[(0,s.jsxs)(eA.l,{children:[(0,s.jsx)(b.x6,{id:"QfrKvi"})," ",(0,s.jsx)(a.qT,{label:(0,s.jsx)(b.x6,{id:"W3CvLD"})})]}),(0,s.jsx)(ie.a9,{theme:e,color:n.linkColor,defaultColor:l,updateColor:e=>{i((0,C.NN)({color:e}))},palette:"accent"})]})]})});ty.displayName="ButtonsLinksTab";let tw=()=>[{id:"default",title:(0,s.jsx)(b.x6,{id:"TJBHlP"}),description:(0,s.jsx)(b.x6,{id:"1GpX8B"}),knobs:()=>({})},{id:"flat",title:(0,s.jsx)(b.x6,{id:"F7cy8b"}),description:(0,s.jsx)(b.x6,{id:"SkGUtG"}),knobs:()=>({roundness:"sm",buttonRoundness:"sm",cardBorder:"none",cardShadow:"none",shapeFill:"solid",shapeBorder:"none",shapeShadow:"none"})},{id:"outline",title:(0,s.jsx)(b.x6,{id:"dD7NPy"}),description:(0,s.jsx)(b.x6,{id:"GYrLbt"}),knobs:e=>({shapeFill:"none",shapeBorder:"md",cardBorder:"md",roundness:"sm",buttonRoundness:"sm",cardBorderColor:(0,ii.HW)((0,ii.VH)(e))})},{id:"sharp",title:(0,s.jsx)(b.x6,{id:"MnUrtL"}),description:(0,s.jsx)(b.x6,{id:"Zcn2iz"}),knobs:()=>({shapeFill:"solid",shapeBorder:"sm",cardBorder:"sm",cardShadow:"none",roundness:"sm",buttonRoundness:"sm",accentCut:"diagonal"})},{id:"comic",title:(0,s.jsx)(b.x6,{id:"83V/SJ"}),description:(0,s.jsx)(b.x6,{id:"tW4rXv"}),knobs:e=>({roundness:"sm",buttonRoundness:"sm",cardBorder:"md",cardShadow:"hard",shapeFill:"solid",shapeBorder:"md",shapeShadow:"none",cardBorderColor:(0,ii.HW)((0,ii.VH)(e))})},{id:"glass",title:(0,s.jsx)(b.x6,{id:"f0936e"}),description:(0,s.jsx)(b.x6,{id:"yeVgz2"}),knobs:()=>({cardTransparency:"frosted",cardBorder:"none",cardShadow:"default",roundness:"sm",shapeFill:"solid",shapeShadow:"none",shapeBorder:"sm"})},{id:"rounded",title:(0,s.jsx)(b.x6,{id:"ieQgZ8"}),description:(0,s.jsx)(b.x6,{id:"ulXymN"}),knobs:()=>({roundness:"xl",buttonRoundness:"xl",shapeFill:"none",shapeBorder:"lg",cardBorder:"lg",cardShadow:"none",accentCut:"round"})},{id:"soft",title:(0,s.jsx)(b.x6,{id:"DT6auk"}),description:(0,s.jsx)(b.x6,{id:"UtUWAG"}),knobs:()=>({cardTransparency:"frosted",cardShadow:"default",roundness:"lg",cardBorder:"none",shapeShadow:"soft",shapeBorder:"none",shapeFill:"none",buttonRoundness:"xl",accentCut:"fade"})},{id:"capsule",title:(0,s.jsx)(b.x6,{id:"Q4Of8O"}),description:(0,s.jsx)(b.x6,{id:"vc8Frf"}),knobs:e=>({roundness:"xl",buttonRoundness:"xl",cardBorder:"md",cardShadow:"hard",shapeFill:"solid",shapeBorder:"sm",shapeShadow:"hard",cardBorderColor:(0,ii.HW)((0,ii.VH)(e)),accentCut:"wiggle"})}],tC=(0,d.memo)(()=>{let e=(0,x.GV)(C.eo),i=(0,x.jL)(),[t,n]=(0,d.useState)(null),l=(0,d.useCallback)(t=>{if(!e)throw Error("theme is undefined");n(t.id);let s=t.knobs(e);i((0,C._R)({config:{...tr,...s}}))},[i,e]);if(!e)throw Error("Theme is undefined");let r=tw();return(0,s.jsx)(R.B,{spacing:6,children:(0,s.jsx)(i6,{defaultTab:(0,s.jsx)(R.B,{children:(0,s.jsx)(iD.x,{templateColumns:iR,gap:3,children:r.map(i=>(0,s.jsx)(to,{theme:e,pack:i,isSelected:t===i.id,onClick:()=>l(i)},i.id))})}),customTab:(0,s.jsx)(tf,{})})})});tC.displayName="DesignStep";var tk=t(41781),tS=t(90221);let t_=e=>{let{isSelected:i=!1,onClick:t,heading:n,headingWeight:l,body:r,bodyWeight:o,theme:a}=e,d=(0,ii.Ik)((0,ii.Tn)(a)),c=(0,ii.VL)((0,ii.Lz)(a)),u=(0,ii.VL)((0,ii.fQ)(a));return(0,s.jsx)(f.$,{variant:"ghost",onClick:t,minH:"auto",h:"auto",minW:"auto",w:"100%",p:2,flex:1,color:"gray.800",textAlign:"left",whiteSpace:"normal",bg:i?"trueblue.50":"white",borderColor:i?"trueblue.400":"transparent",borderWidth:"2px",alignItems:"flex-start",children:(0,s.jsxs)(R.B,{flex:1,bg:d,borderRadius:"md",spacing:1,p:3,py:4,shadow:"sm",borderWidth:"1px",children:[(0,s.jsx)(m.E,{fontSize:"xl",fontWeight:l,fontFamily:n.id,css:c,noOfLines:1,children:n.name}),(0,s.jsx)(m.E,{fontWeight:o,fontFamily:r.id,css:u,fontSize:"md",children:r.name})]})})};var tI=t(32844),tA=t(59554),tR=t(6743),tE=t(30928),tT=t(62117),tD=t(72470),tP=t(77979),tz=t(53484),tO=t(50933),tM=t(33750),tF=t.n(tM),tN=t(17006),tL=t(11403);let tG=(0,d.memo)(()=>{let e=(0,x.jL)(),i=(0,x.GV)(C.eo),t=(0,eG.u)("allGoogleFonts"),{globalFonts:n,workspaceFonts:l}=(0,y.II)({isDefault:!0}),{fontsMap:r}=(0,y.II)({isDefault:!t||void 0}),o={globalFonts:n,workspaceFonts:l};if(!i)throw Error("Theme is undefined");let a=(0,d.useCallback)(t=>{let s=r[t],n=(0,eH.yi)(s),l=(0,eB.g9)(n,i.headingFontWeight||K.mI.heading)||K.mI.heading;e((0,C.CS)({font:t,weight:l,fontsMap:r}))},[e,r,i.headingFontWeight]),c=(0,d.useCallback)(t=>{let s=r[t],n=(0,eH.yi)(s),l=(0,eB.g9)(n,i.bodyFontWeight||K.mI.body)||K.mI.body;e((0,C.g6)({font:t,weight:l,fontsMap:r}))},[e,r,i.bodyFontWeight]),u=(0,d.useCallback)(i=>e((0,C.zs)({weight:i})),[e]),h=(0,d.useCallback)(i=>e((0,C.lm)({weight:i})),[e]),p=(0,d.useCallback)(()=>{let e=(0,S.Zi)();window.open(e,"_blank")},[]),g=r[i.headingFont||K.z8.headingFont]||r[K.z8.headingFont],j=r[i.bodyFont||K.z8.bodyFont]||r[K.z8.bodyFont],f=i.headingFontWeight||K.mI.heading,v=i.bodyFontWeight||K.mI.body;return(0,s.jsxs)(R.B,{spacing:8,children:[(0,s.jsxs)(eI.MJ,{children:[(0,s.jsx)(eA.l,{children:(0,s.jsx)(m.E,{children:(0,s.jsx)(b.x6,{id:"PKjGhT"})})}),(0,s.jsxs)(eY.T,{spacing:2,align:"stretch",children:[(0,s.jsx)(eJ,{fonts:o,value:i.headingFont,updateValue:a,onFontUploadClick:p,weight:"bold",defaultFont:K.z8.headingFont,"data-testid":"custom-theme-heading-font-picker",my:0}),(0,s.jsx)(eZ,{font:g,value:f,defaultWeight:700,updateValue:u,my:0}),(0,s.jsx)(tt,{}),(0,s.jsx)(tU,{children:(0,s.jsx)(tW,{variant:"heading"})})]})]}),(0,s.jsxs)(eI.MJ,{children:[(0,s.jsx)(eA.l,{children:(0,s.jsx)(m.E,{children:(0,s.jsx)(b.x6,{id:"bGQplw"})})}),(0,s.jsxs)(eY.T,{spacing:2,align:"stretch",children:[(0,s.jsx)(eJ,{fonts:o,value:i.bodyFont,updateValue:c,onFontUploadClick:p,weight:"normal",defaultFont:K.z8.bodyFont,"data-testid":"custom-theme-body-font-picker",my:0}),(0,s.jsx)(eZ,{font:j,value:v,defaultWeight:400,updateValue:h,my:0}),(0,s.jsx)(ti,{}),(0,s.jsx)(tU,{children:(0,s.jsx)(tW,{variant:"body"})})]})]}),(0,s.jsx)(e_.F,{mt:"4",colorScheme:"gray",children:(0,s.jsx)(m.E,{fontSize:"sm",children:(0,s.jsx)(b.x6,{id:"gXllrZ"})})})]})});tG.displayName="TypographySettings";let tB=[{name:()=>eF.Ru._({id:"EdQY6l"}),icon:D.tiU,key:"none"},{name:()=>eF.Ru._({id:"fVR7qN"}),icon:D.Jn3,key:"uppercase"}],tU=e=>{let{children:i}=e;return(0,s.jsx)(tI.n,{allowMultiple:!0,mt:0,children:(0,s.jsxs)(tA.A,{border:"none",bg:"gray.50",borderRadius:"md",children:[(0,s.jsxs)(tR.J,{fontWeight:"500",ps:3,borderRadius:"md",fontSize:"sm",children:[(0,s.jsx)(E.a,{as:"span",flex:"1",textAlign:"start",children:(0,s.jsx)(b.x6,{id:"sxkWRg"})}),(0,s.jsx)(tE.Q,{})]}),(0,s.jsx)(tT.v,{px:4,pb:2,children:i})]})})},tW=e=>{let{variant:i}=e,t=(0,x.GV)(C.eo),n=(0,x.jL)();if(!t)throw Error("Theme is undefined");let{letterSpacingHeading:l,letterSpacingBody:r,lineHeightHeading:o,lineHeightBody:c,fontSize:u,headingFontSize:h,headingTransform:p="none"}=t.config,m="heading"===i?l:r,g="heading"===i?o:c,f="heading"===i?tN.eL:tN.Uw,v="heading"===i?h:u,y=(0,d.useCallback)(e=>{"heading"===i?n((0,C.pG)({letterSpacing:e})):n((0,C.NS)({letterSpacing:e}))},[n,i]),w=(0,d.useCallback)(e=>{"heading"===i?n((0,C.h4)({lineHeight:e})):n((0,C.L7)({lineHeight:e}))},[n,i]),k=(0,d.useCallback)(e=>{"heading"===i?n((0,C.IA)({fontSize:e})):n((0,C.Gs)({fontSize:e}))},[n,i]),S=(0,d.useCallback)(e=>{n((0,C.Em)({transform:e}))},[n]);return(0,s.jsxs)(R.B,{py:2,minH:"100px",spacing:4,children:[(0,s.jsxs)(O.z,{children:[(0,s.jsxs)(E.a,{children:[(0,s.jsxs)(eA.l,{children:[(0,s.jsx)(b.x6,{id:"Wqh8xb"}),(0,s.jsx)(a.qT,{label:(0,s.jsx)(b.x6,{id:"d4Sact"}),ms:1.5})]}),(0,s.jsxs)(tD.M,{children:[(0,s.jsx)(tP.W,{pointerEvents:"none",color:"gray.600",children:(0,s.jsx)(P.g,{icon:D.$LH})}),(0,s.jsx)(tz.Q7,{min:1,max:2,step:.05,defaultValue:null!=g?g:"",onChange:(e,i)=>{""===e||isNaN(i)?w(void 0):w(tF()(i,1,2))},children:(0,s.jsx)(tz.OO,{bg:"white",ps:"var(--input-height)",pe:"var(--input-padding)",placeholder:f.toString(),textAlign:"end"})})]})]}),(0,s.jsxs)(E.a,{children:[(0,s.jsxs)(eA.l,{children:[(0,s.jsx)(b.x6,{id:"vhRvfF"}),(0,s.jsx)(a.qT,{label:(0,s.jsx)(b.x6,{id:"ov2xUH"}),ms:1.5})]}),(0,s.jsxs)(tD.M,{children:[(0,s.jsx)(tP.W,{pointerEvents:"none",color:"gray.600",children:(0,s.jsx)(P.g,{icon:D.myY})}),(0,s.jsx)(tz.Q7,{min:-10,max:10,step:1,defaultValue:m?100*m:"",onChange:(e,i)=>{""===e||isNaN(i)?y(void 0):y(tF()(i/100,-.1,.1))},children:(0,s.jsx)(tz.OO,{bg:"white",ps:"var(--input-height)",placeholder:"0",textAlign:"end"})}),(0,s.jsx)(tP.t,{pointerEvents:"none",color:"gray.600",children:"%"})]})]})]}),"body"!==i&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(E.a,{children:[(0,s.jsx)(eA.l,{children:(0,s.jsx)(b.x6,{id:"A/6zEn"})}),(0,s.jsx)(j.e,{isAttached:!0,children:tB.map(e=>(0,s.jsx)(a.Tz,{label:e.name(),children:(0,s.jsx)(e0.K,{"aria-label":e.name(),icon:(0,s.jsx)(P.g,{icon:e.icon,fixedWidth:!0}),variant:p===e.key?"plainSelected":"plain",boxShadow:"none",onClick:()=>S(e.key)})},e.key))})]})}),(0,s.jsx)(tV,{value:v,setValue:k})]})},tV=e=>{let{value:i,setValue:t}=e,[n,l]=(0,d.useState)(!1),[r,o]=(0,d.useState)(i||1),c=(0,tL.lW)(t,300);return(0,s.jsxs)(E.a,{pb:"2",children:[(0,s.jsxs)(eA.l,{mb:"3",children:[(0,s.jsx)(b.x6,{id:"jIL7bk"})," ",(0,s.jsx)(a.qT,{label:(0,s.jsx)(b.x6,{id:"/qH3CQ"})})]}),(0,s.jsxs)(tO.Ap,{defaultValue:i,min:.75,max:1.25,step:.05,colorScheme:"trueblue",onChange:e=>{o(e),c(e)},onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[(0,s.jsx)(tO.hB,{children:(0,s.jsx)(tO.hJ,{})}),(0,s.jsx)(tO.d6,{value:1,h:"20px",w:"2px",bg:"gray.300",transform:"translateY(-50%) translateX(-50%)"}),(0,s.jsx)(a.Tz,{placement:"top",isOpen:n,label:"".concat(r.toFixed(2),"x"),shortcut:1===r?eF.Ru._({id:"ovBPCi"}):void 0,children:(0,s.jsx)(tO.OQ,{})})]})]})},tH=[{heading:{font:"Inter",weight:700,keywords:["sans-serif","bold"]},body:{font:"Inter",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"DM Sans",weight:600,keywords:["semi-bold","sans-serif"]},body:{font:"DM Sans",weight:400,keywords:["normal","sans-serif"]}},{heading:{font:"Overpass",weight:700,keywords:["sans-serif","bold"]},body:{font:"Overpass",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Barlow",weight:600,keywords:["narrow","semi-bold","sans-serif"]},body:{font:"Barlow",weight:400,keywords:["sans-serif","normal","narrow"]}},{heading:{font:"Nunito",weight:600,keywords:["semi-bold","fun","sans-serif","rounded"]},body:{font:"PT Sans",weight:400,keywords:["normal","sans-serif"]}},{heading:{font:"Lora",weight:400,keywords:["normal","serif"]},body:{font:"Source Sans 3",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Instrument Sans",weight:600,keywords:["semi-bold","sans-serif"]},body:{font:"Instrument Sans",weight:400,keywords:["normal","sans-serif"]}},{heading:{font:"Roboto Slab",weight:400,keywords:["serif","slab-serif","normal"]},body:{font:"Roboto",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Barlow",weight:700,keywords:["narrow","bold","sans-serif"]},body:{font:"Montserrat",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Libre Baskerville",weight:400,keywords:["serif","normal"]},body:{font:"DM Sans",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Montserrat",weight:400,keywords:["normal","sans-serif"]},body:{font:"Heebo",weight:300,keywords:["light","sans-serif"]}},{heading:{font:"Prompt",weight:500,keywords:["sans-serif","bold"]},body:{font:"Mukta",weight:300,keywords:["sans-serif","light"]}},{heading:{font:"Inconsolata",weight:700,keywords:["monospace","serif","bold"]},body:{font:"Fira Sans",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Fraunces",weight:500,keywords:["serif","fun","bold"]},body:{font:"Epilogue",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Gelasio",weight:400,keywords:["serif","normal"]},body:{font:"Lato",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Raleway",weight:400,keywords:["sans-serif","thin","normal"]},body:{font:"Roboto",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Kanit",weight:300,keywords:["sans-serif","thin","normal"]},body:{font:"Martel Sans",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Corben",weight:400,keywords:["normal","serif","wide","fun"]},body:{font:"Nobile",weight:400,keywords:["sans-serif","normal","narrow"]}},{heading:{font:"Crimson Pro",weight:700,keywords:["serif","bold"]},body:{font:"Open Sans",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Poppins",weight:300,keywords:["sans-serif","thin","normal"]},body:{font:"Roboto",weight:300,keywords:["thin","sans-serif","normal"]}},{heading:{font:"Red Hat Text",weight:400,keywords:["normal","sans-serif"]},body:{font:"Roboto",weight:300,keywords:["thin","sans-serif"]}},{heading:{font:"Gelasio",weight:400,keywords:["serif","normal"]},body:{font:"Gelasio",weight:400,keywords:["normal","serif"]}},{heading:{font:"Bitter",weight:500,keywords:["slab-serif","serif","normal"]},body:{font:"Open Sans",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Syne",weight:700,keywords:["wide","sans-serif","fun","bold"]},body:{font:"Arimo",weight:400,keywords:["normal","sans-serif"]}},{heading:{font:"Roboto",weight:500,keywords:["sans-serif","narrow","semi-bold"]},body:{font:"Roboto",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Playfair Display",weight:700,keywords:["serif","bold"]},body:{font:"Open Sans",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Quattrocento",weight:400,keywords:["thin","serif","normal"]},body:{font:"Quattrocento",weight:400,keywords:["serif","normal"]}},{heading:{font:"Montserrat",weight:700,keywords:["wide","bold","sans-serif"]},body:{font:"Source Sans 3",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Kanit",weight:400,keywords:["sans-serif","semi-bold","normal"]},body:{font:"Martel Sans",weight:300,keywords:["sans-serif","normal"]}},{heading:{font:"Lato",weight:700,keywords:["sans-serif","semi-bold","normal"]},body:{font:"Lato",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Fira Mono",weight:500,keywords:["narrow","monospace","semi-bold","normal"]},body:{font:"Fira Sans",weight:400,keywords:["sans-serif","narrow","normal"]}},{heading:{font:"Alexandria",weight:400,keywords:["wide","sans-serif","normal"]},body:{font:"Nobile",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Dela Gothic One",weight:400,keywords:["wide","bold","extrabold","sans-serif","fun"]},body:{font:"DM Sans",weight:400,keywords:["sans-serif","wide","normal"]}},{heading:{font:"Unbounded",weight:400,keywords:["normal","wide","sans-serif","fun"]},body:{font:"Cabin",weight:400,keywords:["wide","sans-serif"]}},{heading:{font:"Tomorrow",weight:600,keywords:["fun","bold","sans-serif"]},body:{font:"Tomorrow",weight:400,keywords:["fun","normal","sans-serif"]}},{heading:{font:"Roboto Mono",weight:500,keywords:["monospace","sans-serif","semi-bold"]},body:{font:"Roboto",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Syne",weight:700,keywords:["fun","semi-bold","bold","wide","fun"]},body:{font:"Overpass",weight:300,keywords:["normal","thin","sans-serif"]}},{heading:{font:"Syne",weight:800,keywords:["fun","wide","extrabold","bold","sans-serif"]},body:{font:"Syne",weight:400,keywords:["sans-serif","normal","wide"]}},{heading:{font:"Spline Sans",weight:700,keywords:["narrow","sans-serif","semi-bold"]},body:{font:"Barlow",weight:400,keywords:["narrow","sans-serif","normal"]}},{heading:{font:"Anton",weight:400,keywords:["narrow","sans-serif","bold","fun"]},body:{font:"Fira Sans",weight:400,keywords:["narrow","sans-serif","normal"]}},{heading:{font:"Unbounded",weight:700,keywords:["fun","bold","extrabold","wide","sans-serif"]},body:{font:"Open Sans",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Sora",weight:500,keywords:["serif","semi-bold"]},body:{font:"Noto Sans TC",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Libre Baskerville",weight:400,keywords:["serif","thin","normal"]},body:{font:"Open Sans",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"MuseoModerno",weight:500,keywords:["fun","sans-serif","semi-bold","bold"]},body:{font:"Source Sans 3",weight:400,keywords:["normal","sans-serif"]}},{heading:{font:"Merriweather",weight:700,keywords:["bold","serif"]},body:{font:"Open Sans",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Alexandria",weight:600,keywords:["bold","wide","sans-serif"]},body:{font:"Sora",weight:300,keywords:["sans-serif","normal"]}},{heading:{font:"Patrick Hand",weight:400,keywords:["fun","handwriting","normal"]},body:{font:"Patrick Hand",weight:400,keywords:["fun","handwriting","normal"]}},{heading:{font:"Prata",weight:400,keywords:["serif","normal"]},body:{font:"Raleway",weight:400,keywords:["sans-serif","normal","fun"]}}],t$=()=>[{key:"all",label:(0,s.jsx)(b.x6,{id:"N40H+G"})},{key:"sans-serif",label:(0,s.jsx)(b.x6,{id:"cW+T4V"})},{key:"serif",label:(0,s.jsx)(b.x6,{id:"e5bnvv"})},{key:"monospace",label:(0,s.jsx)(b.x6,{id:"qJC2VT"})},{key:"fun",label:(0,s.jsx)(b.x6,{id:"rmN315"})},{key:"bold",label:(0,s.jsx)(b.x6,{id:"KmydK6"})},{key:"thin",label:(0,s.jsx)(b.x6,{id:"RGjFMI"})},{key:"wide",label:(0,s.jsx)(b.x6,{id:"I5S9ZE"})}],tX=(0,d.memo)(()=>{let{globalFonts:e}=(0,y.II)();return e.length?(0,s.jsx)(i6,{defaultTab:(0,s.jsx)(tJ,{}),customTab:(0,s.jsx)(tG,{})}):(0,s.jsx)(tK,{})});tX.displayName="FontsStep";let tK=(0,d.memo)(()=>(0,s.jsxs)(R.B,{spacing:4,children:[(0,s.jsxs)(O.z,{children:[(0,s.jsx)(tk.E,{height:7,flex:1}),(0,s.jsx)(tk.E,{height:7,flex:1})]}),(0,s.jsxs)(O.z,{children:[(0,s.jsx)(tk.E,{height:6,w:12}),(0,s.jsx)(tk.E,{height:6,w:12}),(0,s.jsx)(tk.E,{height:6,w:12})]}),(0,s.jsx)(iD.x,{mt:2,templateColumns:iR,gap:3,children:Array.from({length:4}).map((e,i)=>(0,s.jsx)(I.s,{px:2,children:(0,s.jsx)(tk.E,{mt:3,flex:1,height:20})},i))})]}));tK.displayName="FontsConfigSkeleton";let tJ=(0,d.memo)(()=>{let{themeFontsMap:e,fontsMap:i}=(0,y.II)(),t=(0,x.jL)(),n=(0,x.GV)(C.eo),[l,r]=(0,d.useState)("all"),o=(0,d.useMemo)(()=>tH.filter(e=>"all"===l||null===l||e.heading.keywords.includes(l)),[l]),a=(0,d.useMemo)(()=>o.flatMap(i=>[e[i.heading.font],e[i.body.font]]).filter(Boolean),[o,e]),c=(0,d.useCallback)(e=>{t((0,C.BA)({fontPair:e,fontsMap:i}))},[t,i]),u=(0,d.useMemo)(()=>t$(),[]);if(!n)throw Error("Theme is undefined");return(0,s.jsxs)(R.B,{spacing:6,children:[(0,s.jsx)(iE.B,{children:u.map(e=>{let{key:i,label:t}=e;return(0,s.jsx)(iT.vw,{onClick:()=>{r(i)},colorScheme:l===i?"trueblue":"gray",cursor:"pointer",children:(0,s.jsx)(m.E,{children:t})},i)})}),(0,s.jsx)(iD.x,{templateColumns:iR,gap:3,children:o.map((i,t)=>{let l=n.headingFont===i.heading.font&&n.headingFontWeight===i.heading.weight&&n.bodyFont===i.body.font&&n.bodyFontWeight===i.body.weight,r=e[i.heading.font],o=e[i.body.font];return r&&o?(0,s.jsx)(t_,{isSelected:l,onClick:()=>c(i),heading:r,headingWeight:i.heading.weight,body:o,bodyWeight:i.body.weight,theme:n},t):null})}),(0,s.jsx)(tS.J,{fonts:a})]})});tJ.displayName="FontsBuilderPicker";let tq=(0,d.memo)(()=>{let e=(0,x.jL)(),i=(0,x.GV)(C.$9);return(0,s.jsxs)(eI.MJ,{children:[(0,s.jsx)(eA.l,{children:(0,s.jsx)(b.x6,{id:"qy77B2"})}),(0,s.jsx)(E.a,{maxW:"min(100%, 300px)",children:(0,s.jsx)(e7,{value:i,onLogoUploadStart:()=>{e((0,C.QZ)())},updateValue:i=>{if(!i)return void e((0,C.Zw)());e((0,C.$k)({logoImage:(0,it.yK)({result:i,isError:!1})}))},onLogoUploadFail:()=>{e((0,C.UY)())}})})]})});tq.displayName="LogoSettings";let tQ=(0,d.memo)(()=>(0,s.jsx)(R.B,{spacing:6,alignItems:"center",children:(0,s.jsx)(E.a,{mx:"auto",maxW:"300px",children:(0,s.jsx)(tq,{})})}));tQ.displayName="LogoStep";var tZ=t(73689),tY=t(73867),t0=t(27250),t1=t(21033);let t6={position:"absolute",width:"104%",height:"104%",top:"-2%",left:"-2%",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundColor:"transparent",backgroundSize:"cover",transition:"all 0.1s ease-out"},t5=e=>{let{children:i}=e,t=(0,d.useRef)(null),n=(0,d.useRef)(null),l=(0,d.useRef)(null);return(0,d.useEffect)(()=>{let e=t.current,i=n.current,s=l.current;if(!e||!i||!s)return;let r=Array.from(s.children),o=r.length,a=t=>{let s=t.pageX,n=t.pageY,l=e.getBoundingClientRect(),a=e.clientWidth||e.offsetWidth||e.scrollWidth,d=e.clientHeight||e.offsetHeight||e.scrollHeight,c=.52-(s-l.left)/a,u=.52-(n-l.top)/d,x=n-l.top-d/2,h=s-l.left-a/2,p="rotateX(".concat((x-u)*.1,"deg) rotateY(").concat((c-h)*.07,"deg)"),m=180*Math.atan2(x,h)/Math.PI-90;m<0&&(m+=360),e.className.includes("over")&&(p+=" scale3d(1.07,1.07,1.07)"),e.style.transform=p,i.style.background="linear-gradient(".concat(m,"deg, rgba(255,255,255,").concat((n-l.top)/d*.4,") 0%,rgba(255,255,255,0) 80%)"),i.style.transform="translateX(".concat(c*o-.1,"px) translateY(").concat(u*o-.1,"px)"),r.forEach((e,i)=>{let t=o-i;e.style.transform="translateX(".concat(-(c*t*15),"px) translateY(").concat(-(u*t*15),"px)")})},d=()=>{e.className+=" over"},c=()=>{e.className=e.className.replace(" over",""),e.style.transform="",i.style.cssText="",r.forEach(e=>e.style.transform="")};return e.addEventListener("mousemove",a),e.addEventListener("mouseenter",d),e.addEventListener("mouseleave",c),()=>{e.removeEventListener("mousemove",a),e.removeEventListener("mouseenter",d),e.removeEventListener("mouseleave",c)}}),(0,s.jsx)(t1.A,{children:e=>{let{width:r,height:o}=e;return(0,s.jsxs)(I.s,{ref:t,style:{perspective:"1600px",height:o,width:r,margin:"0 auto"},borderRadius:"md",transitionProperty:"all",transitionDuration:"normal",transitionTimingFunction:"ease-out",sx:{"&:hover .threeDImage-shadow":{shadow:"0 45px 100px rgba(14, 21, 47, 0.4), 0 16px 40px rgba(14, 21, 47, 0.4)"}},children:[(0,s.jsx)(I.s,{ref:l,bg:"white",sx:{position:"relative",width:"100%",height:"100%",borderRadius:"5px",overflow:"hidden",transformStyle:"preserve-3d"},children:Array.isArray(i)?i.map((e,i)=>(0,s.jsx)(E.a,{sx:t6,"data-layer":i,pointerEvents:"none",children:e},i)):(0,s.jsx)(E.a,{sx:t6,"data-layer":0,pointerEvents:"none",children:i})}),(0,s.jsx)(E.a,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:"5px",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.25) 0%, rgba(255, 255, 255, 0) 60%)",pointerEvents:"none"},ref:n}),(0,s.jsx)(E.a,{sx:{position:"absolute",top:"5%",left:"5%",width:"90%",height:"90%",transition:"all 0.2s ease-out",boxShadow:"0 8px 30px rgba(14, 21, 47, 0.6)",zIndex:-1},className:"threeDImage-shadow"})]})}})};var t2=t(9236);let t4=e=>{let{title:i,description:t,children:n}=e;return(0,s.jsxs)(R.B,{w:"100%",alignItems:"flex-start",children:[(0,s.jsxs)(R.B,{spacing:1,w:"100%",children:[(0,s.jsx)(m.E,{fontSize:"lg",fontWeight:"semibold",children:i}),(0,s.jsx)(m.E,{fontSize:"xs",color:"gray.600",children:t})]}),n]})},t3=(0,d.memo)(()=>{let{user:e}=(0,z.ur)(),i=(0,x.GV)(C.eo)||t2.S,t=(0,ii.Ik)((0,ii.H7)(i)),n=(0,x.GV)(C.sv),l=(0,x.jL)(),r=(0,d.useRef)(null),o=(0,d.useCallback)(e=>{l((0,C.qv)({name:e.target.value}))},[l]);(0,d.useEffect)(()=>{r.current&&(r.current.focus(),r.current.select())},[]);let[a,c]=(0,d.useState)(!1),{reward:u}=(0,tZ.bS)("rewardId","confetti",{lifetime:200,angle:90,decay:.91,spread:90,startVelocity:45,elementCount:50,elementSize:10,colors:(0,ii.ND)(i).map(ii.Ik)});(0,d.useEffect)(()=>{let e=setTimeout(()=>{c(!0)},400),i=setTimeout(()=>{u()},550);return()=>{clearTimeout(i),clearTimeout(e)}},[]);let h="260px";return(0,s.jsxs)(R.B,{spacing:10,alignItems:"center",children:[(0,s.jsxs)(I.s,{pos:"relative",flex:1,direction:"column",w:"100%",children:[(0,s.jsx)(I.s,{h:h,align:"center",justify:"center",pos:"absolute",zIndex:0,w:"100%",children:(0,s.jsx)(I.s,{w:2,h:2,id:"rewardId"})}),(0,s.jsx)(E.a,{w:h,h:h,mx:"auto",bg:t,borderRadius:"md",borderWidth:"1px",opacity:+!!a,transform:"scale(".concat(a?1:.9,")"),transitionProperty:"common",transitionDuration:"slow",transitionTimingFunction:"cubic-bezier(0.68,-0.55,0.27,1.55)",children:(0,s.jsx)(t5,{children:(0,s.jsxs)(E.a,{bg:t,w:"100%",pos:"relative",p:12,pb:24,h:"100%",children:[(0,s.jsx)(t0.q,{theme:i,transform:"scale(1.2)",position:"relative",bottom:"7",left:"-3.5",w:"200px",boxShadow:"none"}),(0,s.jsxs)(R.B,{pos:"absolute",bottom:0,left:5,bg:"white",w:"108%",mx:"-8%",p:"8%",borderTopWidth:"1px",color:"gray.800",children:[(0,s.jsx)(m.E,{noOfLines:1,children:n||(0,s.jsx)(b.x6,{id:"rzKWuu"})}),(0,s.jsx)(tY.S,{createdByYou:!0,createdByName:null==e?void 0:e.displayName,createdByProfileImageUrl:null==e?void 0:e.profileImageUrl,timestampDescription:"Just now"})]})]})})})]}),(0,s.jsx)(E.a,{maxW:"100%",mx:"0 auto",w:"500px",children:(0,s.jsx)(t4,{title:(0,s.jsx)(b.x6,{id:"HZ7fEu"}),children:(0,s.jsx)(eR.p,{mx:"auto",size:"lg",ref:r,value:n,onChange:o,placeholder:eF.Ru._({id:"HZ7fEu"})})})}),(0,s.jsx)(E.a,{maxW:"100%",mx:"0 auto",w:"500px",children:(0,s.jsx)(t8,{})})]})});t3.displayName="ThemeNameStep";let t8=()=>{let e=(0,en.st)(),i=(0,d.useCallback)(i=>{null==e||e.track(en.VV.THEME_RATED,{rating:i,method:"builder"})},[e]),t=(0,d.useCallback)((i,t,s)=>{null==e||e.track(en.VV.THEME_FEEDBACK,{feedback:t,tags:s,rating:i,method:"builder"})},[e]);return(0,s.jsx)(is.No,{feedbackTags:t9,trackRating:i,trackFeedback:t})},t9=[{key:"wrong-colors",label:(0,s.jsx)(b.x6,{id:"6dn0qr"})},{key:"wrong-fonts",label:(0,s.jsx)(b.x6,{id:"fe43sX"})},{key:"wrong-design",label:(0,s.jsx)(b.x6,{id:"z3jUzS"})},{key:"missing-logo",label:(0,s.jsx)(b.x6,{id:"4Z/w7+"})},{key:"other",label:(0,s.jsx)(b.x6,{id:"aQyGJc"})}],t7={colors:tn,fonts:tX,design:tC,logo:tQ,themeName:t3},se=e=>{let{onContinueClick:i}=e;return(0,s.jsxs)(R.B,{spacing:"6",children:[(0,s.jsx)(T._,{src:"https://cdn.gamma.app/zc87vhr30n8uf3n/39bd9e9e4ae347a39de0f1d27da20a52/original/Frame-1-32.png"}),(0,s.jsx)(m.E,{fontSize:"lg",children:(0,s.jsx)(b.x6,{id:"oXq4Vi"})}),(0,s.jsx)(j.e,{justifyContent:"center",children:(0,s.jsx)(f.$,{minW:"250px",variant:"solid",onClick:i,rightIcon:(0,s.jsx)(P.g,{icon:D.dmS}),children:(0,s.jsx)(b.x6,{id:"EsKTam"})})})]})},si=e=>{let{step:i,setStep:t}=e,n=(0,et.d)();if("intro"===i)return(0,s.jsx)(se,{onContinueClick:()=>{t("colors"),n({title:(0,s.jsx)(b.x6,{id:"okvzsv"}),position:"top",status:"success",duration:2e3,isClosable:!0})}});let l=iA[i],r=t7[i];return(0,s.jsxs)(R.B,{spacing:5,sx:{label:{fontSize:"sm"}},children:[(0,s.jsx)(m.E,{textAlign:"center",size:"md",color:"gray.600",children:l.description}),(0,s.jsx)(E.a,{children:(0,s.jsx)(r,{})})]})};var st=t(1139);let ss=e=>{let{step:i,setStep:t}=e,n=Object.keys(iA).indexOf(i);return(0,s.jsx)(ix.C,{index:n,w:"260px",minW:"0",gap:"0",size:"md",children:Object.entries(iA).map((e,i)=>{let[n,{name:l,icon:r}]=e;return(0,s.jsx)(a.Tz,{label:l,children:(0,s.jsxs)(ih.p,{gap:"0",children:[(0,s.jsx)(ip.S,{as:f.$,variant:"ghost",shadow:"none",size:"sm",onClick:()=>t(n),cursor:"pointer",borderWidth:"0px",bg:"white",sx:{"[data-status=incomplete] &":{color:"gray.600"}},children:(0,s.jsx)(im.x,{complete:(0,s.jsx)(P.g,{icon:r}),incomplete:(0,s.jsx)(P.g,{icon:r}),active:(0,s.jsx)(P.g,{icon:r})})}),(0,s.jsx)(iv.m,{mx:"0 !important"})]},i)},i)})})},sn=e=>{let{step:i,setStep:t,onFinishClick:n,errorMessage:l,isThemeSaving:r}=e,o=(0,d.useCallback)(()=>{let e=Object.keys(iA).indexOf(i)-1;t(Object.keys(iA)[e])},[i,t]),c=(0,d.useCallback)(()=>{let e=Object.keys(iA).indexOf(i)+1;t(Object.keys(iA)[e])},[i,t]),u="colors"===i,x="themeName"===i,h="colors"!==i,p={base:void 0,lg:"130px"};return(0,s.jsxs)(R.B,{direction:"row",justifyContent:u?"flex-end":"space-between",alignItems:"center",position:"relative",w:"100%",children:[(0,s.jsx)(st.z,{in:h,children:(0,s.jsx)(e0.K,{variant:"outline","aria-label":eF.Ru._({id:"CKyk7Q"}),icon:(0,s.jsx)(P.g,{icon:D.Wzs}),onClick:o,pointerEvents:h?"auto":"none"})}),(0,s.jsx)(A.h,{}),(0,s.jsx)(ss,{step:i,setStep:t}),(0,s.jsx)(A.h,{}),x?(0,s.jsx)(a.Tz,{isDisabled:!l,label:l,shouldWrapChildren:!0,children:(0,s.jsx)(f.$,{onClick:n,variant:"solid",isLoading:r,isDisabled:!!l,rightIcon:(0,s.jsx)(P.g,{icon:D.e68}),minW:p,children:(0,s.jsx)(b.x6,{id:"JmZ/+d"})})}):(0,s.jsx)(f.$,{onClick:c,variant:"solid",rightIcon:(0,s.jsx)(P.g,{icon:D.XkK}),minW:p,children:(0,s.jsx)(b.x6,{id:"xGVfLh"})})]})},sl=e=>{let{onComplete:i,onExitClick:t}=e,[n,l]=(0,d.useState)("colors"),r=(0,x.GV)(C.sv),o=(0,x.GV)(C.D6);er("builder");let{persistTheme:a,isThemeSaving:c}=el({onComplete:i,flow:"builder"}),u=(0,d.useMemo)(()=>r?o?(0,s.jsx)(b.x6,{id:"0y5u1g"}):void 0:(0,s.jsx)(b.x6,{id:"OL7UgX"}),[r,o]),h=(0,d.useCallback)(()=>{r&&a()},[r,a]),p=iA[n];return(0,s.jsxs)(ei,{children:[(0,s.jsx)(N,{children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(B,{children:[(0,s.jsx)(L,{children:"intro"===n?(0,s.jsx)(b.x6,{id:"pxh+PI"}):(0,s.jsxs)(O.z,{justifyContent:"center",color:"deepocean.950",children:[(0,s.jsx)(P.g,{icon:p.icon}),(0,s.jsx)(iS.D,{size:"md",fontWeight:"600",children:p.name})]})}),"colors"===n&&(0,s.jsx)(G,{onClick:()=>{t&&t()},leftIcon:D.CeG,children:(0,s.jsx)(b.x6,{id:"ydzS9x"})})]}),(0,s.jsx)(W,{children:(0,s.jsx)(si,{step:n,setStep:l})}),"intro"!==n&&(0,s.jsx)(U,{children:(0,s.jsx)(sn,{step:n,setStep:l,errorMessage:u,isThemeSaving:c,onFinishClick:h})})]})}),(0,s.jsx)(V,{children:(0,s.jsx)(iI,{})})]})};var sr=t(8527),so=t(36218),sa=t(34832),sd=t(17074);let sc=()=>{let[e,i]=(0,d.useState)(!1),[t,s]=(0,d.useState)([]),[n,l]=(0,d.useState)(!1);return{searchCompanies:(0,d.useCallback)(async e=>{if(!e.trim()){s([]),i(!1);return}i(!0);try{let i=ex.$.BRANDFETCH_CLIENT_ID,t="https://api.brandfetch.io/v2/search/".concat(encodeURIComponent(e),"?c=").concat(i),n=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json"}});if(!n.ok)throw Error("Search failed: ".concat(n.status));let l=await n.json();s(l||[])}catch(e){console.error(e),s([])}finally{i(!1)}},[]),getBrandInfo:(0,d.useCallback)(async e=>{l(!0);try{let t,s=ex.$.BRANDFETCH_CLIENT_ID,n="https://api.brandfetch.io/v2/brands/".concat(encodeURIComponent(e)),l=await fetch(n,{method:"GET",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"}});if(!l.ok){let e=await l.text();throw Error("Brand info request failed: ".concat(l.status," - ").concat(e))}let r=await l.json(),o=[];if(r.colors){let e=r.colors.filter(e=>"accent"===e.type).map(e=>e.hex),i=r.colors.filter(e=>"accent"!==e.type).map(e=>e.hex);o.push(...e,...i)}if(r.logos)for(let e of r.logos){var i;let s=null==(i=e.formats)?void 0:i.find(e=>("svg"===e.format||"png"===e.format)&&("transparent"===e.background||"white"===e.background));if(s){t=s.src;break}}let a=[];if(r.fonts)for(let e of r.fonts)e.name&&a.push(e.name);return{name:r.name,domain:r.domain,primaryColors:o.slice(0,5),logoUrl:t,fonts:a.slice(0,2),company:{kind:r.kind||void 0}}}catch(e){return console.error(e),null}finally{l(!1)}},[]),isSearching:e,isGettingBrand:n,searchResults:t,setSearchResults:s}};var su=t(9329);function sx(){let e=(0,su._)(["\n  0% {\n    transform: translate(-50%, -50%) scale(1);\n  }\n  25% {\n    transform: translate(20%, -30%) scale(1.1);\n  }\n  50% {\n    transform: translate(30%, 20%) scale(0.9);\n  }\n  75% {\n    transform: translate(-20%, 30%) scale(1.05);\n  }\n  100% {\n    transform: translate(-50%, -50%) scale(1);\n  }\n"]);return sx=function(){return e},e}function sh(){let e=(0,su._)(["\n  0% {\n    transform: translate(-50%, -50%) scale(1);\n  }\n  25% {\n    transform: translate(-80%, 30%) scale(0.95);\n  }\n  50% {\n    transform: translate(-60%, 80%) scale(1.1);\n  }\n  75% {\n    transform: translate(-40%, 40%) scale(0.9);\n  }\n  100% {\n    transform: translate(-50%, -50%) scale(1);\n  }\n"]);return sh=function(){return e},e}function sp(){let e=(0,su._)(["\n  0% {\n    transform: translate(-50%, -50%) scale(1);\n  }\n  25% {\n    transform: translate(40%, -20%) scale(1.05);\n  }\n  50% {\n    transform: translate(60%, -40%) scale(0.95);\n  }\n  75% {\n    transform: translate(20%, -60%) scale(1.1);\n  }\n  100% {\n    transform: translate(-50%, -50%) scale(1);\n  }\n"]);return sp=function(){return e},e}function sm(){let e=(0,su._)(["\n  0% {\n    transform: translate(-50%, -50%) scale(1);\n  }\n  25% {\n    transform: translate(-70%, -20%) scale(0.9);\n  }\n  50% {\n    transform: translate(-90%, 10%) scale(1.15);\n  }\n  75% {\n    transform: translate(-60%, -10%) scale(0.85);\n  }\n  100% {\n    transform: translate(-50%, -50%) scale(1);\n  }\n"]);return sm=function(){return e},e}function sg(){let e=(0,su._)(["\n  0% {\n    transform: translate(-50%, -50%) scale(1);\n  }\n  25% {\n    transform: translate(30%, -80%) scale(1.08);\n  }\n  50% {\n    transform: translate(50%, -100%) scale(0.92);\n  }\n  75% {\n    transform: translate(10%, -90%) scale(1.12);\n  }\n  100% {\n    transform: translate(-50%, -50%) scale(1);\n  }\n"]);return sg=function(){return e},e}function sj(){let e=(0,su._)(["\n  0% {\n    transform: translate(-50%, -50%) scale(1);\n  }\n  25% {\n    transform: translate(-100%, -30%) scale(0.95);\n  }\n  50% {\n    transform: translate(-80%, -60%) scale(1.05);\n  }\n  75% {\n    transform: translate(-120%, -40%) scale(0.88);\n  }\n  100% {\n    transform: translate(-50%, -50%) scale(1);\n  }\n"]);return sj=function(){return e},e}function sf(){let e=(0,su._)(["\n  0% {\n    transform: translate(-50%, -50%) scale(1);\n  }\n  25% {\n    transform: translate(50%, 40%) scale(1.1);\n  }\n  50% {\n    transform: translate(70%, 60%) scale(0.9);\n  }\n  75% {\n    transform: translate(30%, 50%) scale(1.2);\n  }\n  100% {\n    transform: translate(-50%, -50%) scale(1);\n  }\n"]);return sf=function(){return e},e}let sb=(0,X.i7)(sx()),sv=(0,X.i7)(sh()),sy=(0,X.i7)(sp()),sw=(0,X.i7)(sm()),sC=(0,X.i7)(sg()),sk=(0,X.i7)(sj()),sS=(0,X.i7)(sf()),s_=["var(--chakra-colors-aurora-300)","var(--chakra-colors-seafoam-300)","var(--chakra-colors-deepocean-200)","var(--chakra-colors-evergreen-200)","var(--chakra-colors-sky-300)"],sI={"blob-1":sb,"blob-2":sv,"blob-3":sy,"blob-4":sw,"blob-5":sC,"blob-6":sk,"blob-7":sS},sA=[{id:"blob-1",defaultColor:s_[0],size:"30vw",initialPosition:{x:"40%",y:"20%"},animationDuration:"16s",animationDelay:"0s"},{id:"blob-2",defaultColor:s_[1],size:"45vw",initialPosition:{x:"80%",y:"0%"},animationDuration:"18s",animationDelay:"2s"},{id:"blob-3",defaultColor:s_[2],size:"38vw",initialPosition:{x:"0%",y:"50%"},animationDuration:"20s",animationDelay:"4s"},{id:"blob-4",defaultColor:s_[3],size:"42vw",initialPosition:{x:"80%",y:"50%"},animationDuration:"14s",animationDelay:"1s"},{id:"blob-5",defaultColor:s_[4],size:"36vw",initialPosition:{x:"0%",y:"100%"},animationDuration:"22s",animationDelay:"3s"},{id:"blob-6",defaultColor:s_[0],size:"44vw",initialPosition:{x:"80%",y:"100%"},animationDuration:"17s",animationDelay:"5s"},{id:"blob-7",defaultColor:s_[2],size:"39vw",initialPosition:{x:"0%",y:"0%"},animationDuration:"19s",animationDelay:"6s"}],sR=e=>{let{colors:i}=e,t=(0,d.useMemo)(()=>{if(!i||0===i.length)return s_;let e=[];for(let t=0;t<sA.length;t++)e.push(i[t%i.length]);return e},[i]);return(0,s.jsx)(E.a,{position:"absolute",top:0,insetStart:0,insetEnd:0,bottom:0,overflow:"hidden",zIndex:-1,bg:"sky.100",children:sA.map((e,i)=>(0,s.jsx)(E.a,{position:"absolute",width:e.size,height:e.size,borderRadius:"50%",background:t[i],filter:"blur(40px)",opacity:.6,insetStart:e.initialPosition.x,top:e.initialPosition.y,transform:"translate(-50%, -50%)",transition:"background-color 2s ease-in-out",sx:{animation:"".concat(sI[e.id]," ").concat(e.animationDuration," ease-in-out infinite alternate"),animationDelay:e.animationDelay}},e.id))})},sE=e=>{let{type:i,isDragOver:t,openFilePicker:n,handleDragOver:l,handleDragLeave:r,handleDrop:o,searchInput:a,setSearchInput:d,isSearching:c,searchResults:u,hasSearched:x,handleCompanySelect:h,hideInputPanel:p}=e;switch(i){case"upload-image":return(0,s.jsxs)(I.s,{flex:1,direction:"column",align:"center",justify:"center",p:12,border:"2px dashed",borderColor:t?"blue.400":"gray.300",borderRadius:"lg",bg:t?"blue.50":"white",cursor:"pointer",_hover:{borderColor:"gray.400",bg:"gray.50"},onClick:n,onDragOver:l,onDragLeave:r,onDrop:o,transition:"all 0.3s",children:[(0,s.jsx)(P.g,{icon:D.JmV,size:"3x",color:"#A0AEC0"}),(0,s.jsx)(m.E,{mt:"4",fontSize:"lg",fontWeight:"600",color:"gray.700",children:t?(0,s.jsx)(b.x6,{id:"FGEMuN"}):(0,s.jsx)(b.x6,{id:"gumZGX"})}),(0,s.jsx)(m.E,{mt:"2",fontSize:"sm",color:"gray.500",children:(0,s.jsx)(b.x6,{id:"8Sd8uY"})})]});case"company-search":return(0,s.jsxs)(I.s,{flex:1,direction:"column",p:6,bg:"white",borderRadius:"lg",border:"1px solid",borderColor:"gray.200",gap:4,overflow:"hidden",children:[(0,s.jsxs)(eY.T,{spacing:3,align:"stretch",children:[(0,s.jsx)(m.E,{fontSize:"sm",color:"gray.500",children:"Search for a company to use their brand colors, logo and fonts"}),(0,s.jsxs)(E.a,{position:"relative",children:[(0,s.jsx)(eR.p,{placeholder:"Enter company name…",value:a,onChange:e=>d(e.target.value),size:"md"}),c&&(0,s.jsx)($.y,{size:"sm",color:"red",position:"absolute",insetEnd:"3"})]})]}),u.length>0&&(0,s.jsx)(E.a,{flex:1,overflowY:"scroll",children:(0,s.jsx)(eY.T,{spacing:"2",align:"stretch",children:u.map(e=>(0,s.jsxs)(O.z,{p:"3",bg:"gray.50",borderRadius:"md",border:"1px solid",borderColor:"gray.200",cursor:"pointer",_hover:{bg:"blue.50",borderColor:"blue.200"},onClick:()=>{h(e),p()},children:[e.icon&&(0,s.jsx)(T._,{src:e.icon,alt:e.name,w:8,h:8,objectFit:"contain",borderRadius:"full"}),(0,s.jsxs)(E.a,{flex:"1",children:[(0,s.jsx)(m.E,{fontWeight:"600",fontSize:"sm",children:e.name}),(0,s.jsx)(m.E,{fontSize:"xs",color:"gray.500",children:e.domain})]})]},e.domain))})}),!c&&x&&a.length>=2&&0===u.length&&(0,s.jsxs)(I.s,{flex:1,direction:"column",align:"center",justify:"center",p:8,color:"gray.500",children:[(0,s.jsxs)(m.E,{fontSize:"sm",textAlign:"center",children:['No companies found for "',a,'"']}),(0,s.jsx)(m.E,{fontSize:"xs",textAlign:"center",mt:1,children:"Try searching with a different company name"})]}),a.length<2&&(0,s.jsxs)(I.s,{flex:1,direction:"column",align:"center",justify:"center",p:8,color:"gray.400",children:[(0,s.jsx)(P.g,{icon:D.MjD,size:"2x"}),(0,s.jsx)(m.E,{fontSize:"sm",textAlign:"center",mt:3,children:"Start typing to search for companies"})]})]});case"website-screenshot":return(0,s.jsxs)(I.s,{flex:1,direction:"column",align:"center",justify:"center",p:8,bg:"white",borderRadius:"lg",border:"1px solid",borderColor:"gray.200",gap:2,children:[(0,s.jsxs)(O.z,{justify:"center",align:"center",spacing:2,children:[(0,s.jsx)(P.g,{icon:D.Bwz,color:"gray.600"}),(0,s.jsx)(m.E,{fontSize:"lg",fontWeight:"600",color:"gray.700",children:"Website screenshot (coming soon)"})]}),(0,s.jsx)(m.E,{fontSize:"sm",color:"gray.500",textAlign:"center",children:"Enter a website URL to capture its design and colors"})]});default:return null}};var sT=function(e){return e.DISALLOWED_DOMAIN="DISALLOWED_DOMAIN",e.USE_GOOGLE_IMPORT="USE_GOOGLE_IMPORT",e.USE_FILE_IMPORT="USE_FILE_IMPORT",e.INVALID_URL="INVALID_URL",e}(sT||{});let sD="26vh",sP="100px",sz=e=>{let{type:i,selectedType:t,icon:n,children:l,onClick:r}=e;return(0,s.jsx)(f.$,{size:"sm",variant:t===i?"plainSelected":"plain",leftIcon:(0,s.jsx)(P.g,{icon:n}),onClick:()=>r(t===i?null:i),children:l})},sO=()=>{let e=(0,sr.V)("Input",{variant:"outline"}),[i,t]=(0,d.useState)(null),[n,l]=(0,d.useState)(""),[r,o]=(0,d.useState)(""),[a,c]=(0,d.useState)(null),[u,x]=(0,d.useState)(!1),[h,p]=(0,d.useState)(!1),[g,j]=(0,d.useState)({type:null,isContentVisible:!1}),[v,y]=(0,d.useState)([]),C=(0,et.d)(),k=(0,d.useCallback)(()=>{j(e=>({...e,isContentVisible:!1})),setTimeout(()=>{j({type:null,isContentVisible:!1})},300)},[]),S=(0,d.useCallback)(e=>{null===e?(j(e=>({...e,isContentVisible:!1})),setTimeout(()=>{j({type:null,isContentVisible:!1})},300)):(j(i=>({type:e,isContentVisible:null!==i.type})),null===g.type&&setTimeout(()=>{j(e=>({...e,isContentVisible:!0}))},300))},[g.type]),{searchCompanies:_,getBrandInfo:A,isSearching:M,searchResults:F,setSearchResults:N}=sc(),[L,G]=(0,d.useState)(!1);(0,d.useEffect)(()=>{let e=setTimeout(()=>{if(!n||n.length<2){N([]),G(!1);return}try{_(n),G(!0)}catch(e){N([]),G(!0)}},300);return()=>clearTimeout(e)},[n,_,N]);let B=(0,d.useCallback)(e=>{let i=[];(null==e?void 0:e.primaryColors)&&Array.isArray(e.primaryColors)&&i.push(...e.primaryColors),i.length>0&&y(i)},[]),U=(0,d.useCallback)(async e=>{c(e),N([]),G(!1),l("");try{let i=await A(e.domain);i&&B(i)}catch(e){console.error("Failed to get brand info:",e)}},[N,A,B]),W=(0,d.useCallback)(e=>{let i=(0,z.gx)();if(!i)return void console.error("Could not find workspace id");if(0===e.length)return;let n=e.filter(e=>e.type.startsWith("image/"));if(0===n.length)return void C({title:(0,s.jsx)(b.x6,{id:"eC1gV9"}),description:(0,s.jsx)(b.x6,{id:"wdZZIf"}),status:"error",duration:3e3,isClosable:!0});let l=n[0],r=URL.createObjectURL(l),o={id:crypto.randomUUID(),src:r,name:l.name,isUploading:!0};t(o),(0,e1.QM)(l,i,{onUploadComplete:e=>{t(i=>(null==i?void 0:i.id)===o.id?{...i,src:e.src,isUploading:!1}:i)},onUploadFailed:()=>{t(null),C({title:(0,s.jsx)(b.x6,{id:"b3Thhd"}),description:(0,s.jsx)(b.x6,{id:"nkNfWu"}),status:"error",duration:3e3,isClosable:!0})}},"node")},[C]),{inputElement:V,onClick:H}=(0,sd.c)({handleFilesCallback:W,multiple:!1,accept:"image/*"}),X=(0,d.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),p(!0)},[]),K=(0,d.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),p(!1)},[]),J=(0,d.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),p(!1);let i=Array.from(e.dataTransfer.files);i.length>0&&W(i)},[W]),q=(0,d.useCallback)(async(e,i,t)=>{let s,n,l={...e,prompt:e.prompt?"".concat(e.prompt,". ").concat(i):i},r=await (0,sa.K8)({promptKey:"GenerateThemeFromInput",variables:l});try{if(s="string"==typeof r?JSON.parse(r):r,"complete"===s.response.type)n=s.response.data;else throw Error("Not a complete theme generation response")}catch(e){throw Error("Invalid AI response format for theme generation")}return n.name&&""!==n.name.trim()||(n.name=t),n},[]),Q=(0,d.useCallback)(async()=>{let e=i&&!i.isUploading,t=r.trim();if(!e&&!t&&!a)return void C({title:"Input Required",description:"Please upload an image or enter a description to generate themes",status:"error",duration:3e3,isClosable:!0});x(!0);try{let t,n,l=null;if(e)t=i.src;else if(a&&!(l=await A(a.domain)))throw Error("Could not retrieve brand information for the selected company");if(l){let e=l.company.kind||"professional";n={prompt:"Company: ".concat(l.name," (").concat(l.domain,"). ").concat(r||"Generate a ".concat(e," theme based on this company brand.")),extractedColors:l.primaryColors},l.fonts&&l.fonts.length>0&&(n.extractedFonts=l.fonts)}else n=t?{imageUrl:t,prompt:r||void 0}:{prompt:r||"Generate a professional theme"};let o=await Promise.all([{prompt:"Light theme with white/light gray page background, white card backgrounds, and use brand colors as accents. Keep it clean and minimal.",name:"Light & Clean"},{prompt:"Light theme with brand accent color as the page background, but keep cards light/white to create contrast. Use brand colors boldly for the overall page feel.",name:"Light & Colorful"},{prompt:"Dark theme with dark card backgrounds and dark page background. Use brand colors as accent highlights against the dark backgrounds.",name:"Dark & Unified"},{prompt:"Dark theme with dark card backgrounds but use a dark brand accent color for the page background. Create contrast between card, page and text.",name:"Dark & Contrast"}].map(e=>q(n,e.prompt,e.name))),d=(null==l?void 0:l.logoUrl)?l.logoUrl:void 0;C({title:(0,s.jsx)(b.x6,{id:"0oVUMI"}),description:(0,s.jsx)(b.x6,{id:"S3Ou2+"}),status:"success",duration:3e3,isClosable:!0}),w.R.emit("setThemeConfigurationView",{view:"selection",generatedThemes:o,logoUrl:d})}catch(t){console.error("Theme generation failed:",t);let e=(0,s.jsx)(b.x6,{id:"fXdlhE"}),i=(0,s.jsx)(b.x6,{id:"PQa7+H"});"DISALLOWED_DOMAIN"===t.message?(e=(0,s.jsx)(b.x6,{id:"lHX4lA"}),i=(0,s.jsx)(b.x6,{id:"URSRoC"})):"INVALID_URL"===t.message?(e=(0,s.jsx)(b.x6,{id:"sBZMWb"}),i=(0,s.jsx)(b.x6,{id:"oZDaL1"})):"USE_FILE_IMPORT"===t.message&&(e=(0,s.jsx)(b.x6,{id:"tIpDrH"}),i=(0,s.jsx)(b.x6,{id:"6/x2q3"})),C({title:e,description:i,status:"error",duration:5e3,isClosable:!0})}finally{x(!1)}},[i,r,a,A,C,q]),Z=!u&&(i&&!i.isUploading||r.trim())||a,Y=null!==g.type;return(0,s.jsxs)(I.s,{pt:"5vh",minH:"100vh",justify:"center",align:"flex-start",position:"relative",overflow:"scroll",children:[(0,s.jsx)(sR,{colors:v}),(0,s.jsx)(f.$,{leftIcon:(0,s.jsx)(P.g,{icon:D.CeG}),variant:"ghost",position:"absolute",top:"2.5",zIndex:10,insetStart:2,onClick:()=>{w.R.emit("setThemeConfigurationView",{view:"splash"})},children:(0,s.jsx)(b.x6,{id:"iH8pgl"})}),(0,s.jsxs)(eY.T,{maxW:"100%",w:"4xl",py:"2vh",px:4,minH:"60vh",justify:"flex-start",gap:12,children:[(0,s.jsxs)(eY.T,{spacing:"4",align:"center",children:[(0,s.jsx)(iS.D,{as:"h1",variant:"brand",fontWeight:"600",size:"2xl",textAlign:"center",letterSpacing:"tight",children:(0,s.jsx)(b.x6,{id:"jVFVXt"})}),(0,s.jsx)(m.E,{textAlign:"center",color:"gray.600",maxW:"lg",children:(0,s.jsx)(b.x6,{id:"6Zb95e",values:{GAMMA_PROPER_NOUN:ea.On}})})]}),(0,s.jsxs)(I.s,{direction:"column",w:"100%",gap:8,children:[(0,s.jsx)(I.s,{flex:"1",w:"100%",direction:"column",justify:"flex-start",align:"stretch",overflow:"hidden",children:(0,s.jsx)(eY.T,{spacing:"4",children:(0,s.jsxs)(R.B,{display:"flex",direction:"column",justifyContent:"space-between",__css:{...e.field,"&:focus-within":e.field._focus},minH:sD,flex:1,pt:1,pb:3,children:[(0,s.jsx)(E.a,{flex:1,children:(0,s.jsx)(so.T,{variant:"unstyled",resize:"none",placeholder:"Describe the theme you'd like to create…",value:r,onChange:e=>o(e.target.value),size:"lg",h:"100%"})}),(0,s.jsx)(E.a,{overflowX:"scroll",w:"100%",flexShrink:0,children:(i||a)&&(0,s.jsxs)(O.z,{spacing:0,children:[i&&(0,s.jsxs)(E.a,{position:"relative",w:sP,h:sP,flexShrink:0,role:"group",p:"6px",children:[(0,s.jsxs)(E.a,{borderRadius:"lg",overflow:"hidden",bg:"white",w:"100%",h:"100%",border:"1px solid",borderColor:"gray.200",children:[(0,s.jsx)(T._,{src:i.src,alt:i.name,h:"100%",objectFit:"cover",w:"100%"}),i.isUploading&&(0,s.jsx)(I.s,{position:"absolute",top:"0",insetStart:"0",insetEnd:"0",bottom:"0",bg:"blackAlpha.600",align:"center",justify:"center",overflow:"hidden",borderRadius:"lg",children:(0,s.jsx)($.y,{position:"absolute",color:"white"})})]}),(0,s.jsx)(e0.K,{opacity:0,_groupHover:{opacity:1},transitionProperty:"common",transitionDuration:"normal",position:"absolute",top:"0",insetEnd:"0",size:"xs",onClick:()=>{t(null),y([])},icon:(0,s.jsx)(P.g,{icon:D.Jyw}),"aria-label":"Remove image"})]}),a&&(0,s.jsxs)(E.a,{position:"relative",w:sP,h:sP,flexShrink:0,role:"group",p:"6px",children:[(0,s.jsxs)(E.a,{borderRadius:"lg",bg:"white",w:"100%",h:"100%",border:"1px solid",borderColor:"gray.200",p:"2",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",children:[a.icon&&(0,s.jsx)(T._,{src:a.icon,alt:a.name,w:8,h:8,objectFit:"contain",borderRadius:"full",mb:1}),(0,s.jsx)(m.E,{fontSize:"xs",fontWeight:"600",noOfLines:2,children:a.name})]}),(0,s.jsx)(e0.K,{opacity:0,_groupHover:{opacity:1},transitionProperty:"common",transitionDuration:"normal",position:"absolute",top:"0",insetEnd:"0",size:"xs",onClick:()=>{c(null),y([])},icon:(0,s.jsx)(P.g,{icon:D.Jyw}),"aria-label":"Remove company"})]})]})}),(0,s.jsxs)(O.z,{spacing:2,flexWrap:"wrap",children:[(0,s.jsx)(sz,{type:"upload-image",selectedType:g.type,icon:D.QLR,onClick:S,children:"Upload image"}),(0,s.jsx)(sz,{type:"company-search",selectedType:g.type,icon:D.MjD,onClick:S,children:"Search company brand"}),(0,s.jsx)(sz,{type:"website-screenshot",selectedType:g.type,icon:D.Bwz,onClick:S,children:"Use website screenshot"})]})]})})}),(0,s.jsx)(E.a,{h:Y?sD:0,w:"100%",overflow:"hidden",transition:"height 0.4s ease-in-out, opacity 0.3s ease-in-out",opacity:+!!Y,children:(0,s.jsxs)(E.a,{w:"100%",h:sD,display:"flex",flexDirection:"column",opacity:+!!g.isContentVisible,transition:"opacity 0.3s ease-in-out",pointerEvents:g.isContentVisible?"auto":"none",position:"relative",children:[(0,s.jsx)(sE,{type:g.type,isDragOver:h,openFilePicker:H,handleDragOver:X,handleDragLeave:K,handleDrop:J,searchInput:n,setSearchInput:l,isSearching:M,searchResults:F,hasSearched:L,handleCompanySelect:U,hideInputPanel:k}),(0,s.jsx)(f.$,{position:"absolute",top:"2",insetEnd:"2",size:"sm",variant:"ghost",zIndex:10,onClick:k,children:(0,s.jsx)(P.g,{icon:D.GRI})})]})})]}),(0,s.jsx)(f.$,{leftIcon:(0,s.jsx)(P.g,{icon:e$.Ys0}),colorScheme:"blue",size:"lg",onClick:Q,isLoading:u,loadingText:"Generating theme...",isDisabled:!Z,variant:"solid",children:(0,s.jsx)(b.x6,{id:"BLiHRC"})})]}),V]})};var sM=t(94497),sF=t(68301);let sN=(e,i)=>({build:{label:(0,s.jsx)(b.x6,{id:"abydST"}),description:(0,s.jsx)(b.x6,{id:"n1Ux1f"}),imageComponent:(0,s.jsx)(I.s,{h:"100%",bg:"purple.200",w:"100%",align:"center",justify:"center",color:"purple.600",transitionProperty:"filter",transitionDuration:"normal",_groupHover:{filter:"brightness(1.1)"},children:(0,s.jsx)(P.g,{icon:e$.l8N,size:"5x"})})},import:{label:(0,s.jsx)(b.x6,{id:"F6aY4g"}),description:(0,s.jsx)(b.x6,{id:"G++9tI"}),imageComponent:(0,s.jsx)(I.s,{h:"100%",bg:e?"teal.200":"gray.200",w:"100%",align:"center",justify:"center",color:e?"teal.600":"gray.600",transitionProperty:"filter",transitionDuration:"normal",_groupHover:{filter:"brightness(1.1)"},children:(0,s.jsx)(P.g,{icon:e$.$MS,size:"5x"})}),isComingSoon:!e,isBeta:!0},...i?{generate:{label:(0,s.jsx)(b.x6,{id:"xuOW8f"}),description:(0,s.jsx)(b.x6,{id:"dwMAyM"}),imageComponent:(0,s.jsx)(I.s,{h:"100%",bg:"orange.200",w:"100%",align:"center",justify:"center",color:"orange.600",transitionProperty:"filter",transitionDuration:"normal",_groupHover:{filter:"brightness(1.1)"},children:(0,s.jsx)(P.g,{icon:e$.Ys0,size:"5x"})}),isBeta:!0}}:{}}),sL=()=>{let e=(0,sF.u)("themeImportAi"),i=(0,sF.u)("generateTheme"),t=sN(e,i);return(0,s.jsx)(E.a,{pt:"5vh",minH:"100vh",bg:"titanium.50",children:(0,s.jsx)(M.m,{maxW:"3xl",children:(0,s.jsxs)(R.B,{spacing:"8",children:[(0,s.jsx)(iS.D,{as:"h1",variant:"brand",fontWeight:"600",size:"2xl",textAlign:"center",letterSpacing:"tight",children:(0,s.jsx)(b.x6,{id:"FiwgR9"})}),(0,s.jsx)(R.B,{direction:"row",justify:"center",align:"center",alignItems:"stretch",spacing:"4",children:Object.entries(t).filter(e=>{let[t]=e;return"generate"!==t||i}).map(e=>{let[i,t]=e;return(0,s.jsx)(sM.V,{"data-testid":"splash-go-to-".concat(i),label:t.label,description:t.description,imageUrl:t.thumbnail,imageComponent:t.imageComponent,isBeta:t.isBeta,onClick:()=>{w.R.emit("setThemeConfigurationView",{view:i})},ctaIcon:(0,s.jsx)(P.g,{icon:D.dmS}),ctaLabel:(0,s.jsx)(b.x6,{id:"xGVfLh"})},i)})}),(0,s.jsx)(m.E,{textAlign:"center",color:"gray.600",children:(0,s.jsx)(b.x6,{id:"ekvthG",components:{0:(0,s.jsx)(f.$,{"data-testid":"splash-go-to-editor",fontWeight:"600",variant:"link",color:"gray.900",textDecoration:"underline",onClick:()=>{w.R.emit("setThemeConfigurationView",{view:"editor"})}})}})})]})})})};var sG=t(75178),sB=t(2241),sU=t(83817),sW=t.n(sU),sV=t(58495),sH=t(8266),s$=t(53587),sX=t(83743),sK=t(68364),sJ=t(45574);t(7929),t(1136);let sq=e=>{let{uploadedImages:i,setUploadedImages:t,setIsLoading:n}=e,l=(0,x.GV)(e2.aQ),{currentWorkspace:r}=(0,z.ur)(),{orgId:o,templateId:c}=(0,y.PJ)(l||(null==r?void 0:r.id),"themeBackground"),u=(0,et.d)(),[h,p]=(0,d.useState)(0),[g,j]=(0,d.useState)(!1),f=(0,d.useCallback)(e=>{let{file:i,tempUrl:s}=e;n(!0);let l=s;i.type&&(0,e3.aI)(i.type)&&(l="HEIC_tempId_".concat((0,sV.Ak)())),t(e=>[...e,{tempUrl:l,name:i.name,src:null,showPlaceholder:!0,uploadStatus:e6.A.Uploading}])},[n,t]),v=(0,d.useCallback)(e=>{t(i=>i.map(i=>i.name===e.name?{...i,tempUrl:null,...(0,sJ.yK)({result:e,isError:!1})}:i)),p(e=>e+1)},[t]);(0,d.useEffect)(()=>{n(!i.every(e=>"optimized"===e.uploadResultStep))},[n,i]);let w=(0,d.useCallback)(()=>{u({title:"Error uploading images, please try again",status:"error",duration:3e3,isClosable:!0}),p(e=>e+1)},[u]),C=(0,d.useMemo)(()=>{if(!o)throw Error("Tried uploading an image with no orgId");return e1.Fk.createUppyInstance(o,{onUploadStart:f,onUploadComplete:v,onUploadFailed:w},"themeBackground",50,"image",c)},[h,o,f,v,w,c]),k=()=>(0,s.jsxs)(E.a,{pos:"relative",w:"100%",h:"100%",children:[(0,s.jsx)(I.s,{pos:"absolute",inset:0,justify:"center",align:"center",zIndex:1,pointerEvents:"none",mt:-14,color:"gray.600",children:(0,s.jsx)(P.g,{icon:td.vMo,size:"3x"})}),o&&(0,s.jsx)(sK.OX,{width:"100%",note:eF.Ru._({id:"7TtsoC"}),uppy:C,locale:{strings:{browse:eF.Ru._({id:"wZ9s+A"})}}})]});return i.length>0?(0,s.jsxs)(eY.T,{align:"flex-start",spacing:4,onDragEnter:e=>{e.preventDefault(),e.stopPropagation(),j(!0)},children:[g&&(0,s.jsx)(k,{}),(0,s.jsx)(sX.r,{gap:2,columns:{base:2,"2xl":3},children:i.map(e=>{let{src:i,meta:n,name:l,tempUrl:r}=e||{},o=i?(0,e3.Ub)(i,{width:500}):void 0;return(0,s.jsxs)(R.B,{spacing:1,position:"relative",role:"group",children:[(0,s.jsx)(T._,{src:o||r||"",alt:"",ignoreFallback:!0,borderRadius:"md"}),(0,s.jsx)(a.Tz,{label:(0,s.jsx)(b.x6,{id:"ZTnXof"}),placement:"top",children:(0,s.jsx)(e0.K,{"aria-label":eF.Ru._({id:"Rz0Yis"}),icon:(0,s.jsx)(P.g,{icon:D.yLS}),onClick:()=>{t(i=>i.filter(i=>i.name!==e.name))},isRound:!0,position:"absolute",top:1,right:1,size:"sm",color:"red.600",opacity:0,_hover:{color:"red.600"},_groupHover:{opacity:1}})}),n&&n.width&&n.height&&(0,s.jsxs)(m.E,{fontSize:"xs",children:[n.width,"\xd7",n.height,"px"]}),l&&(0,s.jsx)(m.E,{fontSize:"xs",lineHeight:4,children:l})]},e.tempUrl)})})]}):(0,s.jsx)(k,{})};var sQ=t(49172);let sZ=e=>e.backgroundType===iN.h.IMAGE,sY={...sH.cJ,accentId:void 0},s0=e=>{let{theme:i,accentImages:t,updateAccentImages:n}=e,[l,r]=(0,d.useState)(!1),[o,a]=(0,d.useState)(null),[c,u]=(0,d.useState)(null),x=o&&!!o.accentId,h=(0,sF.u)("bulkUploadAccentImages"),p=(0,d.useCallback)(()=>{u(sY),a(sY)},[]),m=(0,d.useCallback)(()=>{a(null),u(null)},[]),g=(0,d.useCallback)(e=>{let i=e||o;if(!i)return;let s={...i,source:s$.j,originalSource:i.source,accentId:(0,sV.Ak)()},l=t||[];if(x){let e=l.findIndex(e=>e.accentId===o.accentId);if(-1===e)return void console.warn("[AccentImagePicker] Could not find accent image to edit");n({accentBackgrounds:[...l.slice(0,e),s,...l.slice(e+1)]})}else n({accentBackgrounds:[...l,s]});m()},[t,o,x,m,n]),v=(0,d.useCallback)(e=>{n({accentBackgrounds:(t||[]).filter(i=>i.accentId!==e.accentId)})},[t,n]),y=(0,d.useCallback)(e=>{u({...e,source:e.originalSource}),a({...e,source:e.originalSource})},[]),w=(0,d.useCallback)(e=>{if(e.source===e1.ae.key||e.source===e1.Pl.key)return void g(e);if(e.source===e1.mx.key){var i,t,s,n;(null==(i=e.image)?void 0:i.uploadStatus)===e6.A.Uploading?r(!0):(null==(t=e.image)?void 0:t.uploadStatus)===e6.A.Done&&(null==(s=e.image)?void 0:s.uploadResultStep)==="optimized"?r(!1):(null==(n=e.image)?void 0:n.uploadStatus)===e6.A.Error&&r(!1)}a(e)},[g]),C=(0,d.useMemo)(()=>!sW()(o,c),[o,c]),k=(0,ii.Mw)(i),[S,_]=(0,d.useState)([]),[I,A]=(0,d.useState)(!1),E=(0,d.useCallback)(()=>{_([]),A(!1)},[]),T=(0,d.useCallback)(()=>{n({accentBackgrounds:[...S.map(e=>({type:iN.h.IMAGE,source:s$.j,originalSource:"image.custom",image:e,accentId:(0,sV.Ak)()})),...t||[]]}),E()},[S,t,n,E]);return o?(0,s.jsxs)(R.B,{p:6,children:[(0,s.jsx)(te,{setBackground:w,background:o,isValidSource:sZ,defaultMessage:(0,s.jsxs)(e_.F,{children:[(0,s.jsx)(i2._,{}),(0,s.jsx)(b.x6,{id:"VPwqDS"})]}),isDark:k}),(0,s.jsxs)(j.e,{pt:6,display:"flex",children:[(0,s.jsx)(f.$,{variant:"ghost",onClick:m,children:(0,s.jsx)(b.x6,{id:"dEgA5A"})}),(0,s.jsx)(f.$,{variant:"solid",onClick:()=>g(),isLoading:l,isDisabled:!C,flex:1,children:x?(0,s.jsx)(b.x6,{id:"tfDRzk"}):(0,s.jsx)(b.x6,{id:"B6vyEa"})})]})]}):(0,s.jsxs)(R.B,{spacing:6,children:[(0,s.jsxs)(R.B,{spacing:3,children:[(0,s.jsx)(f.$,{leftIcon:(0,s.jsx)(P.g,{icon:D.QLR}),alignSelf:"flex-start",onClick:p,children:(0,s.jsx)(b.x6,{id:"5phU36"})}),h&&(0,s.jsx)(sq,{uploadedImages:S,setUploadedImages:_,setIsLoading:A}),t&&0!=t.length&&(0,s.jsx)(sQ.A,{accentImages:t,isDark:k,handleDelete:v,handleItemClick:y,editType:"themeBackground"})]}),S.length>0&&(0,s.jsxs)(j.e,{display:"flex",w:"100%",bottom:0,left:0,bg:"white",py:3,px:6,borderTop:"1px",borderColor:"gray.300",children:[(0,s.jsx)(f.$,{variant:"ghost",onClick:E,children:(0,s.jsx)(b.x6,{id:"dEgA5A"})}),(0,s.jsx)(f.$,{variant:"solid",onClick:T,isLoading:I,flex:1,children:(0,s.jsx)(b.x6,{id:"elVIdl",values:{0:S.length}})})]})]})},s1=(0,d.memo)(()=>{let e=(0,x.jL)(),i=(0,x.GV)(C.eo);if(!i)throw Error("Theme is undefined");return(0,s.jsxs)(iQ.t,{variant:"soft-rounded",isFitted:!0,size:"sm",children:[(0,s.jsxs)(iZ.w,{children:[(0,s.jsx)(iY.o,{children:(0,s.jsx)(b.x6,{id:"O+LXs1"})}),(0,s.jsx)(iY.o,{children:(0,s.jsx)(b.x6,{id:"COXEr5"})})]}),(0,s.jsxs)(i0.T,{children:[(0,s.jsx)(i1.K,{px:"0",children:(0,s.jsxs)(R.B,{children:[(0,s.jsxs)(eI.MJ,{children:[(0,s.jsx)(eA.l,{children:(0,s.jsx)(b.x6,{id:"Jvf2ff"})}),(0,s.jsx)(eI.eK,{mb:"4",children:(0,s.jsx)(b.x6,{id:"nM7mjF"})}),(0,s.jsx)(so.T,{defaultValue:i.config.stylePrompt,onChange:i=>{e((0,C.jI)({stylePrompt:i.target.value}))}})]}),(0,s.jsxs)(R.B,{children:[(0,s.jsx)(m.E,{children:(0,s.jsx)(b.x6,{id:"voRH7M"})}),(0,s.jsx)(O.z,{alignItems:"flex-start",spacing:4,children:s6.map((e,i)=>(0,s.jsxs)(R.B,{flex:"1",children:[(0,s.jsx)(T._,{src:e.url,borderRadius:"md"}),(0,s.jsxs)(m.E,{fontSize:"xs",fontFamily:"monospace",children:[(0,s.jsxs)(sB.B.span,{color:"gray.500",children:[e.prompt(),","]})," ",(0,s.jsx)(sB.B.span,{fontWeight:"600",children:e.stylePrompt()})]})]},i))})]})]})}),(0,s.jsxs)(i1.K,{px:"0",children:[(0,s.jsx)(eI.MJ,{children:(0,s.jsx)(eI.eK,{mb:"4",children:(0,s.jsx)(b.x6,{id:"0imEek"})})}),(0,s.jsx)(s0,{accentImages:i.config.accentBackgrounds,updateAccentImages:i=>{let{accentBackgrounds:t}=i;return e((0,C.r4)({accentBackgrounds:t}))},theme:i})]})]})]})});s1.displayName="AccentImagesSettings";let s6=[{url:"/_next/static/media/golden-gate-bridge-photography.86a71fac.png",prompt:()=>eF.Ru._({id:"0dIaoJ"}),stylePrompt:()=>eF.Ru._({id:"A6PocU"})},{url:"/_next/static/media/golden-gate-bridge-illustration.c25343ad.png",prompt:()=>eF.Ru._({id:"0dIaoJ"}),stylePrompt:()=>eF.Ru._({id:"dannsm"})},{url:"/_next/static/media/golden-gate-bridge-claymation.0c82160a.png",prompt:()=>eF.Ru._({id:"0dIaoJ"}),stylePrompt:()=>eF.Ru._({id:"E72rOz"})}];var s5=t(5091),s2=t(91140);let s4=async(e,i,s)=>{try{let s=(await Promise.all([t.e(4266),t.e(451)]).then(t.bind(t,41729))).default,n=(await Promise.all([t.e(4266),t.e(5276)]).then(t.bind(t,13606))).default,l=s.parse(e),r=n.objectify(l);i(r)}catch(e){s(e.message)}},s3=async(e,i,s)=>{try{let s=(await Promise.all([t.e(4266),t.e(451)]).then(t.bind(t,41729))).default,n=(await Promise.all([t.e(4266),t.e(5276)]).then(t.bind(t,13606))).default;s().process(e,{parser:n}).then(e=>{let{css:t}=e;i(t)})}catch(e){s(e.message)}},s8=e=>{let{label:i,initialValue:n,updateValue:l,helperText:r}=e,[o,a]=(0,d.useState)(""),[c,u]=(0,d.useState)(null),[x,h]=(0,d.useState)(),p=(0,tL.lW)(s4,100);return((0,d.useEffect)(()=>{Promise.all([t.e(6171),t.e(6374),t.e(960)]).then(t.bind(t,30960)).then(e=>{h(e.css())})},[]),(0,tL.Vg)(()=>{u(null),n&&s3(n,a,u)},[n],[]),(0,tL.Vg)(()=>{u(null),p(o,l,u)},[o,l,p],[o]),x)?(0,s.jsxs)(eI.MJ,{isInvalid:!!c,children:[(0,s.jsx)(eA.l,{children:i}),c&&(0,s.jsx)(s5.Wt,{children:c}),r&&(0,s.jsx)(eI.eK,{children:r}),(0,s.jsx)(E.a,{border:"1px solid",borderColor:"gray.200",fontSize:"md",children:(0,s.jsx)(d.Suspense,{fallback:(0,s.jsx)("span",{}),children:(0,s.jsx)(s2.j,{value:o,height:"300px",extensions:[x],onChange:a})})})]}):null},s9=(0,d.memo)(()=>{var e,i,t,n,l;let r=(0,x.jL)(),o=(0,x.GV)(C.eo);if(!o)throw Error("Theme is undefined");return(0,s.jsxs)(R.B,{spacing:8,children:[(0,s.jsxs)(eI.MJ,{children:[(0,s.jsx)(eA.l,{children:(0,s.jsx)(b.x6,{id:"S0kLOH"})}),(0,s.jsx)(eR.p,{defaultValue:o.id,readOnly:!0})]}),(0,s.jsxs)(eI.MJ,{children:[(0,s.jsx)(eA.l,{children:(0,s.jsx)(b.x6,{id:"PPYsiY"})}),(0,s.jsx)(so.T,{defaultValue:null==(i=o.config.keywords)||null==(e=i.color)?void 0:e.join(", "),onChange:e=>{r((0,C.RR)({colorKeywords:e.target.value.split(",").map(e=>e.trim()).filter(Boolean)}))}}),(0,s.jsx)(eI.eK,{children:(0,s.jsx)(b.x6,{id:"j3OJ2O"})})]}),(0,s.jsxs)(eI.MJ,{children:[(0,s.jsx)(eA.l,{children:(0,s.jsx)(b.x6,{id:"valYIJ"})}),(0,s.jsx)(so.T,{defaultValue:null==(n=o.config.keywords)||null==(t=n.tone)?void 0:t.join(", "),onChange:e=>{r((0,C.oL)({toneKeywords:e.target.value.split(",").map(e=>e.trim()).filter(Boolean)}))}}),(0,s.jsx)(eI.eK,{children:(0,s.jsx)(b.x6,{id:"j3OJ2O"})})]}),(0,s.jsxs)(eI.MJ,{children:[(0,s.jsx)(eA.l,{children:(0,s.jsx)(b.x6,{id:"1hKEom"})}),(0,s.jsx)(tz.Q7,{defaultValue:o.priority,onChange:(e,i)=>{r((0,C.xu)({priority:Number.isNaN(i)?void 0:i}))},children:(0,s.jsx)(tz.OO,{})}),(0,s.jsx)(eI.eK,{children:(0,s.jsx)(b.x6,{id:"RyAyyY"})})]}),(0,s.jsx)(s8,{label:(0,s.jsx)(b.x6,{id:"3loch2"}),initialValue:null==(l=o.config)?void 0:l.contentStyles,updateValue:e=>r((0,C.gt)({contentStyles:e}))})]})});s9.displayName="AdvancedConfig";let s7={colors:ts,fonts:tG,logo:tq,design:tf,images:s1,advanced:s9},ne=[{id:"colors",testId:"colors",label:()=>eF.Ru._({id:"1HfW/F"}),icon:td.l8N},{id:"fonts",testId:"fonts",label:()=>eF.Ru._({id:"I0oBSl"}),icon:td.tiU},{id:"logo",testId:"logo",label:()=>eF.Ru._({id:"iG7KNr"}),icon:td.r5G,description:()=>eF.Ru._({id:"Zo23+h"})},{id:"design",testId:"design",label:()=>eF.Ru._({id:"f8fH8W"}),description:()=>eF.Ru._({id:"7FMNYC"}),icon:td.ffg},{id:"images",testId:"images",label:()=>eF.Ru._({id:"an5hVd"}),icon:td.yvG},{id:"advanced",testId:"advanced",label:()=>eF.Ru._({id:"sxkWRg"}),description:()=>"Advanced settings that currently only ".concat(ea.On," employees can see."),icon:td.BH7,isForGammaOnly:!0}],ni=(e,i)=>!!e.isForGammaOnly&&!i,nt=()=>{let{isGammaOrgUser:e}=(0,z.ur)(),[i,t]=(0,d.useState)(0),n=(0,F.h5)({base:!0,lg:!1,default:!1}),l=(0,d.useMemo)(()=>ne.filter(i=>!ni(i,e)),[e]),r=(0,d.useCallback)(e=>{t(e)},[]),o=s7[l[i].id];return(0,s.jsxs)(iQ.t,{display:"flex",alignItems:"flex-start",flexDirection:n?"column":"row",variant:"soft-rounded",defaultIndex:0,w:"100%",flex:"1",isLazy:!0,index:i,onChange:r,children:[(0,s.jsx)(iZ.w,{display:"flex",flexDirection:n?"row":"column",overflowX:"auto",position:"sticky",top:"0",p:"2",bg:"white",zIndex:"1",minW:n?"100%":"190px",alignItems:n?"flex-start":"stretch",gap:n?void 0:"1",w:n?"100%":void 0,children:l.map((e,i)=>(0,s.jsx)(iY.o,{"data-testid":"theme-config-tab-".concat(e.testId),justifyContent:"flex-start",whiteSpace:n?"nowrap":void 0,outline:e.isForGammaOnly?"1px dashed var(--chakra-colors-yellow-500)":void 0,children:(0,s.jsxs)(O.z,{spacing:"2.5",fontSize:"sm",children:[(0,s.jsx)(E.a,{color:"deepocean.400",children:(0,s.jsx)(P.g,{icon:e.icon,fixedWidth:!0})}),(0,s.jsx)(m.E,{textAlign:"start",noOfLines:{base:void 0,md:1},whiteSpace:"no-wrap",children:e.label()}),e.isForGammaOnly&&(0,s.jsx)(a.Tz,{label:"Employee only",placement:"top",children:(0,s.jsx)(E.a,{boxSize:"4",color:"yellow.600",children:(0,s.jsx)(sG.T,{})})})]})},i))}),(0,s.jsx)(ed.c,{orientation:n?"horizontal":"vertical"}),(0,s.jsx)(i0.T,{flex:1,minH:0,h:"100%",children:l.map((e,i)=>(0,s.jsxs)(i1.K,{bg:"white",p:{base:3,md:5},pb:{base:5,md:12},overflowY:"auto",h:"100%",maxH:"100%",as:R.B,w:"100%",spacing:{base:"4",md:"6"},children:[(0,s.jsxs)(R.B,{spacing:"2",children:[(0,s.jsx)(iS.D,{size:"md",children:e.label()}),e.description&&(0,s.jsx)(m.E,{fontSize:"sm",color:"gray.600",children:e.description()})]}),(0,s.jsx)(o,{})]},i))})]})};var ns=t(56151),nn=t(30709),nl=t(85813),nr=t(99733),no=t(898),na=t(58809),nd=t(79958);let nc=e=>{let{value:i,onSave:t}=e;return(0,s.jsxs)(eI.MJ,{isInvalid:0===i.length,children:[(0,s.jsx)(ns.F,{defaultValue:i,placeholder:(0,k.Y)(),onSubmit:t,submitOnBlur:!0,color:"gray.700",isPreviewFocusable:!0,fontSize:"xl",fontWeight:"500",children:(0,s.jsxs)(O.z,{spacing:"2",minHeight:10,minW:"10",children:[(0,s.jsx)(nn.l,{px:"1",bg:"gray.50",w:"100%","data-testid":"custom-theme-name-preview",_hover:{bg:"gray.200"}}),(0,s.jsx)(nl.j,{px:"1","data-testid":"custom-theme-name-input"}),(0,s.jsx)(nu,{})]})}),(0,s.jsx)(s5.Wt,{fontWeight:"500",pb:2,children:(0,s.jsx)(b.x6,{id:"iwj88Q"})})]})},nu=()=>{let{isEditing:e,getSubmitButtonProps:i,getCancelButtonProps:t,getEditButtonProps:n}=(0,nr._)();return e?(0,s.jsxs)(j.e,{justifyContent:"center",size:"sm",spacing:0,children:[(0,s.jsx)(a.Tz,{label:(0,s.jsx)(b.x6,{id:"dEgA5A"}),placement:"top",children:(0,s.jsx)(e0.K,{size:"md",colorScheme:"red",variant:"ghost","aria-label":eF.Ru._({id:"dEgA5A"}),icon:(0,s.jsx)(P.g,{icon:e$.yYc}),...t()})}),(0,s.jsx)(a.Tz,{label:(0,s.jsx)(b.x6,{id:"fNzdjk"}),placement:"top",children:(0,s.jsx)(e0.K,{size:"md",colorScheme:"green",variant:"ghost","aria-label":eF.Ru._({id:"fNzdjk"}),icon:(0,s.jsx)(P.g,{icon:e$.e68}),...i(),"data-testid":"save-theme-name-button"})})]}):(0,s.jsx)(I.s,{justifyContent:"center",children:(0,s.jsx)(a.Tz,{label:(0,s.jsx)(b.x6,{id:"+MxT3Q"}),placement:"top",children:(0,s.jsx)(E.a,{children:(0,s.jsx)(e0.K,{size:"md",variant:"ghost",colorScheme:"gray",color:"gray.400","aria-label":eF.Ru._({id:"+MxT3Q"}),icon:(0,s.jsx)(P.g,{icon:e$.hpd}),...n(),ref:null})})})})},nx=()=>{var e;let i=(0,x.GV)(C.TJ),[t,n]=(0,d.useState)(),l=(0,x.jL)(),r=(0,x.GV)(C.sv),o=(0,x.GV)(na.Jo),{data:a,loading:c}=(0,es.eKT)({variables:{id:i},skip:!i||"new"===i}),u=(0,nd.B)(null==o?void 0:o.title);(0,d.useEffect)(()=>{!c&&a&&a.theme&&n(a.theme)},[c,a,n]);let h=(0,d.useCallback)(e=>{let i=e||(0,k.Y)();l((0,C.qv)({name:i}))},[l]);return(0,s.jsxs)(R.B,{spacing:"1.5",children:[(0,s.jsx)(nc,{value:r||(0,k.Y)(),onSave:h}),c?(0,s.jsx)(no.r,{noOfLines:1,fontSize:"sm",maxW:"300px"}):(0,s.jsxs)(m.E,{color:"gray.600",fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",children:[(null==t?void 0:t.createdBy)&&(0,s.jsx)(b.x6,{id:"qeNU2j",values:{0:t.createdBy.displayName}})," ",(null==t?void 0:t.docCount)&&(null==t?void 0:t.docCount)===1&&(null==t?void 0:t.id)===(null==o||null==(e=o.theme)?void 0:e.id)?(0,s.jsx)(b.x6,{id:"On+kRG",values:{docTitle:u,GAMMA_ARTIFACT_PROPER_NOUN:ea.TP},components:{0:(0,s.jsx)("strong",{})}}):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(b.x6,{id:"eVRfvp",values:{GAMMA_ARTIFACT_PROPER_NOUN:ea.TP,GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:ea.Ix,0:(null==t?void 0:t.docCount)||0},components:{0:(0,s.jsx)("strong",{}),1:(0,s.jsx)("strong",{})}})})]})]})},nh=()=>(0,s.jsx)(I.s,{direction:"row",h:"100%",maxH:"100%",overflow:"auto",w:"100%",sx:{label:{fontSize:"sm"}},children:(0,s.jsx)(I.s,{direction:"column",w:"100%",borderInlineStart:"1px solid",borderColor:"gray.200",position:"relative",children:(0,s.jsxs)(I.s,{flex:"1",position:"relative",h:"100%",flexDirection:"column",children:[(0,s.jsx)(I.s,{p:{base:3,md:5},alignItems:"stretch",flexDirection:"column",children:(0,s.jsx)(nx,{})}),(0,s.jsx)(ed.c,{}),(0,s.jsx)(I.s,{w:"100%",overflowY:"hidden",h:"100%",children:(0,s.jsx)(nt,{})})]})})});(0,d.memo)(e=>{let{onTabChange:i,currentTab:t}=e;return(0,s.jsxs)(j.e,{p:2,position:"absolute",top:"3",insetInlineStart:"50%",transform:"translateX(-50%)",zIndex:"sticky",bg:"white",size:"sm",variant:"ghost",borderRadius:"md",boxShadow:"md",children:[(0,s.jsx)(f.$,{borderRadius:"md",bg:"testerDoc"===t?"trueblue.50":"transparent",color:"testerDoc"===t?"trueblue.500":"gray.600",onClick:()=>{i("testerDoc")},"data-testid":"preview-tab-tester-doc",children:(0,s.jsx)(b.x6,{id:"ypSaiK"})}),(0,s.jsx)(f.$,{borderRadius:"md",bg:"currentDoc"===t?"trueblue.50":"transparent",color:"currentDoc"===t?"trueblue.500":"gray.600",onClick:()=>{i("currentDoc")},"data-testid":"preview-tab-current-doc",children:(0,s.jsx)(b.x6,{id:"VJUm9p"})})]})}).displayName="PreviewTabSwitcher";let np=e=>{let{onCancelClick:i,onComplete:t}=e,n=(0,x.GV)(C.eo),l=(0,x.GV)(C.D6);er("editor");let{persistTheme:r,isThemeSaving:o}=el({onComplete:t,flow:"editor"}),c=(0,x.GV)(C.jE),u=(0,d.useCallback)(()=>{r()},[r]);return n?(0,s.jsxs)(ei,{children:[(0,s.jsx)(N,{children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(nh,{}),(0,s.jsx)(U,{children:(0,s.jsx)(I.s,{justifyContent:"flex-end",w:"100%","data-theme-editor-footer":!0,children:(0,s.jsxs)(j.e,{children:[(0,s.jsx)(f.$,{variant:"plain",onClick:i,children:(0,s.jsx)(b.x6,{id:"dEgA5A"})}),(0,s.jsx)(a.Tz,{isDisabled:!l,label:(0,s.jsx)(b.x6,{id:"yz1qqg"}),children:(0,s.jsx)(E.a,{display:"inline-flex",children:(0,s.jsx)(f.$,{variant:"solid",isLoading:o,isDisabled:!c,onClick:u,"data-testid":"custom-theme-save",children:(0,s.jsx)(b.x6,{id:"EsJdRp"})})})})]})})})]})}),(0,s.jsx)(V,{children:(0,s.jsx)(iI,{})})]}):(0,s.jsx)(s.Fragment,{})};var nm=t(79536);let ng=e=>{let{generatedThemes:i,logoUrl:t}=e,[n,l]=(0,d.useState)(0),r=(0,et.d)(),{createTheme:o,isThemeSaving:a}=el({flow:"generate",onComplete:e=>{e&&(0,eo.vd)({theme:e})}}),c=(0,d.useCallback)(e=>({workspaceId:(0,z.gx)(),name:e.name,headingFont:e.headingFont,headingFontWeight:e.headingFontWeight,bodyFont:e.bodyFont,bodyFontWeight:e.bodyFontWeight,config:e.config,priority:1,logoUrl:t}),[t]),u=(0,d.useCallback)((e,i)=>{l(i)},[]),x=(0,d.useCallback)(async()=>{let e=i[n];if(e)try{let i=c(e);await o(i),r({title:(0,s.jsx)(b.x6,{id:"/4Z170"}),description:(0,s.jsx)(b.x6,{id:"zyrV7Y"}),status:"success",duration:3e3,isClosable:!0})}catch(e){console.error("Theme creation failed:",e),r({title:(0,s.jsx)(b.x6,{id:"hKZG2G"}),description:(0,s.jsx)(b.x6,{id:"7Gu+Xl"}),status:"error",duration:5e3,isClosable:!0})}},[i,n,c,o,r]),h=(0,d.useCallback)(()=>{w.R.emit("setThemeConfigurationView",{view:"generate"})},[]),p=i[n],m=(0,d.useCallback)(e=>({id:"preview",name:e.name,headingFont:e.headingFont,headingFontWeight:e.headingFontWeight,bodyFont:e.bodyFont,bodyFontWeight:e.bodyFontWeight,config:e.config,workspaceId:(0,z.gx)(),priority:1,archived:!1,createdTime:new Date().toISOString(),updatedTime:new Date().toISOString(),createdBy:void 0,logoUrl:t}),[t]),g=p?m(p):null;return(0,s.jsxs)(ei,{children:[(0,s.jsx)(N,{children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(B,{children:[(0,s.jsx)(G,{leftIcon:D.CeG,onClick:h,children:(0,s.jsx)(b.x6,{id:"iH8pgl"})}),(0,s.jsx)(L,{children:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(b.x6,{id:"Qp1bwZ"})})})]}),(0,s.jsx)(W,{children:(0,s.jsx)(iD.x,{templateColumns:"1fr 1fr",gap:4,w:"100%",children:i.map((e,i)=>{let t={...m(e),id:"generated-".concat(i)};return(0,s.jsx)(nm.e,{theme:t,isChecked:n===i,variant:"ghost-bordered",onThemeClicked:()=>u(e,i),disableEditing:!0,compact:!0,previewHeightEm:6},i)})})}),(0,s.jsx)(U,{children:(0,s.jsx)(I.s,{justifyContent:"flex-end",w:"100%",children:(0,s.jsx)(f.$,{variant:"solid",colorScheme:"blue",onClick:x,isLoading:a,loadingText:"Creating theme...",children:(0,s.jsx)(b.x6,{id:"EsJdRp"})})})})]})}),(0,s.jsx)(V,{children:(0,s.jsx)(Y,{theme:g})})]})},nj=e=>{let{onThemeCreated:i,getCollaborativeEditorInstance:t}=e,h=(0,x.jL)(),{isOpen:p,onOpen:m,onClose:g}=(0,u.E)({id:"unsaved-changes"}),j=(0,d.useRef)(null);(0,y.II)();let[f,b]=(0,d.useState)(!1),[I,A]=(0,d.useState)("splash"),[R,E]=(0,d.useState)(null),T=(0,d.useCallback)(()=>{A("splash"),E(null),h((0,C.y0)()),b(!1),g()},[h,g]),D=(0,d.useCallback)(()=>{g(),"themeBuilderExit"===j.current?(h((0,C.y0)()),w.R.emit("setThemeConfigurationView",{view:"splash"})):T()},[T,g,h]),P=(0,d.useCallback)(e=>{let{exitType:i}=e;j.current=i;let t=(0,x.KA)().getState();return"splash"===I?void T():"import"===I?void((0,_.dZ)(t)?m():T()):void((0,C.jE)(t)?m():T())},[T,m,I]),z=(0,d.useCallback)(e=>{if(b(!0),h((0,C.aG)()),e.baseTheme){let i=e.baseTheme;e.isNewFork&&(i={...e.baseTheme,id:"new",name:(0,k.Y)()}),h((0,C.Dm)({baseTheme:i})),h((0,C.p0)({originalTheme:i}))}if(null==t?void 0:t()){var i;h((0,C.eE)({json:null==(i=t())?void 0:i.getJSON()}))}A(e.view||"splash")},[h,t]);return((0,d.useEffect)(()=>{w.R.on("openThemeConfiguration",e=>{z(e)}),w.R.on("closeThemeConfiguration",()=>{b(!1),h((0,C.y0)())}),w.R.on("setThemeConfigurationView",e=>{let{view:i,generatedThemes:s,logoUrl:n}=e;if(null==t?void 0:t()){var l;h((0,C.eE)({json:null==(l=t())?void 0:l.getJSON()}))}"splash"===i&&h((0,C.aG)()),"selection"===i&&s&&E({generatedThemes:s,logoUrl:n}),A(i)})},[h,z,t]),(0,d.useEffect)(()=>{"true"===(0,S.sF)().openThemeEditor&&(z({view:"editor"}),(0,c.g5)({query:{...(0,S.sF)(),openThemeEditor:void 0},emitChange:!1}))},[z]),f)?(0,s.jsxs)(a.L8,{isDark:!1,children:[(0,s.jsxs)(n.aF,{returnFocusOnClose:!1,isOpen:f,trapFocus:!1,size:"full",onClose:()=>P({exitType:"genericExit"}),motionPreset:"slideInBottom",children:[(0,s.jsx)(l.m,{}),(0,s.jsxs)(r.$,{h:"calc(100% - 24px)",minH:"calc(100% - 24px)",flex:1,overflow:"hidden",mt:"24px",children:[(0,s.jsx)(o.s,{top:"3",insetEnd:"3",position:"absolute",zIndex:"100",bg:"gray.50"}),"splash"===I&&(0,s.jsx)(sL,{}),"import"===I&&(0,s.jsx)(ik,{}),"generate"===I&&(0,s.jsx)(sO,{}),"selection"===I&&R&&(0,s.jsx)(ng,{generatedThemes:R.generatedThemes,logoUrl:R.logoUrl}),"build"===I&&(0,s.jsx)(sl,{onComplete:i,onExitClick:()=>P({exitType:"themeBuilderExit"})}),"editor"===I&&(0,s.jsx)(np,{onCancelClick:T,onComplete:i})]})]}),(0,s.jsx)(v,{isOpen:p,onClose:g,onConfirm:D})]}):(0,s.jsx)(s.Fragment,{})}},11431:(e,i,t)=>{"use strict";t.d(i,{T:()=>P});var s=t(6029),n=t(30742),l=t(74771),r=t(17920),o=t(40162),a=t(16936),d=t(58959),c=t(23293),u=t(49611),x=t(80314),h=t(3674),p=t(96500),m=t(40691),g=t(40452),j=t(16426),f=t(61204),b=t(74676),v=t(99492),y=t(48621),w=t(19564),C=t(77650),k=t(55729),S=t(30645),_=t(1036),I=t(17789),A=t(81627),R=t(68104),E=t(76096),T=t(49405),D=t(70006);let P=e=>{var i,t,P,z;let{template:O,onBackClick:M,maxHeight:F,showViewTemplateButton:N=!0}=e,{remixThis:L,isLoading:G}=(0,A.L)(),B=(0,T.Z)(),U=async e=>{await B({docId:e,source:"workspace_template"})},W=(0,k.useCallback)(()=>{L(O.id)},[O.id,L]),{data:V,loading:H,error:$}=(0,I.V4M)({variables:{id:null==O?void 0:O.id},skip:!(null==O?void 0:O.id)}),{data:X,loading:K,error:J}=(0,I.el3)({variables:{id:null==O?void 0:O.id},skip:!(null==O?void 0:O.id)}),q=(0,k.useMemo)(()=>(0,D.LN)({docId:O.id,docTitle:O.title}),[O.id,O.title]),Q=K||H||G,Z=null==V||null==(P=V.doc)||null==(t=P.currentSnapshot)||null==(i=t.content)?void 0:i.default;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.r,{children:(0,s.jsxs)(o.B,{align:"center",spacing:2,children:[!!M&&(0,s.jsx)(o.Q,{children:(0,s.jsx)(a.K,{isDisabled:Q,"aria-label":C.Ru._({id:"CKyk7Q"}),icon:(0,s.jsx)(n.g,{}),variant:"plain",size:"sm",onClick:M})}),(0,s.jsx)(o.Q,{children:(0,s.jsxs)(d.z,{spacing:"4",children:[(0,s.jsx)(c.D,{size:"md",noOfLines:2,children:null==O?void 0:O.title}),N&&(0,s.jsx)(u.$,{as:x.N,variant:"plain",size:"sm",href:q,isExternal:!0,flexShrink:"0",rightIcon:(0,s.jsx)(l.p,{}),children:(0,s.jsx)(w.x6,{id:"xHeMqh"})})]})})]})}),(0,s.jsx)(h.s,{}),(0,s.jsx)(p.c,{}),(0,s.jsxs)(E.S,{forceHeight:"100%",children:[Q&&(0,s.jsx)(_.p,{spinnerProps:{position:"absolute",top:"25vh"}}),(0,s.jsx)(m.c,{minH:F,h:F,maxH:F,alignContent:"center",position:"relative",overflowX:"hidden",p:0,children:J||$?(0,s.jsx)(S.K,{title:(0,s.jsx)(w.x6,{id:"AK4HwH"}),message:(0,s.jsx)(w.x6,{id:"PZCqeW"})}):(0,s.jsx)(g.s,{flex:1,css:{containerType:"inline-size","--editor-width":"100cqw","--editor-font-size":"0.5rem",contain:"paint"},children:Z&&(0,s.jsx)(R.u5,{initialContent:Z,animationsEnabled:!1,isInsideDrawer:!0,theme:null==X||null==(z=X.doc)?void 0:z.theme})})})]}),(0,s.jsx)(p.c,{}),(0,s.jsx)(j.j,{children:(0,s.jsxs)(f.e,{children:[(0,s.jsx)(u.$,{variant:"outline",onClick:W,isDisabled:Q,isLoading:G,leftIcon:(0,s.jsx)(y.g,{icon:v._$C}),children:(0,s.jsxs)(g.s,{gap:1,children:[(0,s.jsx)(w.x6,{id:"AeWU0f"}),(0,s.jsx)(b.E,{children:(0,s.jsx)(w.x6,{id:"jsQZMk"})}),(0,s.jsx)(b.E,{colorScheme:"purple",children:(0,s.jsx)(w.x6,{id:"YBt9YP"})})]})}),(0,s.jsx)(u.$,{variant:"solid",onClick:()=>U(O.id),isDisabled:Q,children:(0,s.jsx)(w.x6,{id:"DuCrFx"})})]})})]})}},12805:(e,i,t)=>{"use strict";t.d(i,{_:()=>d});var s=t(6029),n=t(48810),l=t(26420),r=t(58959),o=t(40452),a=t(47412);t(55729);let d=e=>{let{title:i,subtitle:t,img:d,isDisabled:c=!1,disabledText:u,tooltipText:x,testId:h,infoIcon:p,permissionsControl:m,workspaceGuestInvite:g}=e,j="string"==typeof t?(0,s.jsx)(n.E,{fontSize:"xs",color:"gray.500",children:t}):t,f=(0,s.jsx)(a.Tz,{isDisabled:!x,label:x,placement:"top",children:(0,s.jsx)(l.a,{children:m})});return(0,s.jsxs)(r.z,{w:"100%",justify:"space-between",py:2,"data-testid":"permission-settings-row".concat(h?"-"+h:""),children:[(0,s.jsx)(l.a,{children:(0,s.jsxs)(o.s,{alignItems:"center",children:[d,(0,s.jsxs)(l.a,{marginInlineStart:3,children:[(0,s.jsx)(n.E,{wordBreak:"break-word",noOfLines:1,children:i}),(0,s.jsxs)(o.s,{align:"center",children:[g&&g,j&&j]})]})]})}),(0,s.jsx)(l.a,{children:(0,s.jsx)(a.Tz,{isDisabled:!x,label:(0,s.jsx)(n.E,{children:x}),placement:"top",children:c?(0,s.jsx)(n.E,{size:"sm",color:"gray.500","data-testid":"permission-controls-disabled-".concat(h),children:u}):p?(0,s.jsxs)(r.z,{children:[p,f]}):f})})]})}},20746:(e,i,t)=>{"use strict";t.d(i,{F:()=>l});var s=t(55729),n=t(68986);function l(e,i){let[t,l]=(0,s.useState)(()=>{try{let t=n.e.getItem(e);if(null===t)return i;return JSON.parse(t)}catch(e){return console.error("[useSessionStorage.getItem] Error getting sessionStorage item",e),i}});return[t,(0,s.useCallback)(i=>{try{n.e.setItem(e,JSON.stringify(i)),l(i)}catch(e){console.error("[useSessionStorage.setItem] Error setting sessionStorage item",e)}},[e])]}},22621:(e,i,t)=>{"use strict";t.d(i,{h:()=>h});var s=t(6029),n=t(46898),l=t(68013),r=t(57405),o=t(36218),a=t(49611),d=t(19564),c=t(55729),u=t(20715);let x="embed-copied-toast",h=e=>{let{embedCode:i,isDisabled:t,docId:h}=e,p=(0,n.d)(),[m,g]=(0,c.useState)(!1),{hasCopied:j,onCopy:f}=(0,l.i)(i),b=(0,c.useRef)(null);(0,c.useEffect)(()=>{b.current&&m&&(b.current.focus(),b.current.select())},[m]);let v=(0,c.useCallback)(()=>g(!0),[]),y=(0,c.useCallback)(()=>g(!1),[]),w=(0,c.useCallback)(()=>{f(),p.isActive(x)||p({id:x,title:(0,s.jsx)(d.x6,{id:"ETv+Uw"}),status:"success",duration:5e3}),(0,u.dd)({docId:h,source:"sharePanel",type:"embed"})},[h,f,p]);return(0,s.jsxs)(r.T,{spacing:4,align:"stretch",children:[(0,s.jsx)(o.T,{ref:b,rows:5,variant:"filled",fontFamily:"mono",colorScheme:"gray",disabled:t,onClick:v,onBlur:y,isReadOnly:!0,resize:"none",pointerEvents:t?"none":void 0,value:i}),(0,s.jsx)(a.$,{alignSelf:"flex-end",onClick:w,isDisabled:t,size:"sm",...t?{opacity:"1 !important",color:"gray.400",_hover:{opacity:"1"},_active:{boxShadow:"0 none"}}:{},children:j?(0,s.jsx)(d.x6,{id:"6V3Ea3"}):(0,s.jsx)(d.x6,{id:"Sx4kHi"})})]})}},24776:(e,i,t)=>{"use strict";t.d(i,{A:()=>R,L:()=>I});var s=t(6029),n=t(49611),l=t(67909),r=t(36071),o=t(54731),a=t(17920),d=t(26420),c=t(3674),u=t(40691),x=t(26385),h=t(58959),p=t(48810),m=t(2241),g=t(36218),j=t(16426),f=t(81107),b=t(48621),v=t(47412),y=t(19564),w=t(77650),C=t(55729),k=t(60120),S=t(61043),_=t(91792);let I={linkedin:{label:"LinkedIn",cta:()=>w.Ru._({id:"Ck0vYl"}),exportFormat:"pdf",localizedCTA:(0,s.jsx)(y.x6,{id:"Ck0vYl"}),inProgressLabel:(0,s.jsx)(y.x6,{id:"iPHeYN"}),icon:f.IAJ,iconColor:"linkedin.700",maxLength:3e3,thingsToNote:(0,s.jsx)(y.x6,{id:"N/TitX"})}},A=e=>{let{socialPlatform:i,doc:t,message:l,cardRangesInput:r,modalClose:o}=e,{handleExport:a,exportInProgress:d}=(0,S.Up)({doc:t,source:"share_panel",format:I[i].exportFormat,formatLabel:I[i].label,cardRanges:r,socialPlatform:i,socialPost:!0,shareMessage:l});return(0,s.jsxs)(n.$,{w:"100%",variant:"solid",onClick:()=>{a(),setTimeout(()=>{o()},2e3)},isDisabled:d,children:[d&&I[i].inProgressLabel,!d&&I[i].localizedCTA]})},R=e=>{let{socialPlatform:i,isSocialPostModalOpen:t,onSocialPostModalClose:f,cardRangesInput:S,doc:R}=e,[E,T]=(0,C.useState)(""),D=(0,_.rd)(),P=(0,C.useCallback)(e=>{T(e.target.value.substring(0,I[i].maxLength))},[i]),z=R.title;return(0,s.jsx)(v.L8,{isDark:D,children:(0,s.jsxs)(l.aF,{isOpen:t,onClose:f,trapFocus:!0,returnFocusOnClose:!1,size:"xl",children:[(0,s.jsx)(r.m,{}),(0,s.jsxs)(o.$,{children:[(0,s.jsxs)(a.r,{children:[(0,s.jsx)(d.a,{display:"inline-block",me:"2.5",color:I[i].iconColor,children:(0,s.jsx)(b.g,{icon:I[i].icon,size:"lg"})})," ",I[i].localizedCTA]}),(0,s.jsx)(c.s,{}),(0,s.jsx)(u.c,{children:(0,s.jsxs)(x.B,{spacing:2,width:"100%",children:[(0,s.jsxs)(h.z,{alignItems:"center",justifyContent:"space-between",children:[(0,s.jsxs)(p.E,{flex:"1",noOfLines:1,children:[(0,s.jsx)(y.x6,{id:"sNsWEI",values:{docTitle:z}}),S&&(0,s.jsxs)(m.B.span,{color:"gray.600",children:[" ",(0,s.jsx)(y.x6,{id:"gFo4O3",values:{cardRangesInput:S}})]})]}),(0,s.jsx)(k.H,{length:E.length||0,maxLength:I[i].maxLength})]}),(0,s.jsx)(g.T,{height:"10em",placeholder:w.Ru._({id:"p4W7fL"}),value:E,onChange:P}),I[i].thingsToNote&&(0,s.jsx)(p.E,{fontSize:"sm",color:"gray.500",children:I[i].thingsToNote})]})}),(0,s.jsx)(j.j,{pb:"5",children:(0,s.jsx)(n.$,{w:"100%",variant:"solid",children:(0,s.jsx)(A,{doc:R,socialPlatform:i,message:E,cardRangesInput:S,modalClose:f})})})]})]})})}},33571:(e,i,t)=>{"use strict";t.d(i,{I:()=>j,O:()=>f});var s=t(6029),n=t(49611),l=t(26420),r=t(27229),o=t(58959),a=t(48810),d=t(48621),c=t(77650),u=t(55729),x=t(88586),h=t(14322),p=t(70006),m=t(24776);let g=e=>{let{label:i,ariaLabel:t,icon:r,iconColor:o,isLoading:a,handler:c}=e;return(0,s.jsx)(n.$,{variant:"plain",size:"md","aria-label":t,onClick:c,leftIcon:(0,s.jsx)(l.a,{color:o,children:(0,s.jsx)(d.g,{icon:r})}),boxShadow:"none",isLoading:a,isDisabled:a,_hover:{boxShadow:"md",borderColor:o},children:i})},j=()=>new BroadcastChannel("social_post"),f=e=>{var i;let{doc:t,exportMode:n,cardRangesInput:l}=e,{isOpen:d,onOpen:f,onClose:b}=(0,r.j)({id:"linkedin-post-modal"}),{data:v,loading:y}=(0,x.kvr)(),w=null==v||null==(i=v.userIntegrations)?void 0:i.integrations;return(0,u.useEffect)(()=>j().addEventListener("message",e=>{"true"===e.data.success&&"linkedin"===e.data.platform&&f()}),[f]),(0,s.jsxs)(o.z,{children:[(0,s.jsx)(g,{label:(0,s.jsx)(a.E,{children:m.L.linkedin.label}),isLoading:y,ariaLabel:m.L.linkedin.cta(),icon:m.L.linkedin.icon,iconColor:m.L.linkedin.iconColor,handler:()=>(null==w?void 0:w.includes(x.n30.Linkedin))?f():(0,h.GE)({url:(0,p.n$)(),title:c.Ru._({id:"Abf1Uw"}),w:800,h:600})}),d&&(0,s.jsx)(m.A,{isSocialPostModalOpen:d,onSocialPostModalClose:b,socialPlatform:"linkedin",cardRangesInput:"all"===n?"":l,doc:t})]})}},33996:(e,i,t)=>{"use strict";t.d(i,{k:()=>d});var s=t(6029),n=t(46898),l=t(19564),r=t(55729),o=t(88586),a=t(99038);let d=()=>{let e=(0,n.d)(),[i]=(0,o.Tyr)({refetchQueries:["GetChannelDocActivity","GetChannels"]});return{addDocChannel:(0,r.useCallback)(t=>{let{docId:n,doc:r,channel:d,existingChannels:c=[]}=t,u=n||(null==r?void 0:r.id);if(!u)return void console.error("Invalid docid");let x={input:{docId:u,sharing:[{op:o.wSW.Add,path:"/channels",value:[{channelId:d.id}]}]}},h=(null==r?void 0:r.title)||a.TP,p=[...c,{id:d.id,slug:d.slug,name:d.name,permission:o.aXG.Comment}].sort((e,i)=>e.slug.localeCompare(i.slug,"en"));i({variables:x,update:(e,i)=>{let{data:t}=i;e.writeFragment({id:"Doc:".concat(u),fragment:o.Hr1,data:null==t?void 0:t.updatePublicChannels})},optimisticResponse:{updatePublicChannels:{id:x.input.docId,channels:p}}}).then(()=>{e({title:(0,s.jsx)(l.x6,{id:"7hDHpt",values:{title:h}}),description:(0,s.jsx)(l.x6,{id:"A2xcFn",values:{GAMMA_ARTIFACT_PROPER_NOUN:a.TP,0:d.name}}),status:"success",duration:5e3,isClosable:!0,position:"top"})},i=>{e({title:(0,s.jsx)(l.x6,{id:"bLdU0Q",values:{title:h,0:d.name}}),description:i.message,duration:null,status:"error",isClosable:!0,position:"top"})})},[i,e]),removeDocChannel:(0,r.useCallback)((t,n)=>{var r;if(!n)return;let d={input:{docId:t.id,sharing:[{op:o.wSW.Remove,path:"/channels",value:[{channelId:n}]}]}};i({variables:d,update:(e,i)=>{let{data:s}=i;e.writeFragment({id:"Doc:".concat(t.id),fragment:o.e34,data:null==s?void 0:s.updatePublicChannels})},optimisticResponse:{updatePublicChannels:{id:d.input.docId,channels:null==(r=t.channels)?void 0:r.filter(e=>e.id!==n)}}}).then(()=>{e({title:(0,s.jsx)(l.x6,{id:"qsnpV6",values:{GAMMA_ARTIFACT_PROPER_NOUN:a.TP}}),status:"success",duration:1e4,position:"top"})}).catch(i=>{e({title:(0,s.jsx)(l.x6,{id:"+yMzgs"}),description:i.message,status:"error",duration:3e3,isClosable:!0,position:"top"}),console.error("[addRemoveDocChannel] Error removing channel:",i.message)})},[i,e])}}},38055:(e,i,t)=>{"use strict";t.d(i,{y:()=>s});let s="tour"},40556:(e,i,t)=>{"use strict";t.d(i,{I:()=>x});var s=t(6029),n=t(46898),l=t(48810),r=t(80314),o=t(19564),a=t(55729),d=t(88586),c=t(99038),u=t(82927);let x=e=>{let{refetchQueries:i}=e,{user:t}=(0,u.ur)(),x=(0,n.d)(),[h]=(0,d.fQ5)({refetchQueries:i}),[p,{loading:m}]=(0,d.UpM)({refetchQueries:i}),[g]=(0,d.u6W)({refetchQueries:i}),[j]=(0,d.D7K)({refetchQueries:i}),f=(0,a.useCallback)((e,i)=>()=>{if(!t||!i)return;let s={input:{docId:i.id,userId:null==t?void 0:t.id,favorited:e}};return j({variables:s,update:(e,t)=>{let{data:s}=t;e.writeFragment({id:"Doc:".concat(i.id),fragment:d.pfv,data:{docUser:null==s?void 0:s.updateDocUser}})},optimisticResponse:{updateDocUser:{...i.docUser,favorited:s.input.favorited,__typename:"DocUser"}}})},[j,t]),b=(0,a.useCallback)(e=>{let i={id:e};g({variables:i,optimisticResponse:{unarchiveDoc:{...i,archived:!1,__typename:"Doc"}}}).then(()=>{x({title:(0,s.jsx)(o.x6,{id:"nRyNMz"}),status:"success",duration:1e4,position:"top"})})},[g,x]),v=(0,a.useCallback)(e=>{let i={id:e};h({variables:i,optimisticResponse:{archiveDoc:{...i,archived:!0,__typename:"Doc"}}}).then(()=>{x({title:(0,s.jsxs)(l.E,{children:[(0,s.jsx)(o.x6,{id:"i3Wq9L",values:{GAMMA_ARTIFACT_PROPER_NOUN:c.TP}})," ",(0,s.jsx)(r.N,{textDecoration:"underline",onClick:()=>b(e),children:(0,s.jsx)(o.x6,{id:"9uI/rE"})})]}),status:"success",duration:3e3,position:"top",isClosable:!0})})},[h,b,x]);return{favoriteDoc:f,restoreDoc:b,trashDoc:v,permanentlyDeleteDoc:(0,a.useCallback)(e=>p({variables:{id:e},update:i=>{i.evict({id:i.identify({__typename:"Doc",id:e})}),i.gc()},optimisticResponse:{deleteDoc:e}}).then(()=>{x({title:(0,s.jsx)(o.x6,{id:"sOg7tZ",values:{GAMMA_ARTIFACT_PROPER_NOUN:c.TP}}),position:"top",status:"success",duration:3e3})}).catch(()=>{x({title:(0,s.jsx)(o.x6,{id:"SlfejT"}),description:(0,s.jsx)(o.x6,{id:"fWsBTs"}),status:"error",duration:3e3,position:"top",isClosable:!0})}),[p,x]),isPermanentlyDeletingDoc:m}}},41288:(e,i,t)=>{"use strict";t.d(i,{R:()=>l});var s=t(27229),n=t(55729);let l=()=>{let{isOpen:e,onOpen:i,onClose:t}=(0,s.j)({id:"sharePanelDisclosure"}),[l,r]=(0,n.useState)("invite");return{isSharePanelOpen:e,onSharePanelOpen:i,onSharePanelClose:(0,n.useCallback)(()=>{r("invite"),t()},[t]),view:l,setView:r}}},46424:(e,i,t)=>{"use strict";t.d(i,{_:()=>i9});var s=t(6029),n=t(68013),l=t(46898),r=t(67909),o=t(36071),a=t(54731),d=t(17920),c=t(26420),u=t(3674),x=t(96500),h=t(40691),p=t(26385),m=t(41781),g=t(29810),j=t(49611),f=t(16426),b=t(40452),v=t(99492),y=t(48621),w=t(47412),C=t(19564),k=t(55729),S=t(7761),_=t(82328),I=t(68301),A=t(22445),R=t(92437),E=t(46091),T=t(20715),D=t(77650),P=t(99038);let z=()=>D.Ru._({id:"1tCpcF",values:{GAMMA_PROPER_NOUN:P.On}}),O=()=>({invite:{ariaLabel:D.Ru._({id:"b4DayH"}),label:(0,s.jsx)(C.x6,{id:"b4DayH"}),icon:(0,s.jsx)(y.g,{icon:v.nWR,fixedWidth:!0}),key:"invite"},public:{ariaLabel:D.Ru._({id:"Z8lGw6"}),label:(0,s.jsx)(C.x6,{id:"Z8lGw6"}),icon:(0,s.jsx)(y.g,{icon:v.zxS,fixedWidth:!0}),key:"public"},export:{ariaLabel:D.Ru._({id:"GS+Mus"}),label:(0,s.jsx)(C.x6,{id:"GS+Mus"}),icon:(0,s.jsx)(y.g,{icon:v.a_I,fixedWidth:!0}),key:"export"},embed:{ariaLabel:D.Ru._({id:"KKBlUU"}),label:(0,s.jsx)(C.x6,{id:"KKBlUU"}),icon:(0,s.jsx)(y.g,{icon:v.jTw,fixedWidth:!0}),key:"embed"}}),M=["invite","public","export","embed"],F=e=>{let{showSharePublic:i=!0,showEmbed:t=!0,showInvite:s=!0,showExport:n=!0}=e;return M.map(e=>O()[e]).filter(e=>"public"===e.key?i:"embed"===e.key?t:"invite"===e.key?s:"export"!==e.key||n)};var N=t(51983),L=t(96804),G=t(44141),B=t(48720),U=t(91792),W=t(82927),V=t(2942),H=t(29608),$=t(70006),X=t(68568),K=t(88586),J=t(16491),q=t(82203),Q=t.n(q),Z=t(91938),Y=t(84287),ee=t(61043),ei=t(45972),et=t(37540),es=t(45804),en=t(16936),el=t(23293),er=t(5061);let eo=e=>{let{children:i,setMobileSharePanelState:t,backButton:n=!0}=e,l=(0,er.fW)();return(0,s.jsxs)(b.s,{width:"100%",position:"relative",mb:4,children:[n&&(0,s.jsx)(en.K,{icon:(0,s.jsx)(y.g,{icon:l?v.vmR:v.Uec}),"aria-label":"Back",variant:"unstyled",position:"absolute",height:"100%",insetStart:-4,onClick:()=>t("main")}),(0,s.jsx)(el.D,{size:"md",w:"100%",textAlign:"center",children:i})]})};var ea=t(27229),ed=t(14322),ec=t(24776);let eu=()=>new BroadcastChannel("social_post"),ex=e=>{var i;let{doc:t,exportMode:n,cardRangesInput:l}=e,{isOpen:r,onOpen:o,onClose:a}=(0,ea.j)({id:"linkedin-post-modal"}),{data:d}=(0,K.kvr)(),c=null==d||null==(i=d.userIntegrations)?void 0:i.integrations;(0,k.useEffect)(()=>eu().addEventListener("message",e=>{"true"===e.data.success&&"linkedin"===e.data.platform&&o()}),[o]);let u=(0,k.useCallback)(()=>(null==c?void 0:c.includes(K.n30.Linkedin))?o():(0,ed.GE)({url:(0,$.n$)(),title:D.Ru._({id:"Abf1Uw"}),w:800,h:600}),[c,o]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ei.N,{onClick:u,formatLabel:"LinkedIn",icon:es.q.linkedin.icon,rightIcon:v.t5Z,accentColor:es.q.linkedin.accentColor,customLabel:D.Ru._({id:"x7i6H+"}),exportInProgress:!1}),r&&(0,s.jsx)(ec.A,{isSocialPostModalOpen:r,onSocialPostModalClose:a,socialPlatform:"linkedin",cardRangesInput:"all"===n?"":l,doc:t})]})},eh=e=>{let{doc:i,editor:t,setMobileSharePanelState:n}=e,l=(0,I.u)("googleSlidesExport"),{product:r}=(0,Y.I)();return(0,s.jsx)(J.G_,{clientId:Z.$.GOOGLE_DRIVE_IMPORT_CLIENT_ID,children:(0,s.jsxs)(p.B,{alignItems:"center",flex:1,children:[(0,s.jsx)(eo,{setMobileSharePanelState:n,children:(0,s.jsx)(C.x6,{id:"GS+Mus"})}),(0,s.jsxs)(p.B,{direction:"column",spacing:6,width:"100%",children:[(0,s.jsx)(ep,{format:"pdf",label:"PDF",icon:es.q.pdf.icon,accentColor:es.q.pdf.accentColor,doc:i,editor:t,cardRanges:void 0}),(0,s.jsx)(ep,{format:"pptx",label:"PowerPoint",icon:es.q.pptx.icon,accentColor:es.q.pptx.accentColor,doc:i,editor:t,cardRanges:void 0}),l&&(0,s.jsx)(ep,{format:"google_slides",label:"Google Slides",icon:es.q.google_slides.icon,accentColor:es.q.google_slides.accentColor,doc:i,editor:t,cardRanges:void 0,customLabel:D.Ru._({id:"wj3Fyq"}),customInProgressMessage:D.Ru._({id:"9ZkGtt"}),badge:void 0}),(0,s.jsx)(ep,{format:"image",label:"PNG",icon:es.q.png.icon,accentColor:es.q.png.accentColor,doc:i,editor:t,cardRanges:void 0,customLabel:D.Ru._({id:"wAyz08"}),customInProgressMessage:D.Ru._({id:"RSRVl9"})}),(0,s.jsx)(ex,{exportMode:"all",cardRangesInput:"",doc:i})]}),!r&&(0,s.jsx)(j.$,{width:"fit-content",mt:6,fontSize:"sm",variant:"ghost",display:"flex",as:Q(),href:"/pricing",leftIcon:(0,s.jsx)(w.uh,{w:4}),children:(0,s.jsx)(C.x6,{id:"vo61Ld",values:{GAMMA_PROPER_NOUN:P.On}})}),(0,s.jsx)(g.h,{}),(0,s.jsx)(j.$,{variant:"toolbar",onClick:()=>n("main"),children:(0,s.jsx)(C.x6,{id:"yz7wBu"})})]})})},ep=e=>{let{format:i,doc:t,editor:n,icon:l,accentColor:r,label:o,badge:a,customLabel:d,customInProgressMessage:c,cardRanges:u,debuggingForceInProgress:x=!1}=e,h=(0,I.u)("googleSlidesExport"),{interceptFileExport:p}=(0,et.w)({doc:t,source:"share_panel",editor:n,cardRanges:u}),{handleExport:m,exportInProgress:g}=(0,ee.Up)({doc:t,source:"share_panel",editor:n,format:i,formatLabel:o,cardRanges:u,...h?{interceptFileExport:p}:{}});return(0,s.jsx)(ei.N,{onClick:m,icon:l,formatLabel:o,accentColor:r,exportInProgress:g||x,exportInProgressNote:"",badge:a,customLabel:d,customInProgressMessage:c})};var em=t(48810),eg=t(58959),ej=t(66897),ef=t(87827),eb=t(95889),ev=t(75570),ey=t(43787),ew=t(11403),eC=t(42757),ek=t(87752),eS=t(24302);let e_=e=>{let{onRemoveUser:i,onCancel:t}=e,n=(0,eS.dU)("gray.900","gray.50"),l=(0,eS.dU)("gray.600","gray.200");return(0,s.jsxs)(p.B,{flex:1,children:[(0,s.jsx)(eo,{setMobileSharePanelState:()=>{},backButton:!1,children:(0,s.jsx)(C.x6,{id:"3zSBeh"})}),(0,s.jsx)(em.E,{color:n,fontSize:"md",fontWeight:"semibold",children:(0,s.jsx)(C.x6,{id:"QhdP/l"})}),(0,s.jsx)(em.E,{color:l,fontSize:"sm",children:(0,s.jsx)(C.x6,{id:"Hl3Hbm"})}),(0,s.jsx)(g.h,{}),(0,s.jsx)(j.$,{variant:"hazardous",onClick:i,size:"lg",children:(0,s.jsx)(C.x6,{id:"t/YqKh"})}),(0,s.jsx)(j.$,{variant:"ghost",onClick:t,children:(0,s.jsx)(C.x6,{id:"dEgA5A"})})]})},eI=e=>{var i,t;let{doc:n,setMobileSharePanelState:l,confirmCallback:r,closeCallback:o,onRemoveUser:a,initialAccessType:d,accessOptions:u,passwordDialog:h="hidden",showRemoveUser:m=!1,showBackButton:f=!1,customHeader:w}=e,[S,_]=(0,k.useState)(d),I=(0,er.fW)(),A=null==(i=u.find(e=>e.accessType===S))?void 0:i.disabled,R=null==n||null==(t=n.accessLinks)?void 0:t[0],E=(null==R?void 0:R.type)==="password",[T,D]=(0,k.useState)(!1);return T&&a?(0,s.jsx)(e_,{onRemoveUser:a,onCancel:()=>{D(!1)}}):(0,s.jsxs)(b.s,{direction:"column",justifyContent:"space-between",flex:1,children:[(0,s.jsxs)(p.B,{spacing:5,children:[w||(0,s.jsx)(eo,{setMobileSharePanelState:l,backButton:f,children:(0,s.jsx)(el.D,{size:"md",children:(0,s.jsx)(C.x6,{id:"zk0Twx"})})}),(0,s.jsx)(p.B,{children:(0,s.jsxs)(p.B,{mx:1,spacing:6,children:[u.map(e=>{let{disabled:i,accessType:t,errorText:n}=e;return(0,s.jsxs)(eg.z,{onClick:()=>i?null:_(t),children:[(0,s.jsx)(c.a,{w:4,transform:"translate(-.25rem)",children:t===S?(0,s.jsx)(y.g,{icon:v.e68}):""}),(0,s.jsxs)(p.B,{w:"100%",spacing:0,children:[(0,s.jsx)(em.E,{color:i?"gray.400":"",fontWeight:"semibold",children:eC.ef[t].title()}),(0,s.jsx)(em.E,{fontSize:"sm",color:i?"gray.400":"gray.500",fontWeight:"medium",children:eC.ef[t].description()}),n&&(0,s.jsx)(em.E,{color:"red.500",fontSize:"sm",mb:-2,children:n})]})]},t)}),(0,s.jsx)(x.c,{}),m&&(0,s.jsxs)(eg.z,{justifyContent:"space-between",alignItems:"center",onClick:()=>D(!0),color:"red.500",w:"100%",children:[(0,s.jsx)(c.a,{w:4,transform:"translate(-.25rem)",children:(0,s.jsx)(y.g,{icon:v.yLS,size:"xs"})}),(0,s.jsx)(em.E,{fontWeight:"semibold",children:(0,s.jsx)(C.x6,{id:"3zSBeh"})}),(0,s.jsx)(g.h,{})]}),("visible"===h||"disabled"===h)&&(0,s.jsxs)(eg.z,{justifyContent:"space-between",alignItems:"center",opacity:"disabled"===h?.6:1,onClick:()=>{"visible"===h&&l("password")},children:[(0,s.jsx)(c.a,{w:4,transform:"translate(-.25rem)",children:(0,s.jsx)(y.g,{icon:v.DW4})}),(0,s.jsxs)(p.B,{spacing:0,children:[(0,s.jsx)(em.E,{fontSize:"md",fontWeight:"semibold",children:(0,s.jsx)(C.x6,{id:"8ZsakT"})}),(0,s.jsx)(em.E,{fontSize:"sm",color:"gray.500",children:E?(0,s.jsx)(C.x6,{id:"GZ6qi2"}):(0,s.jsx)(C.x6,{id:"H6KqVd"})})]}),(0,s.jsx)(g.h,{}),(0,s.jsx)(y.g,{icon:I?v.Uec:v.vmR})]})]})})]}),(0,s.jsxs)(p.B,{spacing:5,children:[(0,s.jsx)(j.$,{variant:"solid",onClick:()=>A?null:r(S),isDisabled:A,size:"lg",fontWeight:"semibold",children:(0,s.jsx)(C.x6,{id:"7VpPHA"})}),(0,s.jsx)(j.$,{variant:"ghost",onClick:o,children:(0,s.jsx)(C.x6,{id:"dEgA5A"})})]})]})};var eA=t(78686),eR=t(61204),eE=t(72470),eT=t(3276),eD=t(77979),eP=t(96990),ez=t(58297),eO=t(40913),eM=t(18833),eF=t(4192);let eN=e=>{let{selectedCollaborator:i,handleRemoveClick:t}=e,n=i&&(0,ej.t)((null==i?void 0:i.email)||"");return(0,s.jsxs)(eF.vw,{size:"lg",minW:110,...n?{}:{colorScheme:"red"},children:["id"in i?(0,s.jsx)(w.Tz,{label:i.email,"aria-label":i.email,children:(0,s.jsxs)(eg.z,{children:[(0,s.jsx)(eP.e,{size:"2xs",m:0,name:i.displayName,src:i.profileImageUrl}),(0,s.jsx)(em.E,{textTransform:"capitalize",wordBreak:"break-word",noOfLines:1,lineHeight:"1.5",children:i.displayName})]})}):(0,s.jsx)(w.Tz,{label:n?i.email:(0,s.jsx)(C.x6,{id:"XILg0L"}),"aria-label":i.email,children:(0,s.jsxs)(eg.z,{flex:1,children:[(0,s.jsx)(ez.j,{size:6,children:(0,s.jsx)(y.g,{icon:n?v.y_8:v.bxP})}),(0,s.jsx)(em.E,{wordBreak:"break-all",display:"block",height:"100%",width:"100%",noOfLines:1,lineHeight:"1.5",children:i.email})]})}),(0,s.jsx)(eF.TV,{onClick:t})]})},eL=(0,eM.P)(c.a),eG=e=>{let{autoCompleteFilter:i,autoCompleteInputOnChange:t,autoCompleteInputOnKeyDown:n,autoCompleteInputOnPaste:l,autoCompleteOnSelectOption:r,autoCompleteOnTagRemoved:o,autocompleteRef:a,inputRef:d,inputValue:u,isProcessingBatch:x,searchUsers:h,selectedItems:p,shouldDisableInput:m,showControls:g,showCreatable:j}=e,f=(0,eS.dU)("light","dark"),w=(0,eS.dU)("trueblue.50","whiteAlpha.100"),C=(0,eS.dU)("trueblue.100","whiteAlpha.200");return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(eR.e,{w:"100%",mb:2,alignItems:"flex-start","data-testid":"sharepanel-search-bar",children:[(0,s.jsx)(c.a,{flex:1,children:(0,s.jsxs)(eE.M,{w:"100%",justifyContent:"center",zIndex:2,children:[(0,s.jsx)(b.s,{display:x?"flex":"none",position:"absolute",h:"100%",w:"100%",alignItems:"center",justifyContent:"center",zIndex:"overlay",opacity:.4,children:(0,s.jsx)(eT.y,{})}),(0,s.jsxs)(eO.j9,{ref:a,values:p,maxSelections:100,maxSuggestions:20,creatable:!0,multiple:!0,freeSolo:!0,suggestWhenEmpty:!1,openOnFocus:!0,filter:i,onSelectOption:r,onTagRemoved:o,children:[(0,s.jsxs)(eD.W,{pointerEvents:"none",color:(0,eS.dU)("gray.300","gray.600"),h:"100%",flexDirection:"column",children:[(0,s.jsx)(b.s,{flex:1}),(0,s.jsx)(b.s,{h:10,py:4,alignItems:"center",children:(0,s.jsx)(eA.W,{w:10})})]}),(0,s.jsx)(eO.Rv,{ref:d,"data-testid":"autocomplete-collaborators-input",cursor:m?"not-allowed":void 0,disabled:m,w:"100%",paddingInlineStart:5,wrapStyles:{px:2},fontSize:"md",placeholder:D.Ru._({id:"P8H57Z"}),transition:"width 1s ease-in-out",value:u,onKeyDown:n,onPaste:l,onChange:t}),(0,s.jsx)(eO.HN,{w:"100%",mt:0,display:u.length>0?"flex":"none","data-theme":f,children:h.map(e=>{let{id:i,email:t,displayName:n,profileImageUrl:l}=e;return(0,s.jsx)(eO.qF,{fixed:!0,"data-testid":"autocomplete-item-user-".concat(i),value:{email:t,type:"collaborator"},getValue:e=>e.email,align:"center",_focus:{bg:w},children:(0,s.jsxs)(eg.z,{children:[(0,s.jsx)(eP.e,{size:"sm",name:n,src:l}),(0,s.jsxs)(c.a,{children:[(0,s.jsx)(em.E,{textTransform:"capitalize",children:n}),(0,s.jsx)(em.E,{fontSize:"xs",color:"gray.500",children:null==t?void 0:t.toLowerCase()})]})]})},i)}).concat((0,s.jsx)(eO.qF,{value:{email:u,type:"collaborator"},align:"center",display:j?"flex":"none",_focus:{bg:w},children:(0,s.jsxs)(eg.z,{children:[(0,s.jsx)(ez.j,{bg:C,size:8,children:(0,s.jsx)(y.g,{icon:v.y_8})}),(0,s.jsx)(em.E,{size:"md",children:u})]})},u))})]})]})}),(0,s.jsx)(eL,{overflowX:"hidden",me:-2,transition:"slow",animate:{maxWidth:g?"200px":"0px"}})]}),p.map((e,i)=>(0,s.jsx)(c.a,{children:(0,s.jsx)(eN,{idx:i,selectedCollaborator:e,handleRemoveClick:()=>{var i;null==(i=a.current)||i.removeItem(e.email)}})},"id"in e?e.id:e.email))]})},eB=()=>({view:{subtitle:D.Ru._({id:"ihPQra"}),tooltip:z()},comment:{subtitle:D.Ru._({id:"qPZYdC"}),tooltip:D.Ru._({id:"oKPro/",values:{0:z()}})},edit:{subtitle:D.Ru._({id:"TVFcVE"}),tooltip:D.Ru._({id:"2gPY9r",values:{0:z()}})},manage:{subtitle:D.Ru._({id:"bKvp4s"}),tooltip:D.Ru._({id:"+OkTAI",values:{0:z()}})}}),eU=(e,i,t)=>{if(!t)return e;let s=[...e],n=e.findIndex(e=>"email"in e&&e.email===t),l=i.find(e=>e.email===t);return -1!==n&&s.splice(n,1),[...s,l||{email:t}]},eW=(e,i)=>{let t=(0,ey.e7)(i.map(e=>"displayName"in e?e.displayName:e.email),3);return e===K.aXG.Manage?D.Ru._({id:"4bKxWq",values:{userNames:t,GAMMA_ARTIFACT_PROPER_NOUN:P.TP,0:i.length}}):e===K.aXG.Edit?D.Ru._({id:"3rbi6Y",values:{userNames:t,GAMMA_ARTIFACT_PROPER_NOUN:P.TP,0:i.length}}):e===K.aXG.Comment?D.Ru._({id:"uGWY40",values:{userNames:t,GAMMA_ARTIFACT_PROPER_NOUN:P.TP,0:i.length}}):e===K.aXG.View?D.Ru._({id:"p5IG6F",values:{userNames:t,GAMMA_ARTIFACT_PROPER_NOUN:P.TP,0:i.length}}):D.Ru._({id:"Ai1TAT",values:{userNames:t,GAMMA_ARTIFACT_PROPER_NOUN:P.TP,0:i.length}})},eV=e=>{var i,t;let{doc:n,setMobileSharePanelState:r,lastSearchText:o,setLastSearchText:a}=e,d=(0,l.d)(),c=(0,er.fW)(),[u,h]=(0,k.useState)([]),m=(0,W.ur)().user,f=(0,k.useRef)(null),[b,w]=(0,k.useState)(!1),S=(0,ef.n)(eB),_=null==n||null==(i=n.accessLinks)?void 0:i[0],I=(null==_?void 0:_.type)==="password",A=(null==n?void 0:n.collaborators)||[],R=(null==n||null==(t=n.organization)?void 0:t.id)||"",[E,T]=(0,k.useState)(!1),[P,z]=(0,k.useState)(K.aXG.Edit),O=b&&"manage"===P,M=(0,k.useCallback)(()=>{T(!0)},[T]),[F,N]=(0,k.useState)(!1),L=(0,k.useRef)(void 0),G=(0,k.useRef)(null),[B,U]=(0,k.useState)(null!=o?o:""),[V,H]=(0,k.useState)([]),[$,X]=(0,k.useState)(new ev.c),J=u.filter(e=>"email"in e),q=(0,eb.st)(),Q=A.map(e=>e.user),[Z,{error:Y}]=(0,K.VXs)();(0,ew.KW)("Error inviting collaborators.",Y);let ee=(0,K.tzS)(K.HdQ),{data:ei,loading:et}=(0,K.puH)({variables:{query:B,workspaceId:R},skip:!B});(0,k.useEffect)(()=>{!et&&ei&&H(ei.search.filter(Boolean))},[ei,et]);let es=(0,k.useMemo)(()=>B?V.filter(e=>"User"===e.__typename&&e.id!==m.id&&!J.concat(Q).find(i=>i.email===e.email)):[],[V,Q,B,J,m.id]),en=!!B&&!es.find(e=>e.email===B),el=J.some(e=>!("__typename"in e&&"User"===e.__typename)),ea=P===K.aXG.Manage&&el;(0,k.useEffect)(()=>{w(el)},[w,el]);let ed=!!u.length,ec=!!J.some(e=>{var i;return"__typename"in e&&"User"===e.__typename||(0,ej.t)(null!=(i=e.email)?i:"")}),eu=(null==n?void 0:n.id)||"",ex=(0,k.useCallback)(async e=>{N(!0),h(i=>e.reduce((e,i)=>eU(e,es,i.trim()),i));let i=(await Promise.all(e.map(async e=>{var i;return null==(i=(await ee({workspaceId:R,query:e})).data)?void 0:i.search.find(i=>"User"===i.__typename&&i.email===e)}))).filter(Boolean);h(t=>e.reduce((e,t)=>eU(e,i,t.trim()),t)),N(!1)},[es,ee,R,h]),eh=(0,k.useCallback)(async()=>{if(0===J.length)return;let e=eU(J,es,B.trim()).filter(e=>"email"in e&&(0,ej.t)(e.email||"")),i=[...A,...e.map(e=>{if("id"in e)return{docId:eu,user:e,guest:!1,permission:P,__typename:"DocCollaborator"}})].filter(e=>!!e),t=[...(null==n?void 0:n.invitations)||[],...e.map(e=>{if(!("id"in e))return{id:"temp",docTitle:"temp-title",invitedBy:m,docId:eu,email:e.email,permission:P,__typename:"DocInvitation"}})].filter(e=>!!e);return Z({variables:{docId:eu,collaborators:e.map(e=>({..."id"in e?{userId:e.id}:{email:e.email},permission:P}))},update:(e,i)=>{let{data:t}=i;e.writeFragment({id:"Doc:".concat(eu),fragment:K.rgw,data:null==t?void 0:t.addCollaborators})},optimisticResponse:{addCollaborators:{id:eu,collaborators:i,invitations:t}}}).then(()=>{d({title:D.Ru._({id:"Ka86rB",values:{0:e.length}}),description:eW(P,e),status:"success",duration:5e3,isClosable:!0,position:"top"}),null==q||q.track(eb.VV.DOC_COLLABORATOR_INVITED,{doc_id:eu,source:"share-panel",number_of_invites_sent:e.length,permissions:P})})},[Z,eu,null==n?void 0:n.invitations,B,P,es,J,A,d,m,q]),ep=(0,k.useCallback)(async()=>Promise.all([eh()]).then(()=>{var e;h([]),U(""),null==(e=L.current)||e.resetItems(!0),$.resolve(),X(new ev.c)}).catch(e=>{console.warn(e)}),[eh,$,h]);return((0,k.useEffect)(()=>{f&&(f.current=ep)},[f,ep]),(0,k.useEffect)(()=>{"string"==typeof o&&(0,ej.t)(o)&&(ex([o]),U("")),a(void 0)},[ex,o,a]),E)?(0,s.jsx)(eI,{initialAccessType:P,setMobileSharePanelState:e=>r(e),confirmCallback:e=>{z(e),T(!1)},closeCallback:()=>T(!1),accessOptions:[{accessType:K.aXG.Manage,disabled:b,...b?{errorText:"User needs to be part of your workspace to have Full Access."}:{}},{accessType:K.aXG.Edit},{accessType:K.aXG.Comment},{accessType:K.aXG.View}]}):(0,s.jsxs)(p.B,{flex:1,children:[(0,s.jsx)(eo,{setMobileSharePanelState:r,children:(0,s.jsx)(C.x6,{id:"MFKlMB"})}),m&&(0,s.jsx)(eG,{autoCompleteFilter:(e,i)=>!J.find(e=>e.email===i),autoCompleteInputOnChange:e=>{let{target:i}=e,{value:t}=i;U(t),t||H([])},autoCompleteInputOnKeyDown:e=>{let{key:i}=e;if("Backspace"===i&&0===B.length&&u.length>0){let e=u.slice(-1).pop();if(e){var t;null==(t=L.current)||t.removeItem("email"in e?e.email:e.id)}}},autoCompleteInputOnPaste:e=>{e.preventDefault(),e.stopPropagation(),ex(e.clipboardData.getData("Text").trim().split(/[,|;\s]+/)),U(""),H([])},autoCompleteOnSelectOption:e=>{let{item:i}=e,{type:t}=i.originalValue;"collaborator"===t&&h(e=>eU(e,es,i.value)),U("")},autoCompleteOnTagRemoved:e=>{h(i=>[...i].filter(i=>"email"in i?i.email!==e:!("id"in i)||i.id!==e))},autocompleteRef:L,inputRef:G,inputValue:B,isProcessingBatch:F,searchUsers:es,showControls:ed,showCreatable:en,selectedItems:u,shouldDisableInput:!1}),(0,s.jsx)(g.h,{}),(0,s.jsx)(x.c,{}),(0,s.jsx)(em.E,{children:(0,s.jsx)(C.x6,{id:"9cDpsw"})}),(0,s.jsxs)(eg.z,{spacing:2,justify:"space-between",children:[(0,s.jsx)(ek.$,{icon:I?v.OKD:v.CQO,showDisabled:b&&"manage"===P,size:10}),(0,s.jsxs)(p.B,{spacing:.5,children:[(0,s.jsx)(em.E,{color:O?"gray.400":"",children:eC.ef[P].title()}),(0,s.jsx)(em.E,{fontSize:"xs",color:O?"gray.400":"gray.500",children:S[P].subtitle})]}),(0,s.jsx)(g.h,{}),(0,s.jsxs)(j.$,{variant:"ghost",onClick:M,children:[(0,s.jsx)(em.E,{me:3,children:(0,s.jsx)(C.x6,{id:"o+XJ9D"})}),(0,s.jsx)(y.g,{icon:c?v.Uec:v.vmR,size:"lg"})]})]}),O&&(0,s.jsx)(em.E,{color:"red.500",fontSize:"sm",children:(0,s.jsx)(C.x6,{id:"yxdnLB"})}),(0,s.jsx)(x.c,{m:4}),(0,s.jsx)(j.$,{variant:"solid",size:"lg",onClick:()=>{f.current&&f.current(),r("main")},isDisabled:!ec||ea,children:(0,s.jsx)(C.x6,{id:"MFKlMB"})}),(0,s.jsx)(j.$,{variant:"ghost",color:"inherit",onClick:()=>r("main"),children:(0,s.jsx)(C.x6,{id:"dEgA5A"})})]})};var eH=t(33787),e$=t(74892),eX=t(45143);let eK=e=>{let{icon:i,text:t,ariaLabel:n,onClick:l}=e,r=(0,U.rd)();return(0,s.jsxs)(p.B,{direction:"column",alignItems:"center",spacing:2,onClick:l,flex:1,overflow:"hidden",whiteSpace:"nowrap",children:[(0,s.jsx)(en.K,{bg:"gray.200",color:"gray.700",borderRadius:"full","aria-label":n,textAlign:"center",variant:"ghost",size:"lg",children:(0,s.jsx)(y.g,{icon:i})}),(0,s.jsx)(em.E,{fontSize:"sm",color:r?"white":"deepocean.950",fontWeight:"semibold",align:"center",textOverflow:"ellipsis",maxW:"100%",overflow:"hidden",whiteSpace:"normal",noOfLines:2,children:t})]})},eJ=e=>{let{icon:i,onClick:t,text:n,rightText:l}=e,r=(0,er.fW)();return(0,s.jsx)(j.$,{onClick:t,width:"100%",variant:"unstyled",fontWeight:"",children:(0,s.jsxs)(eg.z,{children:[(0,s.jsx)(ez.j,{color:"gray.700",textAlign:"center",bg:"gray.200",size:10,children:(0,s.jsx)(y.g,{icon:i})}),(0,s.jsx)(em.E,{children:n}),(0,s.jsx)(g.h,{}),(0,s.jsx)(j.$,{variant:"unstyled",minW:"0",children:l?(0,s.jsxs)(eg.z,{spacing:3,children:[(0,s.jsx)(em.E,{children:l}),(0,s.jsx)(y.g,{icon:r?v.Uec:v.vmR})]}):(0,s.jsx)(y.g,{icon:r?v.Uec:v.vmR})})]})})},eq=e=>{var i,t,r,o,a,d,c;let{doc:u,setMobileSharePanelState:h,handleViewAnalyticsClick:m,closeSharePanel:f,showAnalytics:S}=e,_=(0,k.useRef)(!1),{user:I}=(0,W.ur)(),A=(0,l.d)(),R=(0,N.ZP)(u,I),E=R?(0,N.bC)()[R]:null;(null==u||null==(i=u.organization)?void 0:i.id)||_.current||(console.error("[SharePanelModal] Doc unexpectedly doesnt have a workspaceId",{docId:u.id,organization:u.organization}),_.current=!0);let P=null!=(d=null==u||null==(t=u.titleCard)?void 0:t.previewUrl)?d:e$.A.src,z=null==u||null==(r=u.accessLinks)?void 0:r[0],O=(0,k.useMemo)(()=>(0,$.LN)({docTitle:null==u?void 0:u.title,docId:null==u?void 0:u.id,token:null==z?void 0:z.token,absolute:!0}),[u,null==z?void 0:z.token]),{anonymousUser:M}=(0,W.ur)(),F={...M,organizations:[]},{profileImageUrl:L}=I||F,G=(0,eX.h5)(["xs","sm"]),{onCopy:B}=(0,n.i)(O),U="link-copied-toast",V=(0,k.useCallback)(()=>{B(),A.isActive(U)||A({id:U,title:(0,s.jsx)(C.x6,{id:"pQjjYo"}),status:"success",duration:5e3,position:"top"}),(0,T.dd)({docId:u.id,source:"sharePanel",type:"tokenUrl"})},[u.id,B,A]),H=(0,k.useCallback)(async()=>{let e={title:u.title,text:"Shared via Gamma",url:O};await navigator.share(e)},[u.title,O]),X=(null==z?void 0:z.permission)?null==z?void 0:z.permission:eC.F$.NoAccess,K=u&&I&&(null==u||null==(o=u.createdBy)?void 0:o.id)===(null==I?void 0:I.id)?D.Ru._({id:"av/PD9"}):null!=(c=null==u||null==(a=u.createdBy)?void 0:a.firstName)?c:"";return null===E?(console.error("[SharePanel] Unknown VisibilityValue for doc",u),null):(0,s.jsxs)(p.B,{w:"100%",spacing:2,children:[(0,s.jsxs)(b.s,{justify:"space-between",children:[(0,s.jsx)(el.D,{children:(0,s.jsx)(C.x6,{id:"Z8lGw6"})}),(0,s.jsx)(j.$,{"data-share-panel-close-button":!0,variant:"ghost",px:0,onClick:e=>{e.preventDefault(),f()},children:(0,s.jsx)(em.E,{fontWeight:"semibold",children:(0,s.jsx)(C.x6,{id:"DPfwMq"})})})]}),(0,s.jsxs)(p.B,{alignItems:"center",spacing:5,mb:2,children:[(0,s.jsx)(eH._,{borderRadius:"md",shadow:"xl",src:P,w:250}),(0,s.jsxs)(b.s,{gap:2,alignItems:"center",children:[(0,s.jsx)(eP.e,{src:L,showBorder:!1,size:G}),(0,s.jsx)(em.E,{color:"gray.600",fontSize:"sm",children:(0,s.jsx)(C.x6,{id:"0jxROC",values:{createdByUser:K}})})]})]}),S&&(0,s.jsx)(j.$,{variant:"ghost",color:"inherit",onClick:m,leftIcon:(0,s.jsx)(y.g,{icon:v.q9c}),children:(0,s.jsx)(em.E,{fontSize:"md",children:(0,s.jsx)(C.x6,{id:"YaUqUV"})})}),(0,s.jsxs)(p.B,{spacing:4,mt:2,children:[(0,s.jsx)(w._x,{children:(0,s.jsx)(C.x6,{id:"xXYV+r"})}),(0,s.jsx)(eJ,{icon:v.CQO,onClick:()=>h("manage-access"),rightText:eC.ef[X].title(),text:(0,s.jsx)(C.x6,{id:"qZu20V"})}),(0,s.jsx)(eJ,{icon:v.USd,onClick:()=>h("members"),text:(0,s.jsx)(C.x6,{id:"hB02vO"})})]}),(0,s.jsx)(g.h,{}),(0,s.jsxs)(p.B,{spacing:6,children:[(0,s.jsx)(x.c,{}),(0,s.jsxs)(eg.z,{w:"100%",overflow:"hidden",alignItems:"start",children:[(0,s.jsx)(eK,{onClick:V,text:(0,s.jsx)(C.x6,{id:"A/z0Uc"}),ariaLabel:D.Ru._({id:"y1eoq1"}),icon:v.CQO}),(0,s.jsx)(eK,{onClick:()=>h("invite"),text:(0,s.jsx)(C.x6,{id:"wEi1R1"}),ariaLabel:D.Ru._({id:"MFKlMB"}),icon:v.nWR}),(0,s.jsx)(eK,{onClick:H,text:(0,s.jsx)(C.x6,{id:"Mh3GfE"}),ariaLabel:D.Ru._({id:"Z8lGw6"}),icon:v.t5Z}),(0,s.jsx)(eK,{onClick:()=>h("export"),text:(0,s.jsx)(C.x6,{id:"WwCRK2"}),ariaLabel:D.Ru._({id:"GS+Mus"}),icon:v.a_I})]})]})]})},eQ=e=>{var i,t;let{doc:n,setMobileSharePanelState:r}=e,o=(null==n||null==(t=n.accessLinks)||null==(i=t[0])?void 0:i.permission)||eC.F$.NoAccess,a=(0,l.d)(),d=e=>()=>{a({title:"updated"===e?D.Ru._({id:"Xpw8aE"}):D.Ru._({id:"jwO7L7"}),status:"success",duration:5e3,isClosable:!0,position:"top"})},[c]=(0,K.vcy)(),u=e=>{var i;let t=null==n||null==(i=n.accessLinks)?void 0:i[0],s=null==t?void 0:t.id,l={id:n.id,accessLinks:e===eC.F$.NoAccess?[{permission:null}]:[{permission:e}]};c({variables:l,optimisticResponse:{updateDoc:{...l,accessLinks:[{__typename:"AccessLink",id:s||"temp-id",permission:e===eC.F$.NoAccess?null:e}],__typename:"Doc"}}}).then(d(e===eC.F$.NoAccess?"removed":"updated"))};return(0,s.jsx)(eI,{doc:n,setMobileSharePanelState:r,confirmCallback:e=>{u(e),r("main")},closeCallback:()=>r("main"),initialAccessType:o,accessOptions:[{accessType:K.aXG.Edit},{accessType:K.aXG.Comment},{accessType:K.aXG.View},{accessType:eC.F$.NoAccess}],passwordDialog:o===eC.F$.NoAccess?"disabled":"visible",showBackButton:!0})};var eZ=t(38036),eY=t(12805),e0=t(66546),e1=t(57405);let e6=e=>{let{children:i,showDivider:t=!0,isDark:n=!1,...l}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e1.T,{spacing:1,align:"stretch",py:4,...l,children:i}),t&&(0,s.jsx)(x.c,{borderColor:n?"gray.600":"gray.200"})]})},e5=e=>{let{icon:i,rtlIcon:t,...n}=e,l=(0,er.fW)();return(0,s.jsx)(y.g,{icon:l?t:i,...n})},e2=(e,i)=>{var t,s;let n="DocCollaborator"===e.__typename?null==(t=e.user.displayName)?void 0:t.toUpperCase():"DocInvitation"===e.__typename?e.email.toUpperCase():"",l="DocCollaborator"===i.__typename?null==(s=i.user.displayName)?void 0:s.toUpperCase():"DocInvitation"===i.__typename?i.email.toUpperCase():"";return!l||n&&n<l?-1:!n||l&&n>l?1:0},e4=(e,i)=>{if(e.permission!==i.permission){if("manage"===e.permission)return -1;if("manage"===i.permission)return 1}return e2(e,i)},e3=e=>{var i,t;let{doc:n,setMobileSharePanelState:r,canManage:o,setLastSearchText:a}=e,d=(0,l.d)(),{user:u}=(0,W.ur)(),x=(0,er.fW)(),[h,m]=(0,k.useState)(!1),[f,b]=(0,k.useState)(null),[w,S]=(0,k.useState)(!1),_=(null==n?void 0:n.collaborators)||[],[I]=(0,K.VXs)(),A=(null==n?void 0:n.invitations)||[],R=[..._,...A].sort(e4),E=_.filter(e=>e.permission===K.aXG.Manage).length,T=(null==n||null==(i=n.organization)?void 0:i.id)||"",{isConnected:P}=(0,K.utY)(),z=o&&P,[O,M]=(0,k.useState)(""),[F]=(0,K.AmA)(),N=(0,eS.dU)("gray.600","gray.200"),L=e=>()=>{d({title:"updated"===e?D.Ru._({id:"Xpw8aE"}):D.Ru._({id:"jwO7L7"}),status:"success",duration:5e3,isClosable:!0,position:"top"})},G=e=>{if((null==f?void 0:f.__typename)!=="DocCollaborator")return;let i=f.user;if(!i)return;let t={docId:n.id,collaborators:[{userId:i.id,permission:e}]};I({variables:t,optimisticResponse:{addCollaborators:{id:t.docId,collaborators:_.map(t=>({...t,permission:t.user.id===i.id?e:t.permission})),invitations:A,__typename:"Doc"}}}).then(L("updated")).catch(()=>{})},B=e=>{if((null==f?void 0:f.__typename)!=="DocInvitation")return;let i={docId:n.id,collaborators:[{email:f.email,permission:e}]};I({variables:i,optimisticResponse:{addCollaborators:{id:i.docId,invitations:A.map(i=>({...i,permission:i.email===f.email?e:i.permission})),collaborators:_,__typename:"Doc"}}}).then(L("updated")).catch(()=>{console.warn("Error updating permission")})},U=()=>{if(f)if((null==f?void 0:f.__typename)==="DocCollaborator"){if(!f)return;let e=f.user.id,i={docId:n.id,collaborators:[{userId:e}]};F({variables:i,optimisticResponse:{removeCollaborators:{id:i.docId,collaborators:_.filter(i=>i.user.id!==e),invitations:A,__typename:"Doc"}}}).then(L("removed"))}else{let e={docId:n.id,collaborators:[{email:f.email}]};F({variables:e,optimisticResponse:{removeCollaborators:{id:e.docId,invitations:A.filter(e=>e.email!==f.email),collaborators:_,__typename:"Doc"}}}).then(L("removed"))}},V=f&&"user"in f?f.user.profileImageUrl:"",H=null==f?"":"user"in f?null==(t=f.user)?void 0:t.displayName:null==f?void 0:f.email,$=(0,eX.h5)(["xs","sm"]),X=R.filter(e=>{var i,t,s,n;let l=O.toLowerCase();if("DocCollaborator"===e.__typename){let s=e.user;return(null==s||null==(i=s.email)?void 0:i.toLowerCase().includes(l))||(null==s||null==(t=s.displayName)?void 0:t.toLowerCase().includes(l))}return"DocInvitation"===e.__typename&&(null==e||null==(n=e.email)||null==(s=n.toLowerCase())?void 0:s.includes(l))});return h?(0,s.jsx)(eI,{setMobileSharePanelState:r,confirmCallback:e=>{(null==f?void 0:f.__typename)==="DocCollaborator"&&G(e),(null==f?void 0:f.__typename)==="DocInvitation"&&B(e),m(!1)},closeCallback:()=>m(!1),onRemoveUser:()=>{U(),m(!1)},initialAccessType:null==f?void 0:f.permission,showRemoveUser:!0,accessOptions:[...w?[{accessType:K.aXG.Manage}]:[],{accessType:K.aXG.Edit},{accessType:K.aXG.Comment},{accessType:K.aXG.View}],customHeader:(0,s.jsxs)(p.B,{spacing:4,children:[(0,s.jsxs)(eg.z,{w:"100%",position:"relative",alignItems:"flex-start",children:[(0,s.jsx)(en.K,{icon:(0,s.jsx)(e5,{icon:v.Uec,rtlIcon:v.vmR}),"aria-label":"Back",variant:"unstyled",position:"absolute",height:"fit-content",insetStart:-4,onClick:()=>m(!1)}),(0,s.jsxs)(eg.z,{justifyContent:"center",minW:"100%",children:[(0,s.jsx)(eP.e,{src:V,size:$}),(0,s.jsx)(em.E,{children:H})]})]}),(0,s.jsx)(em.E,{fontSize:"sm",color:"#7A7A7A",children:(0,s.jsx)(C.x6,{id:"zk0Twx"})})]})}):(0,s.jsxs)(p.B,{spacing:3,flex:1,children:[(0,s.jsx)(eo,{setMobileSharePanelState:r,children:(0,s.jsx)(C.x6,{id:"wlQNTg"})}),(0,s.jsxs)(eE.M,{children:[(0,s.jsx)(eD.W,{children:(0,s.jsx)(y.g,{icon:v.$UM,size:"xs"})}),(0,s.jsx)(eZ.p,{value:O,onChange:e=>M(e.target.value),placeholder:D.Ru._({id:"Ar2aUr"})})]}),(0,s.jsx)(em.E,{fontSize:"xs",color:"gray.500",children:(0,s.jsx)(C.x6,{id:"t9qtWL"})}),X.length>0?(0,s.jsx)(e6,{showDivider:!1,isDark:!1,children:X.map(e=>{let i=e.permission===K.aXG.Manage&&E<2,t=!z||i,l=eC.ef[e.permission].title();if("DocCollaborator"===e.__typename){var r;let i=e.user;return(0,s.jsx)(c.a,{onClick:()=>{b(e),S(!(null==e?void 0:e.guest)),m(!0)},as:"button",textAlign:"start",children:(0,s.jsx)(eY._,{testId:i.email,title:"".concat(i.displayName," ").concat(i.id===(null==u?void 0:u.id)?D.Ru._({id:"dDUgzP"}):""),img:(0,s.jsx)(eP.e,{name:i.displayName,src:i.profileImageUrl,size:"sm"}),subtitle:t?void 0:i.email,isDisabled:t,disabledText:l,workspaceGuestInvite:!t&&e.guest?(0,s.jsx)(e0.L,{name:i.displayName,workspaceName:null==(r=n.organization)?void 0:r.name,workspaceId:T,email:e.user.email}):void 0,permissionsControl:(0,s.jsxs)(eg.z,{spacing:3,children:[(0,s.jsx)(em.E,{children:l}),(0,s.jsx)(en.K,{minW:"auto",icon:(0,s.jsx)(y.g,{icon:x?v.Uec:v.vmR}),variant:"unstyled","aria-label":"change user's permission"})]})})},e.user.id)}return"DocInvitation"===e.__typename?(0,s.jsx)(c.a,{onClick:()=>{b(e),S(!1),m(!0)},as:"button",textAlign:"start",children:(0,s.jsx)(eY._,{testId:e.email,title:e.email,subtitle:D.Ru._({id:"MActeE"}),img:(0,s.jsx)(ez.j,{bg:"trueblue.50",size:8,children:(0,s.jsx)(y.g,{icon:v.y_8,size:"sm"})}),isDisabled:t,disabledText:l,permissionsControl:(0,s.jsxs)(eg.z,{spacing:3,children:[(0,s.jsx)(em.E,{children:l}),(0,s.jsx)(en.K,{icon:(0,s.jsx)(y.g,{icon:v.vmR}),minW:"auto",variant:"unstyled","aria-label":"change user's permission"})]})})},e.email):null})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.h,{}),(0,s.jsxs)(p.B,{alignItems:"center",spacing:4,children:[(0,s.jsxs)(p.B,{alignItems:"center",children:[(0,s.jsx)(el.D,{size:"lg",children:"We didn’t find a match"}),(0,s.jsx)(em.E,{textAlign:"center",color:N,children:(0,s.jsx)(C.x6,{id:"WSFelQ"})})]}),(0,s.jsx)(j.$,{leftIcon:(0,s.jsx)(y.g,{icon:v.nWR}),shadow:"md",size:"sm",onClick:()=>{a(O),r("invite")},children:(0,s.jsx)(C.x6,{id:"x1m5RZ"})})]}),(0,s.jsx)(g.h,{})]}),(0,s.jsx)(g.h,{}),(0,s.jsx)(j.$,{variant:"ghost",onClick:()=>r("main"),children:(0,s.jsx)(C.x6,{id:"2YCifi"})})]})};var e8=t(99430),e9=t(17496),e7=t(83638),ie=t(5091),ii=t(89528),it=t(74003);let is=e=>{var i;let{onClose:t,onOpen:n,accessLinkEnabled:r,doc:o,isDark:a,segmentEvent:d,isMobile:c=!1}=e,u=(0,l.d)(),{openUpsellModal:x}=(0,it.I)(),h=(0,eb.st)(),[f,{data:b,loading:v}]=(0,K.FTT)(),[y,S]=(0,k.useState)(""),[_,I]=(0,k.useState)(""),[A,{loading:E}]=(0,K.cdD)(),[T]=(0,K.M5P)(),[P]=(0,K.snR)(),z=(0,R.ez)("password_protected_docs",o.organization),O=null==o||null==(i=o.accessLinks)?void 0:i[0],M=(null==O?void 0:O.type)==="password",[F,N]=(0,k.useState)((null==b?void 0:b.getDocPassword)||""),[L,G]=(0,k.useState)(M),B=M||L;(0,k.useEffect)(()=>{if(G(M),!M){S(""),N("");return}f({variables:{docId:o.id},fetchPolicy:"network-only",nextFetchPolicy:"network-only"}).then(e=>{let{data:i}=e;S((null==i?void 0:i.getDocPassword)||""),N((null==i?void 0:i.getDocPassword)||"")})},[o,M,f,S]);let U=(0,k.useCallback)(e=>{if(r)if(z){if(G(e.target.checked),!e.target.checked){if(!M)return;T({variables:{docId:o.id}}).then(()=>{var e;null==h||h.track(eb.VV.DOC_PASSWORD_DISABLED,{doc_id:o.id,file_id:null==(e=o.file)?void 0:e.id}),u({title:(0,s.jsx)(C.x6,{id:"UbegbY"}),status:"success",duration:3e3,isClosable:!0,position:"top"})}),S(""),N("")}}else e.preventDefault(),x({onOpenCallback:t,onCloseCallback:n,segmentEvent:d})},[r,o,M,z,x,n,t,T,d,u,h]),W=(0,k.useCallback)(async()=>{var e,i;if(y.length<4||y.length>64)return void I(D.Ru._({id:"S04MAD",values:{MIN_PASSWORD_LENGTH:4,MAX_PASSWORD_LENGTH:64}}));let t=null==(e=o.file)?void 0:e.searchEngineIndexingEnabled,n=null==(i=o.file)?void 0:i.id;if(!n)return void u({title:(0,s.jsx)(C.x6,{id:"SlfejT"}),description:(0,s.jsx)(C.x6,{id:"v41fCm"}),status:"error",duration:5e3,isClosable:!0,position:"top"});await A({variables:{docId:o.id,password:y},refetchQueries:["GetDocPassword","GetDoc"]}),null==h||h.track(eb.VV.DOC_PASSWORD_ENABLED,{doc_id:o.id,file_id:n}),t?(await P({variables:{fileId:n,enable:!1}}),u((0,X.oe)(o.title))):u({title:(0,s.jsx)(C.x6,{id:"Hw2MHB"}),status:"success",duration:3e3,isClosable:!0,position:"top"}),N(y)},[o,y,N,I,A,P,u,h]);return(0,s.jsxs)(p.B,{w:"100%",children:[(0,s.jsxs)(eg.z,{mt:4,mb:2*!!c,children:[(0,s.jsxs)(eg.z,{children:[(0,s.jsx)(em.E,{children:(0,s.jsx)(C.x6,{id:"F5g7OG"})}),!z&&(0,s.jsx)(ii.zL,{product:"pro"})]}),(0,s.jsx)(g.h,{}),(0,s.jsx)(w.Tz,{label:r?"":(0,s.jsx)(C.x6,{id:"5JvE0U"}),isDisabled:r,placement:"top",shouldWrapChildren:!0,children:(0,s.jsx)(e8.d,{isChecked:L,disabled:!r,onChange:U})})]}),(0,s.jsx)(e9.S,{in:B,children:(0,s.jsxs)(e7.MJ,{isInvalid:!!_,children:[(0,s.jsx)(eg.z,{children:v?(0,s.jsx)(m.E,{height:"40px",width:"50%",borderRadius:"md"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eZ.p,{id:"password",type:"text",value:y,onChange:e=>S(e.currentTarget.value),onKeyUp:e=>{"Enter"===e.key&&W(),_&&y.length>=4&&y.length<=64&&I("")},width:c?"100%":"50%",placeholder:D.Ru._({id:"f7sXvi"}),bg:a?void 0:"white"}),(0,s.jsx)(j.$,{isDisabled:y===F,variant:"plain",onClick:W,isLoading:E,children:(0,s.jsx)(C.x6,{id:"tfDRzk"})})]})}),(0,s.jsx)(e9.S,{in:""!==_,children:(0,s.jsx)(ie.Wt,{children:_})})]})})]})},il=e=>{var i;let{doc:t,setMobileSharePanelState:n}=e,l=null==t||null==(i=t.accessLinks)?void 0:i[0],r=((null==l?void 0:l.permission)?null==l?void 0:l.permission:eC.F$.NoAccess)===eC.F$.NoAccess;return(0,s.jsx)(b.s,{direction:"column",justifyContent:"space-between",pb:2,flex:1,children:(0,s.jsxs)(c.a,{children:[(0,s.jsx)(eo,{setMobileSharePanelState:n,children:(0,s.jsx)(C.x6,{id:"8ZsakT"})}),(0,s.jsx)(is,{segmentEvent:eb.VV.GAMMA_PRO_UPSELL_SHARE_SETTINGS_SET_PASSWORD,doc:t,isDark:!1,isMobile:!0,accessLinkEnabled:!r}),(0,s.jsx)(em.E,{fontSize:"xs",color:"gray.500",my:3,children:(0,s.jsx)(C.x6,{id:"mpXIQf",values:{GAMMA_ARTIFACT_PROPER_NOUN:P.TP}})}),(0,s.jsx)(em.E,{fontSize:"xs",color:"gray.500",mb:4,children:(0,s.jsx)(C.x6,{id:"jMXOQQ"})})]})})},ir=e=>{let{isSharePanelOpen:i,closeIfReady:t,doc:n,editor:l,handleViewAnalyticsClick:r,showAnalytics:o}=e,[a,d]=(0,k.useState)("main"),c=(0,U.rd)(),u=(0,k.useCallback)(()=>{t(),d("main")},[t,d]),[x,h]=(0,k.useState)(void 0);return n?(0,s.jsx)(w.L8,{isDark:c,children:(0,s.jsx)(w.mr,{isOpen:i,onClose:u,topMargin:3,drawerProps:{blockScrollOnMount:!1},children:(0,s.jsxs)(b.s,{px:5,py:4,height:"100%",children:["main"===a&&(0,s.jsx)(eq,{doc:n,setMobileSharePanelState:e=>d(e),handleViewAnalyticsClick:()=>r(),closeSharePanel:u,showAnalytics:o}),"invite"===a&&(0,s.jsx)(eV,{doc:n,setMobileSharePanelState:e=>d(e),selectedAccessLinkPermission:K.aXG.Manage,lastSearchText:x,setLastSearchText:e=>h(e)}),"export"===a&&(0,s.jsx)(eh,{doc:n,editor:l,setMobileSharePanelState:e=>d(e)}),"manage-access"===a&&(0,s.jsx)(eQ,{doc:n,setMobileSharePanelState:e=>d(e)}),"members"===a&&(0,s.jsx)(e3,{doc:n,setMobileSharePanelState:e=>d(e),canManage:!0,setLastSearchText:e=>{h(e)}}),"password"===a&&(0,s.jsx)(il,{doc:n,setMobileSharePanelState:e=>d(e),closeSharePanel:u})]})})}):(0,s.jsx)(s.Fragment,{})};var io=t(64268),ia=t(51504),id=t(38822),ic=t.n(id),iu=t(75748),ix=t(80314),ih=t(33996),ip=t(68455);let im=e=>{let{channel:i,doc:t,isDisabled:n,showDisabledIcon:l=!1}=e,{removeDocChannel:r}=(0,ih.k)(),o=(0,k.useCallback)(()=>{t&&r(t,i.id)},[i.id,t,r]),a=(0,$.gU)({slug:i.slug,id:i.id});return(0,s.jsxs)(eg.z,{py:2,w:"100%",justify:"space-between","data-testid":"workspace-row-".concat(i.id),children:[(0,s.jsx)(c.a,{children:(0,s.jsxs)(b.s,{alignItems:"center",children:[(0,s.jsx)(ek.$,{icon:ip.$,showDisabled:l}),(0,s.jsx)(c.a,{ml:3,opacity:l?.5:1,children:(0,s.jsx)(ix.N,{href:a,target:"_blank",children:i.name})})]})}),(0,s.jsx)(j.$,{size:"sm",variant:"hazardous",onClick:o,isDisabled:n,children:(0,s.jsx)(C.x6,{id:"t/YqKh"})})]},i.id)};var ig=t(24351);let ij=e=>{let{workspaceId:i,docId:t,existingChannels:n,isDisabled:l}=e,r=(0,k.useRef)(null),[o,a]=(0,k.useState)(""),[d,u]=(0,k.useState)([]),[x,h]=(0,k.useState)(!1),{addDocChannel:m}=(0,ih.k)(),{data:g,loading:j}=(0,K.FKb)({variables:{query:o,workspaceId:i},skip:!o});(0,k.useEffect)(()=>{if(j||!g)return;let e=g.search.filter(Boolean);u(e),h(0===e.length)},[g,j]);let f=(0,k.useMemo)(()=>o?d.filter(e=>!n.find(i=>i.id===e.id)):[],[n,o,d]),v=(0,k.useCallback)(e=>{let i=f.find(i=>i.id===e);if(!i)return void console.error("[ChannelSearchBar.addSelectedChannel] No matching channel found");m({docId:t,channel:i,existingChannels:n})},[m,t,n,f]),S=(0,eS.dU)("gray.50","gray.600"),_=(0,eS.dU)("light","dark"),I=(0,eS.dU)("trueblue.50","whiteAlpha.100");return(0,s.jsx)(eR.e,{w:"100%",mb:2,alignItems:"flex-start","data-testid":"sharepanel-channel-search-bar",children:(0,s.jsx)(c.a,{flex:1,children:(0,s.jsxs)(eE.M,{w:"100%",justifyContent:"center",zIndex:1,children:[(0,s.jsx)(b.s,{display:"none",position:"absolute",h:"100%",w:"100%",alignItems:"center",justifyContent:"center",bg:S,zIndex:"overlay",opacity:.4,children:(0,s.jsx)(eT.y,{})}),(0,s.jsxs)(eO.j9,{rollNavigation:!0,multiple:!0,emptyState:()=>!!x&&(0,s.jsx)(b.s,{direction:"column",justify:"center",align:"center",w:"100%",my:6,children:(0,s.jsx)(c.a,{w:"80%",maxW:"200px",mb:6,alignContent:"center",children:(0,s.jsx)(ig.p,{size:"sm",title:(0,s.jsx)(C.x6,{id:"aywdyd"}),description:(0,s.jsx)(C.x6,{id:"kXnLEt"})})})}),suggestWhenEmpty:!1,openOnFocus:!0,filter:()=>!0,onSelectOption:e=>{let{item:i}=e;v(i.value),a("")},children:[(0,s.jsxs)(eD.W,{pointerEvents:"none",color:(0,eS.dU)("gray.300","gray.600"),h:"100%",flexDirection:"column",children:[(0,s.jsx)(b.s,{flex:1}),(0,s.jsx)(b.s,{h:10,py:4,alignItems:"center",children:(0,s.jsx)(eA.W,{w:10})})]}),(0,s.jsx)(eO.Rv,{ref:r,"data-testid":"autocomplete-channels-input",cursor:l?"not-allowed":void 0,disabled:l,w:"100%",paddingInlineStart:5,wrapStyles:{px:2},fontSize:"md",placeholder:D.Ru._({id:"KmCmUJ"}),transition:"width 1s ease-in-out",value:o,onChange:e=>{let{target:i}=e,{value:t}=i;a(t),t||u([])}}),(0,s.jsx)(eO.HN,{w:"100%",mt:0,display:o.length>0?"flex":"none","data-theme":_,children:f.length>0&&f.map(e=>{let{id:i,name:t,memberCount:n,isMember:l,members:r}=e;return(0,s.jsx)(eO.qF,{"data-testid":"autocomplete-item-channel-".concat(i),value:{id:e.id},getValue:e=>e.id,align:"center",_focus:{bg:I},children:(0,s.jsxs)(eg.z,{spacing:4,p:0,flex:1,children:[(0,s.jsx)(c.a,{color:"gray.600",children:(0,s.jsx)(y.g,{icon:ip.$})}),(0,s.jsxs)(p.B,{spacing:0,flex:"1",children:[(0,s.jsx)(em.E,{children:t}),(0,s.jsx)(em.E,{fontSize:"sm",color:"gray.400",children:l?(0,s.jsx)(C.x6,{id:"tWPlLK",values:{0:n||0}}):(0,s.jsx)(C.x6,{id:"pkIIls",values:{0:n||0}})})]}),(0,s.jsx)(w.KZ,{size:"xs",overflowTooltipLabel:D.Ru._({id:"25VyZX"}),avatars:r||[],max:3,onClick:e=>{e.preventDefault(),e.stopPropagation()}})]})},i)})})]})]})})})};var ib=t(1139),iv=t(36216);let iy=e=>{let{invitationCount:i,isOpen:t,onClose:n,onSendInvitationsClick:l,onDiscardClick:c}=e;return t?(0,s.jsxs)(r.aF,{returnFocusOnClose:!1,onClose:n,closeOnOverlayClick:!0,isOpen:!0,isCentered:!0,children:[(0,s.jsx)(o.m,{}),(0,s.jsxs)(a.$,{children:[(0,s.jsx)(d.r,{children:(0,s.jsx)(C.x6,{id:"tW/kB6",values:{invitationCount:i}})}),(0,s.jsx)(u.s,{}),(0,s.jsx)(h.c,{children:(0,s.jsx)(em.E,{children:(0,s.jsx)(C.x6,{id:"qxNK2k",values:{invitationCount:i}})})}),(0,s.jsx)(f.j,{children:(0,s.jsxs)(p.B,{spacing:2,direction:"row",align:"center",children:[(0,s.jsx)(j.$,{onClick:c,children:(0,s.jsx)(C.x6,{id:"bzSI52"})}),(0,s.jsx)(j.$,{variant:"solid",onClick:l,children:(0,s.jsx)(C.x6,{id:"6dWGPZ",values:{invitationCount:i}})})]})})]})]}):null};var iw=t(99599);let iC=(0,eM.P)(c.a),ik=(e,i,t)=>{if(!t)return e;let s=[...e],n=e.findIndex(e=>"email"in e&&e.email===t),l=i.find(e=>e.email===t);return -1!==n&&s.splice(n,1),[...s,l||{email:t}]},iS=(e,i)=>{let t=(0,ey.e7)(i.map(e=>"displayName"in e?e.displayName:e.email),3);return e===K.aXG.Manage?D.Ru._({id:"4bKxWq",values:{userNames:t,GAMMA_ARTIFACT_PROPER_NOUN:P.TP,0:i.length}}):e===K.aXG.Edit?D.Ru._({id:"3rbi6Y",values:{userNames:t,GAMMA_ARTIFACT_PROPER_NOUN:P.TP,0:i.length}}):e===K.aXG.Comment?D.Ru._({id:"uGWY40",values:{userNames:t,GAMMA_ARTIFACT_PROPER_NOUN:P.TP,0:i.length}}):e===K.aXG.View?D.Ru._({id:"p5IG6F",values:{userNames:t,GAMMA_ARTIFACT_PROPER_NOUN:P.TP,0:i.length}}):D.Ru._({id:"Ai1TAT",values:{userNames:t,GAMMA_ARTIFACT_PROPER_NOUN:P.TP,0:i.length}})},i_=e=>{let{workspaceId:i,docId:t,user:n,existingDocCollaborators:r,existingInvitations:o,registerDoneFn:a,isDisabled:d}=e,u=(0,l.d)(),[x,h]=(0,k.useState)(!1),p=(0,k.useRef)(void 0),m=(0,k.useRef)(null),[g,f]=(0,k.useState)(""),[S,_]=(0,k.useState)([]),[I,A]=(0,k.useState)(K.aXG.Edit),[R,E]=(0,k.useState)(new ev.c),[T,P]=(0,k.useState)([]),z=T.filter(e=>"email"in e),O=(0,eb.st)(),M=r.map(e=>e.user),{isOpen:F,onOpen:N,onClose:L}=(0,ea.j)({id:"unsentInvitationsModalDisclosure"}),[G,{loading:B,error:U}]=(0,K.VXs)();(0,ew.KW)("Error inviting collaborators.",U);let W=(0,iv.t)(K.HdQ),{data:V,loading:H}=(0,K.puH)({variables:{query:g,workspaceId:i},skip:!g});(0,k.useEffect)(()=>{!H&&V&&_(V.search.filter(Boolean))},[V,H]);let $=(0,k.useMemo)(()=>g?S.filter(e=>"User"===e.__typename&&e.id!==n.id&&!z.concat(M).find(i=>i.email===e.email)):[],[S,M,g,z,n.id]),X=!!g&&!$.find(e=>e.email===g),J=I===K.aXG.Manage&&z.some(e=>!("__typename"in e&&"User"===e.__typename)),q=T.concat({email:g}).filter(e=>!("email"in e)||(0,ej.t)(e.email||"")),Q=!!T.length,Z=!!q.length;(0,k.useEffect)(()=>{a(()=>()=>(Z?N():R.resolve(),R.promise))},[a,R,Z,N]);let Y=(0,k.useCallback)(async e=>{h(!0),P(i=>e.reduce((e,i)=>ik(e,$,i.trim()),i));let t=(await Promise.all(e.map(e=>W({workspaceId:i,query:e}).then(i=>{var t;return null==(t=i.data)?void 0:t.search.find(i=>"User"===i.__typename&&i.email===e)})))).filter(Boolean);P(i=>e.reduce((e,i)=>ik(e,t,i.trim()),i)),h(!1)},[$,W,i]),ee=(0,k.useCallback)(async()=>{if(0===z.length)return;let e=ik(z,$,g.trim()).filter(e=>"email"in e&&(0,ej.t)(e.email||"")),i=[...r,...e.map(e=>{if("id"in e)return{docId:t,user:e,guest:!1,permission:I,__typename:"DocCollaborator"}})].filter(e=>!!e),s=[...o,...e.map(e=>{if(!("id"in e))return{id:"temp",docTitle:"temp-title",invitedBy:n,docId:t,email:e.email,permission:I,__typename:"DocInvitation"}})].filter(e=>!!e);return G({variables:{docId:t,collaborators:e.map(e=>({..."id"in e?{userId:e.id}:{email:e.email},permission:I}))},update:(e,i)=>{let{data:s}=i;e.writeFragment({id:"Doc:".concat(t),fragment:K.rgw,data:null==s?void 0:s.addCollaborators})},optimisticResponse:{addCollaborators:{id:t,collaborators:i,invitations:s}}}).then(()=>{u({title:D.Ru._({id:"Ka86rB",values:{0:e.length}}),description:iS(I,e),status:"success",duration:5e3,isClosable:!0,position:"top"}),null==O||O.track(eb.VV.DOC_COLLABORATOR_INVITED,{doc_id:t,source:"share-panel",number_of_invites_sent:e.length,permissions:I})})},[G,t,g,I,$,z,r,o,u,n,O]),ei=(0,k.useCallback)(async()=>Promise.all([ee()]).then(()=>{var e;P([]),f(""),null==(e=p.current)||e.resetItems(!0),R.resolve(),E(new ev.c)}).catch(e=>{console.warn(e)}),[ee,R]),et=d||B||x,es=(0,eS.dU)("light","dark"),en=(0,eS.dU)("trueblue.50","whiteAlpha.100"),el=(0,eS.dU)("trueblue.100","whiteAlpha.200");return(0,s.jsxs)(eR.e,{w:"100%",mb:2,alignItems:"flex-start","data-testid":"sharepanel-search-bar",children:[(0,s.jsx)(c.a,{flex:1,children:(0,s.jsxs)(eE.M,{w:"100%",justifyContent:"center",zIndex:2,children:[(0,s.jsx)(b.s,{display:x?"flex":"none",position:"absolute",h:"100%",w:"100%",alignItems:"center",justifyContent:"center",zIndex:"overlay",opacity:.4,children:(0,s.jsx)(eT.y,{})}),(0,s.jsxs)(eO.j9,{ref:p,values:T,maxSelections:100,maxSuggestions:20,creatable:!0,multiple:!0,freeSolo:!0,suggestWhenEmpty:!1,openOnFocus:!0,filter:(e,i)=>!z.find(e=>e.email===i),onSelectOption:e=>{let{item:i}=e,{type:t}=i.originalValue;"collaborator"===t&&P(e=>ik(e,$,i.value)),f("")},onTagRemoved:e=>{P(i=>[...i].filter(i=>"email"in i?i.email!==e:!("id"in i)||i.id!==e))},children:[(0,s.jsxs)(eD.W,{pointerEvents:"none",color:(0,eS.dU)("gray.300","gray.600"),h:"100%",flexDirection:"column",children:[(0,s.jsx)(b.s,{flex:1}),(0,s.jsx)(b.s,{h:10,py:4,alignItems:"center",children:(0,s.jsx)(eA.W,{w:10})})]}),(0,s.jsx)(eO.Rv,{ref:m,"data-testid":"autocomplete-collaborators-input",cursor:et?"not-allowed":void 0,disabled:et,w:"100%",paddingInlineStart:5,wrapStyles:{px:2},fontSize:"md",placeholder:D.Ru._({id:"P8H57Z"}),transition:"width 1s ease-in-out",value:g,onKeyDown:e=>{let{key:i}=e;if("Backspace"===i&&0===g.length&&T.length>0){let e=T.slice(-1).pop();if(e){var t;null==(t=p.current)||t.removeItem("email"in e?e.email:e.id)}}},onPaste:e=>{e.preventDefault(),e.stopPropagation(),Y(e.clipboardData.getData("Text").trim().split(/[,|;\s]+/)),f(""),_([])},onChange:e=>{let{target:i}=e,{value:t}=i;f(t),t||_([])},children:T.map((e,i)=>(0,s.jsx)(iw.w,{selectedCollaborator:e,saveRoomForPermissionChooser:0===i,handleRemoveClick:()=>{var i;null==(i=p.current)||i.removeItem(e.email)}},"id"in e?e.id:e.email))}),(0,s.jsx)(eO.HN,{w:"100%",mt:0,display:g.length>0?"flex":"none","data-theme":es,children:$.map(e=>{let{id:i,email:t,displayName:n,profileImageUrl:l}=e;return(0,s.jsx)(eO.qF,{fixed:!0,"data-testid":"autocomplete-item-user-".concat(i),value:{email:t,type:"collaborator"},getValue:e=>e.email,align:"center",_focus:{bg:en},children:(0,s.jsxs)(eg.z,{children:[(0,s.jsx)(eP.e,{size:"sm",name:n,src:l}),(0,s.jsxs)(c.a,{children:[(0,s.jsx)(em.E,{textTransform:"capitalize",children:n}),(0,s.jsx)(em.E,{fontSize:"xs",color:"gray.500",children:null==t?void 0:t.toLowerCase()})]})]})},i)}).concat((0,s.jsx)(eO.qF,{value:{email:g,type:"collaborator"},align:"center",display:X?"flex":"none",_focus:{bg:en},children:(0,s.jsxs)(eg.z,{children:[(0,s.jsx)(ez.j,{bg:el,size:8,children:(0,s.jsx)(y.g,{icon:v.y_8})}),(0,s.jsx)(em.E,{size:"md",children:g})]})},g))})]}),(0,s.jsx)(ib.z,{in:Q,unmountOnExit:!0,children:(0,s.jsx)(eD.t,{w:"auto",justifyContent:"flex-end",pe:1,children:(0,s.jsx)(eC.qk,{isDisabled:B,options:[K.aXG.Manage,K.aXG.Edit,K.aXG.Comment,K.aXG.View],variant:"ghost",selected:I,onClick:e=>A(e)})})})]})}),(0,s.jsx)(iC,{overflowX:"hidden",me:-2,transition:"slow",animate:{maxWidth:Q?"200px":"0px"},children:(0,s.jsx)(w.Tz,{label:(0,s.jsx)(C.x6,{id:"Rxin92"}),"aria-label":D.Ru._({id:"Rxin92"}),isDisabled:!J,placement:"top",children:(0,s.jsx)(c.a,{children:(0,s.jsx)(j.$,{variant:"solid",onClick:ei,isDisabled:!Z||J,isLoading:B,"data-testid":"add-selected-items",children:(0,s.jsx)(C.x6,{id:"m16xKo"})})})})}),(0,s.jsx)(w.L8,{isDark:!1,children:(0,s.jsx)(iy,{invitationCount:q.length,onDiscardClick:()=>{L(),R.resolve(),E(new ev.c)},onSendInvitationsClick:()=>{L(),ei()},onClose:()=>{L(),R.reject(),E(new ev.c)},isOpen:F})})]})},iI=(e,i)=>{var t,s;let n="DocCollaborator"===e.__typename?null==(t=e.user.displayName)?void 0:t.toUpperCase():"DocInvitation"===e.__typename?e.email.toUpperCase():"",l="DocCollaborator"===i.__typename?null==(s=i.user.displayName)?void 0:s.toUpperCase():"DocInvitation"===i.__typename?i.email.toUpperCase():"";return!l||n&&n<l?-1:!n||l&&n>l?1:0},iA=(e,i)=>{if(e.permission!==i.permission){if("manage"===e.permission)return -1;if("manage"===i.permission)return 1}return iI(e,i)},iR=e=>{var i,t;let{workspaceId:n,isFromOtherOrg:r,doc:o,user:a,setVerifySearchDone:d,canManage:u,isDark:x=!1}=e,h=(0,B.b)(null==o?void 0:o.file),p=(0,l.d)(),{isConnected:m}=(0,K.utY)(),[g,{error:j}]=(0,K.VXs)(),[f,{error:w}]=(0,K.AmA)();(0,ew.KW)("Error updating collaborator.",j),(0,ew.KW)("Error removing collaborator.",w);let[k]=(0,K.Ix6)(),S=u&&m,_=!r,I=!!(!(null==o?void 0:o.orgAccess)&&(null==o?void 0:o.channels)&&(null==o?void 0:o.channels.length)>0&&(null==o?void 0:o.channels.every(e=>ic()(e.permission)))),A=(0,X.vz)(o),R=(null==o?void 0:o.collaborators)||[],E=(null==o?void 0:o.invitations)||[],T=R.filter(e=>e.permission===K.aXG.Manage).length,z=[...R,...E].sort(iA),O=e=>()=>{p({title:"updated"===e?D.Ru._({id:"Xpw8aE"}):D.Ru._({id:"jwO7L7"}),status:"success",duration:5e3,isClosable:!0,position:"top"})},M=o.orgAccess?o.orgAccess:eC.F$.NoAccess,F=M!==eC.F$.NoAccess;return(0,s.jsxs)(b.s,{direction:"column",maxH:"max(calc(100dvh - 390px), 500px)",children:[S&&(0,s.jsx)(i_,{workspaceId:n,docId:o.id,user:a,existingDocCollaborators:R,existingInvitations:E,registerDoneFn:d,isDisabled:!u}),(0,s.jsx)(iu.r,{description:(0,s.jsx)(C.x6,{id:"i5bpoc"}),isConnected:m,mb:4}),A&&(0,s.jsx)(em.E,{fontSize:"sm",pt:2,children:A}),(0,s.jsxs)(e6,{isDark:x,children:[(0,s.jsx)(eY._,{testId:"workspace",title:(0,s.jsx)(C.x6,{id:"wtxjAY"}),subtitle:F?eC.ef[M].longDescription(null==o||null==(i=o.organization)?void 0:i.name):"",img:(0,s.jsx)(ek.$,{icon:v.URI,showDisabled:!F}),isDisabled:!S,disabledText:eC.ef[M].title(),permissionsControl:(0,s.jsx)(eC.qk,{isDisabled:!S,selected:M,options:[K.aXG.Manage,K.aXG.Edit,K.aXG.Comment,K.aXG.View,...h?[]:[eC.F$.NoAccess]],onClick:e=>{let i={id:o.id,orgAccess:e===eC.F$.NoAccess?null:e};k({variables:i,optimisticResponse:{updateDoc:{...i,__typename:"Doc"}},refetchQueries:["GetDocs"]}).then(O(e===eC.F$.NoAccess?"removed":"updated"))}})}),_&&(null==(t=o.channels)?void 0:t.map(e=>(0,s.jsx)(im,{channel:e,doc:o,isDisabled:!m,showDisabledIcon:I},e.id))),!!o.orgAccess&&_&&!o.site&&!I&&(0,s.jsx)(c.a,{w:"100%",mt:2,children:(0,s.jsx)(ij,{existingChannels:o.channels,workspaceId:n,docId:o.id,isDisabled:!m})}),(0,s.jsx)(e9.S,{in:_&&I,children:(0,s.jsxs)(io.F,{status:"warning",children:[(0,s.jsx)(ia._,{}),(0,s.jsx)(C.x6,{id:"RZRM4l",values:{GAMMA_ARTIFACT_PROPER_NOUN:P.TP}})]})})]}),z&&(0,s.jsx)(c.a,{overflowY:"auto",children:(0,s.jsx)(e6,{showDivider:!1,isDark:x,children:z.map(e=>{let i=e.permission===K.aXG.Manage&&T<2,t=!S||i,l=i?D.Ru._({id:"0q0LJR"}):void 0,r=eC.ef[e.permission].title();if("DocCollaborator"===e.__typename){var d;let i=e.user;return(0,s.jsx)(eY._,{testId:i.email,title:"".concat(i.displayName," ").concat(i.id===a.id?D.Ru._({id:"dDUgzP"}):""),img:(0,s.jsx)(eP.e,{name:i.displayName,src:i.profileImageUrl,size:"sm"}),subtitle:t?void 0:i.email,isDisabled:t,disabledText:r,tooltipText:l,workspaceGuestInvite:!t&&e.guest?(0,s.jsx)(e0.L,{name:i.displayName,workspaceName:null==(d=o.organization)?void 0:d.name,workspaceId:n,email:e.user.email}):void 0,permissionsControl:(0,s.jsx)(eC.qk,{isDisabled:t,selected:e.permission,options:[K.aXG.Manage,K.aXG.Edit,K.aXG.Comment,K.aXG.View],disabledOptions:e.guest?[{permission:K.aXG.Manage,reason:D.Ru._({id:"Rxin92"})}]:[],onClick:e=>{let t={docId:o.id,collaborators:[{userId:i.id,permission:e}]};g({variables:t,optimisticResponse:{addCollaborators:{id:t.docId,collaborators:R.map(t=>({...t,permission:t.user.id===i.id?e:t.permission})),invitations:E,__typename:"Doc"}}}).then(O("updated")).catch(()=>{})},onRemove:()=>{let e={docId:o.id,collaborators:[{userId:i.id}]};f({variables:e,optimisticResponse:{removeCollaborators:{id:e.docId,collaborators:R.filter(e=>e.user.id!==i.id),invitations:E,__typename:"Doc"}}}).then(O("removed"))}})},i.id)}return"DocInvitation"===e.__typename?(0,s.jsx)(eY._,{testId:e.email,title:e.email,subtitle:D.Ru._({id:"MActeE"}),img:(0,s.jsx)(ez.j,{bg:"trueblue.50",size:8,children:(0,s.jsx)(y.g,{icon:v.y_8,size:"sm"})}),isDisabled:t,disabledText:r,permissionsControl:(0,s.jsx)(eC.qk,{selected:e.permission,options:[K.aXG.Manage,K.aXG.Edit,K.aXG.Comment,K.aXG.View],disabledOptions:[{permission:K.aXG.Manage,reason:D.Ru._({id:"Rxin92"})}],onClick:i=>{let t={docId:o.id,collaborators:[{email:e.email,permission:i}]};g({variables:t,optimisticResponse:{addCollaborators:{id:t.docId,invitations:E.map(t=>({...t,permission:t.email===e.email?i:t.permission})),collaborators:R,__typename:"Doc"}}}).then(O("updated")).catch(()=>{console.warn("Error updating permission")})},onRemove:()=>{let i={docId:o.id,collaborators:[{email:e.email}]};f({variables:i,optimisticResponse:{removeCollaborators:{id:i.docId,invitations:E.filter(i=>i.email!==e.email),collaborators:R,__typename:"Doc"}}}).then(O("removed"))}})},e.email):null})})})]})};var iE=t(22621),iT=t(3534);let iD=e=>{let{doc:i,onSharePanelOpen:t,onSharePanelClose:n}=e,l=(0,k.useMemo)(()=>(0,$.Wp)({docId:i.id,docTitle:i.title}),[i.id,i.title]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(em.E,{fontSize:"sm",pt:2,pb:2,children:(0,s.jsx)(C.x6,{id:"2QJhbq",values:{GAMMA_ARTIFACT_PROPER_NOUN:P.TP}})}),(0,s.jsx)(c.a,{pb:4,children:(0,s.jsx)(iE.h,{embedCode:l,docId:i.id,isDisabled:!1})}),(0,s.jsx)(iT.w,{onClose:n,onOpen:t,segmentEvent:eb.VV.GAMMA_PRO_UPSELL_SHARE_SETTINGS_REMOVE_WATERMARK,targetWorkspace:i.organization})]})};var iP=t(5221),iz=t(99745),iO=t(78140),iM=t(36999),iF=t(41283),iN=t(37930),iL=t(48478),iG=t(40162),iB=t(81278),iU=t(55597);let iW=e=>{let{title:i=(0,s.jsx)(C.x6,{id:"uKp64B"}),description:t=(0,s.jsx)(C.x6,{id:"iUGE+t"}),buttonLabel:n=(0,s.jsx)(C.x6,{id:"u5hSeG"}),completedMessage:l=(0,s.jsx)(C.x6,{id:"ZOLfB/"}),onClick:r}=e,[o,a]=(0,k.useState)(!1);return(0,s.jsx)(io.F,{colorScheme:"purple",children:(0,s.jsxs)(eg.z,{w:"100%",spacing:"4",children:[(0,s.jsxs)(p.B,{alignItems:"center",spacing:"0",children:[(0,s.jsx)(c.a,{color:"purple.500",children:(0,s.jsx)(y.g,{icon:iU.rIc,size:"lg"})}),(0,s.jsx)(em.E,{fontWeight:"bold",fontSize:"xs",color:"purple.600",children:(0,s.jsx)(C.x6,{id:"ICUIAA"})})]}),(0,s.jsxs)(p.B,{spacing:"0",w:"100%",children:[(0,s.jsx)(em.E,{fontWeight:"bold",fontSize:"sm",children:i}),(0,s.jsx)(em.E,{fontSize:"xs",children:t})]}),o?(0,s.jsxs)(eg.z,{spacing:"2",children:[(0,s.jsx)(y.g,{icon:iU.SGM}),(0,s.jsx)(em.E,{fontSize:"sm",fontWeight:"semibold",whiteSpace:"nowrap",children:l})]}):(0,s.jsx)(j.$,{size:"sm",variant:"plain",flexShrink:0,onClick:()=>{a(!0),r()},children:n})]})})};var iV=t(37605),iH=t(17928),i$=t(33571);let iX=e=>{let{doc:i,editor:t,onSharePanelOpen:n,onSharePanelClose:l,isMultipage:r=!1,cardRangesDefault:o=""}=e,a=i.title,d=(0,W.Iy)("edit",i),c=(0,ee.Is)(i),u=!!(t&&d),[x,h]=(0,k.useState)(o),[m,g]=(0,k.useState)(""),[f,b]=(0,k.useState)(""!==o?"custom":"all"),w=(0,I.u)("docShowcase"),S=(0,I.u)("export"),_=(0,I.u)("googleSlidesExport");return S?(0,s.jsx)(e1.T,{spacing:4,align:"start",pt:2,children:(0,s.jsxs)(J.G_,{clientId:Z.$.GOOGLE_DRIVE_IMPORT_CLIENT_ID,children:[(0,s.jsx)(em.E,{fontSize:"sm",children:r?(0,s.jsx)(C.x6,{id:"WrniAy",values:{docTitle:a},components:{0:(0,s.jsx)("strong",{})}}):(0,s.jsx)(C.x6,{id:"qwhOQ/",values:{GAMMA_ARTIFACT_PROPER_NOUN:P.TP}})}),(0,s.jsxs)(eg.z,{width:"100%",children:[(0,s.jsxs)(iO.W,{closeOnSelect:!0,children:[(0,s.jsxs)(iM.I,{size:"md",boxShadow:"none",textAlign:"start",alignSelf:"flex-start",flex:1,as:j.$,rightIcon:(0,s.jsx)(y.g,{icon:v.Jt$}),children:["all"===f&&(0,s.jsx)(C.x6,{id:"4upC5z"}),"custom"===f&&(0,s.jsx)(C.x6,{id:"ioxL7D"})]}),(0,s.jsx)(iF.c,{children:(0,s.jsxs)(iN.i,{defaultValue:f,value:f,type:"radio",onChange:e=>b(e),children:[(0,s.jsx)(iL.k,{value:"all",children:(0,s.jsx)(C.x6,{id:"4upC5z"})},"all"),(0,s.jsx)(iL.k,{value:"custom",children:(0,s.jsx)(C.x6,{id:"ioxL7D"})},"custom")]})})]}),(0,s.jsxs)(e7.MJ,{flex:1,isInvalid:!!m,children:["custom"===f&&(0,s.jsx)(eZ.p,{id:"card-range",type:"text",value:x,onKeyUp:()=>{if(!x)return void g("");let e=x.match(/^\d+(?:-\d+)?(?:,\h*\d+(?:-\d+)?)*$/gm);e||g(D.Ru._({id:"nmWMk6"})),m&&e&&g("")},onChange:e=>h(e.currentTarget.value),placeholder:D.Ru._({id:"pHUJ/X"})}),(0,s.jsx)(e9.S,{in:""!==m,children:(0,s.jsx)(ie.Wt,{children:m})})]})]}),(0,s.jsxs)(p.B,{spacing:2,width:"100%",children:[(0,s.jsx)(iJ,{format:"pdf",label:"PDF",icon:es.q.pdf.icon,accentColor:es.q.pdf.accentColor,doc:i,editor:t,cardRanges:"custom"===f&&""!==x?x:void 0}),(0,s.jsx)(iJ,{format:"pptx",label:"PowerPoint",icon:es.q.pptx.icon,accentColor:es.q.pptx.accentColor,doc:i,editor:t,cardRanges:"custom"===f&&""!==x?x:void 0}),_&&(0,s.jsx)(iJ,{format:"google_slides",label:"Google Slides",icon:es.q.google_slides.icon,accentColor:es.q.google_slides.accentColor,doc:i,editor:t,cardRanges:"custom"===f&&""!==x?x:void 0,customLabel:D.Ru._({id:"wj3Fyq"}),customInProgressMessage:D.Ru._({id:"9ZkGtt"})}),(0,s.jsx)(iJ,{format:"image",label:"PNG",icon:es.q.png.icon,accentColor:es.q.png.accentColor,doc:i,editor:t,cardRanges:"custom"===f&&""!==x?x:void 0,customLabel:D.Ru._({id:"wAyz08"}),customInProgressMessage:D.Ru._({id:"RSRVl9"})})]}),d&&(0,s.jsxs)(p.B,{children:[(0,s.jsx)(em.E,{fontSize:"sm",children:r?(0,s.jsx)(C.x6,{id:"ZQ1V5I"}):(0,s.jsx)(C.x6,{id:"If/5+e"})}),(0,s.jsx)(i$.O,{exportMode:f,cardRangesInput:x,doc:i})]}),(0,s.jsx)(iK,{fontDownloadLinks:c,showPageSetupTip:u,onOpenPageSetup:()=>{l(),iH.LF.emit(iH.DN.OPEN_PAGE_SETUP,"cards")}}),(0,s.jsxs)(p.B,{w:"100%",children:[d&&(0,s.jsx)(iT.w,{onClose:l,onOpen:n,segmentEvent:iV.VV.GAMMA_PRO_UPSELL_EXPORT_SETTINGS_REMOVE_WATERMARK,targetWorkspace:i.organization}),w&&(0,s.jsx)(iW,{title:(0,s.jsx)(C.x6,{id:"Dj23Em"}),description:(0,s.jsx)(C.x6,{id:"vmddJA",values:{GAMMA_PROPER_NOUN:P.On}}),buttonLabel:(0,s.jsx)(C.x6,{id:"p9wZJA",values:{GAMMA_PROPER_NOUN:P.On}}),onClick:()=>{null===eb.zS||void 0===eb.zS||eb.zS.track(iV.VV.AI_DOC_SHOWCASE_ALLOWED,{doc_id:i.id})}})]})]})}):(0,s.jsxs)(io.F,{status:"warning",children:[(0,s.jsx)(iP.X,{children:(0,s.jsx)(C.x6,{id:"CfztD3"})}),(0,s.jsx)(iz.T,{children:(0,s.jsx)(C.x6,{id:"iKtv2V"})})]})},iK=e=>{let{fontDownloadLinks:i,showPageSetupTip:t,onOpenPageSetup:n}=e,l=i.length>0;return l||t?(0,s.jsxs)(p.B,{spacing:2.5,w:"100%",children:[l&&(0,s.jsxs)(io.F,{variant:"subtle",colorScheme:"gray",children:[(0,s.jsx)(ia._,{pt:"1",children:(0,s.jsx)(y.g,{icon:v.jrc,fixedWidth:!0})}),(0,s.jsxs)(p.B,{spacing:.5,children:[(0,s.jsx)(iP.X,{children:(0,s.jsx)(C.x6,{id:"UcLOKc"})}),(0,s.jsx)(em.E,{children:(0,s.jsx)(C.x6,{id:"izsdAT"})}),(0,s.jsx)(iG.B,{spacing:"2",pt:"2",children:i.map(e=>{let{name:i,url:t}=e;return(0,s.jsx)(j.$,{size:"xs",onClick:t?()=>window.open(t,"_blank"):void 0,cursor:t?"pointer":void 0,leftIcon:t?(0,s.jsx)(y.g,{icon:v.a_I,size:"sm",fixedWidth:!0}):void 0,children:i},"".concat(i,"-").concat(null!=t?t:"no-url"))})})]})]}),(0,s.jsxs)(io.F,{variant:"subtle",colorScheme:"gray",children:[(0,s.jsx)(ia._,{pt:"1",children:(0,s.jsx)(y.g,{icon:v.zpE,fixedWidth:!0})}),(0,s.jsxs)(p.B,{spacing:.5,children:[(0,s.jsx)(iP.X,{children:(0,s.jsx)(C.x6,{id:"6ME5PO"})}),(0,s.jsxs)(em.E,{children:[(0,s.jsx)(C.x6,{id:"OrqjGh"})," ",(0,s.jsx)(w.qT,{label:(0,s.jsx)(C.x6,{id:"Sis0Fm",values:{GAMMA_PROPER_NOUN:P.On}})})]})]})]}),t&&(0,s.jsx)(em.E,{fontSize:"sm",children:(0,s.jsx)(C.x6,{id:"8LhjM/",components:{0:(0,s.jsx)(j.$,{variant:"link",fontSize:"inherit",cursor:"pointer",onClick:n})}})})]}):null},iJ=e=>{let{format:i,doc:t,editor:n,icon:l,accentColor:r,label:o,badge:a,customLabel:d,customInProgressMessage:c,cardRanges:u}=e,{pathname:x}=(0,iB.useRouter)(),h=(0,$.NM)(x)?"share_panel":"share_panel_dashboard",p=(0,I.u)("googleSlidesExport"),{interceptFileExport:m}=(0,et.w)({doc:t,source:h,editor:n,cardRanges:u}),{handleExport:g,exportInProgress:j}=(0,ee.Up)({doc:t,source:h,editor:n,format:i,formatLabel:o,cardRanges:u,...p?{interceptFileExport:m}:{}});return(0,s.jsx)(ei.N,{onClick:g,icon:l,formatLabel:o,accentColor:r,exportInProgress:j,exportInProgressNote:(0,s.jsx)(C.x6,{id:"57bp6s"}),badge:a,customLabel:d,customInProgressMessage:c})};var iq=t(32844),iQ=t(59554),iZ=t(6743),iY=t(30928),i0=t(62117),i1=t(2362);let i6=e=>{let{subtitle:i,tooltipLabel:t,ariaLabel:n,icon:l}=e;return(0,s.jsxs)(eg.z,{spacing:1,align:"center",children:[(0,s.jsx)(em.E,{fontSize:"xs",color:"gray.500",children:i}),(0,s.jsx)(w.Tz,{label:t,placement:"top","aria-label":n,children:(0,s.jsx)(c.a,{color:"gray.500",lineHeight:"1",children:(0,s.jsx)(y.g,{size:"xs",icon:l})})})]})},i5=e=>{var i,t;let{doc:n,accessLinkEnabled:r,onClose:o,onOpen:a,segmentEvent:d,isMobile:c=!1}=e,u=(0,l.d)(),{openUpsellModal:x}=(0,it.I)(),h=(0,eb.st)(),m=(0,I.u)("searchEngineIndexing"),j=(0,R.ez)("search_engine_indexing",n.organization),[f]=(0,K.snR)(),[b]=(0,K.M5P)(),v=(0,k.useCallback)(async e=>{var i,t;if(!r)return;let l=e.target.checked,c=null==(i=n.file)?void 0:i.id,p=n.id;if(!c)return void u({title:(0,s.jsx)(C.x6,{id:"SlfejT"}),description:(0,s.jsx)(C.x6,{id:"v41fCm"}),status:"error",duration:5e3,isClosable:!0,position:"top"});if(!l){await f({variables:{fileId:c,enable:l}}),null==h||h.track(eb.VV.FILE_SEARCH_ENGINE_INDEXING_DISABLED,{doc_id:p,file_id:c}),u({title:(0,s.jsx)(C.x6,{id:"XclkFW"}),status:"success",duration:5e3,isClosable:!0,position:"top"});return}if(!j){e.preventDefault(),x({onOpenCallback:o,onCloseCallback:a,segmentEvent:d});return}let m=null==n||null==(t=n.accessLinks)?void 0:t[0],g=(null==m?void 0:m.type)==="password";l&&g&&await b({variables:{docId:p}}),await f({variables:{fileId:c,enable:l}}),null==h||h.track(eb.VV.FILE_SEARCH_ENGINE_INDEXING_ENABLED,{doc_id:p,file_id:c}),l&&g?u({title:(0,s.jsx)(C.x6,{id:"rTxIf4"}),description:(0,s.jsx)(C.x6,{id:"lO2nUo"}),status:"info",duration:5e3,isClosable:!0,position:"top"}):u({title:l?(0,s.jsx)(C.x6,{id:"EUuzTf"}):(0,s.jsx)(C.x6,{id:"XclkFW"}),status:"success",duration:5e3,isClosable:!0,position:"top"})},[r,j,x,o,a,d,null==(i=n.file)?void 0:i.id,f,b,u,n.id,n.accessLinks,h]);return m?(0,s.jsx)(p.B,{w:"100%",children:(0,s.jsxs)(eg.z,{mt:4,mb:2*!!c,children:[(0,s.jsxs)(p.B,{spacing:0,children:[(0,s.jsxs)(eg.z,{children:[(0,s.jsx)(em.E,{children:(0,s.jsx)(C.x6,{id:"9Mdt3l"})}),!j&&(0,s.jsx)(ii.zL,{product:"pro"})]}),(0,s.jsx)(em.E,{fontSize:"xs",color:"gray.500",children:(0,s.jsx)(C.x6,{id:"ey2XCa",values:{GAMMA_ARTIFACT_PROPER_NOUN:P.TP}})})]}),(0,s.jsx)(g.h,{}),(0,s.jsx)(w.Tz,{label:r?"":(0,s.jsx)(C.x6,{id:"qMGQSp"}),isDisabled:r,placement:"top",shouldWrapChildren:!0,children:(0,s.jsx)(e8.d,{isChecked:(null==(t=n.file)?void 0:t.searchEngineIndexingEnabled)||!1,disabled:!r,onChange:v})})]})}):null},i2=()=>({view:{subtitle:D.Ru._({id:"ihPQra"}),tooltip:z()},comment:{subtitle:D.Ru._({id:"qPZYdC"}),tooltip:D.Ru._({id:"oKPro/",values:{0:z()}})},edit:{subtitle:D.Ru._({id:"TVFcVE"}),tooltip:D.Ru._({id:"2gPY9r",values:{0:z()}})}}),i4=e=>{var i;let{doc:t,isConnected:n,onSharePanelOpen:r,onSharePanelClose:o,canManage:a,isDark:d}=e,u=(0,er.fW)(),x=(0,l.d)(),h=(0,ef.n)(i2),p=(0,I.u)("passwordProtectedDoc")&&a,m=null==t||null==(i=t.accessLinks)?void 0:i[0],g=(null==m?void 0:m.type)==="password",[j]=(0,K.vcy)(),[f]=(0,K.snR)(),b=(null==m?void 0:m.permission)?null==m?void 0:m.permission:eC.F$.NoAccess,y=b===eC.F$.NoAccess,w=e=>()=>{x({title:"updated"===e?D.Ru._({id:"Xpw8aE"}):D.Ru._({id:"jwO7L7"}),status:"success",duration:5e3,isClosable:!0,position:"top"})},S=(0,k.useMemo)(()=>(0,$.LN)({docTitle:null==t?void 0:t.title,docId:null==t?void 0:t.id,token:null==m?void 0:m.token,absolute:!0}),[t,null==m?void 0:m.token]),_=!!m,A=a&&n&&_,R=(0,s.jsx)(iT.w,{onClose:o,onOpen:r,segmentEvent:eb.VV.GAMMA_PRO_UPSELL_SHARE_SETTINGS_REMOVE_WATERMARK,targetWorkspace:t.organization});return(0,s.jsxs)(s.Fragment,{children:[a&&(0,s.jsxs)(e6,{showDivider:!1,children:[(0,s.jsx)(eY._,{title:g?(0,s.jsx)(C.x6,{id:"gbBlJ4"}):(0,s.jsx)(C.x6,{id:"qZu20V"}),subtitle:y?D.Ru._({id:"vMZPZT"}):(0,s.jsx)(i6,{subtitle:h[b].subtitle,tooltipLabel:h[b].tooltip,ariaLabel:h[b].subtitle,icon:v.mEO}),img:(0,s.jsx)(ek.$,{icon:g?v.OKD:v.CQO,showDisabled:y}),isDisabled:!A,disabledText:eC.ef[eC.F$.NoAccess].title(),permissionsControl:(0,s.jsx)(eC.qk,{selected:b,options:[K.aXG.Edit,K.aXG.Comment,K.aXG.View,eC.F$.NoAccess],onClick:e=>{var i,s;let n=null==m?void 0:m.id,l={id:t.id,accessLinks:e===eC.F$.NoAccess?[{permission:null}]:[{permission:e}]},r=()=>j({variables:l,refetchQueries:["GetDoc"],optimisticResponse:{updateDoc:{...l,accessLinks:[{__typename:"AccessLink",id:n||"temp-id",permission:e===eC.F$.NoAccess?null:e}],__typename:"Doc"}}}),o=()=>{w(e===eC.F$.NoAccess?"removed":"updated")()},a=()=>{x((0,X.oe)(t.title))},d=null==(i=t.file)?void 0:i.searchEngineIndexingEnabled,c=null==(s=t.file)?void 0:s.id;d&&c&&e===eC.F$.NoAccess?f({variables:{fileId:c,enable:!1},refetchQueries:["GetDoc"]}).then(r).then(()=>{o(),a()}):r().then(o)}})}),(0,s.jsx)(e9.S,{animateOpacity:!0,in:!!(null==m?void 0:m.permission),children:(0,s.jsx)(i1.X,{url:S,paddingLeft:u?32:void 0,customLabel:D.Ru._({id:"y1eoq1"}),onClick:()=>{(0,T.dd)({docId:t.id,source:"sharePanel",type:"tokenUrl"})}})})]}),p?(0,s.jsx)(iq.n,{defaultIndex:[0],allowToggle:!0,borderRadius:"md",borderColor:"transparent",mb:4,children:(0,s.jsxs)(iQ.A,{children:[(0,s.jsxs)(iZ.J,{children:[(0,s.jsx)(c.a,{as:"span",flex:"1",textAlign:"start",fontWeight:"600",children:(0,s.jsx)(C.x6,{id:"VNgKZz"})}),(0,s.jsx)(iY.Q,{})]}),(0,s.jsxs)(i0.v,{children:[R,(0,s.jsx)(i5,{onClose:o,onOpen:r||(()=>{}),segmentEvent:eb.VV.GAMMA_PRO_UPSELL_SHARE_SETTINGS_SEARCH_ENGINE_INDEXING,doc:t,accessLinkEnabled:!y}),(0,s.jsx)(is,{onClose:o,onOpen:r,segmentEvent:eb.VV.GAMMA_PRO_UPSELL_SHARE_SETTINGS_SET_PASSWORD,doc:t,isDark:d,accessLinkEnabled:!y})]})]})}):R]})};var i3=t(95772);let i8={edit:(0,s.jsx)(C.x6,{id:"RGu+kO"}),comment:(0,s.jsx)(C.x6,{id:"4xnd7M"}),view:(0,s.jsx)(C.x6,{id:"8WmxwF"}),noAccess:(0,s.jsx)(C.x6,{id:"Lkjre5"}),workspaceAccess:(0,s.jsx)(C.x6,{id:"k/3XD1"})},i9=(0,E.A)(e=>{var i,t;let{doc:E,editor:D,isSharePanelOpen:P,onSharePanelClose:z,onSharePanelOpen:O,onAnalyticsPanelOpen:M,view:K,setView:J,showAnalytics:q=!0,showSharePublic:Q=!0,showEmbed:Z=!0,showSiteSettings:Y=!0,cardRangesInput:ee="",setCardRangesInput:ei}=e,et=(0,B.b)(null==E?void 0:E.file),es=(0,U.rd)(),en=(0,R.Fd)(),{openSiteSettings:el}=(0,V.ip)(),er=(0,I.u)("mobileSharePanel"),eo=null==E||null==(i=E.accessLinks)?void 0:i[0],ea=null==eo?void 0:eo.permission,ed=(0,k.useMemo)(()=>(0,$.LN)({docTitle:null==E?void 0:E.title,docId:null==E?void 0:E.id,token:null==eo?void 0:eo.token,absolute:!0}),[E,null==eo?void 0:eo.token]),{hasCopied:ec,onCopy:eu}=(0,n.i)(ed),ex=(0,l.d)(),eh="link-copied-toast",ep=(0,k.useRef)(!1),{user:em,currentWorkspace:eg,isGammaAdminUser:ej}=(0,W.ur)(),{isConnected:ef}=(0,_.u)(),eb=(0,W.Iy)("manage",E)||ej,ev=(0,W.Iy)("comment",E)||ej,ey=(0,W.Iy)("edit",E)||ej,{isOpen:ew,onClose:eC}=(0,A.E)({id:"create-site-modal"}),ek=E&&E.site&&E.site.routes.length>1,eS=E&&(0,G.dv)(E.site),e_=F({showInvite:ey,showExport:ev,showSharePublic:Q&&eb&&!eS,showEmbed:Z&&eb&&!eS}),eI=eb&&M&&E&&!eS,[eA,eR]=(0,k.useState)(()=>()=>Promise.resolve()),eE=(0,k.useCallback)(()=>{z(),eC()},[z,eC]),eT=E?ek?E.site.name:E.title:null,eD=(0,k.useCallback)(()=>{eA().then(()=>{J("invite"),ei&&ei(""),z()},()=>{console.debug("[handleSharePanelClose] CollaboratorSearchBar rejected \uD83D\uDC4E\uD83C\uDFFC")})},[J,ei,z,eA]),eP=(0,k.useCallback)(()=>{M&&(z(),M())},[M,z]),ez=(0,k.useCallback)(()=>{el("domains"),z()},[z,el]);if(!em)return null;let eO=(0,N.ZP)(E,em),eM=eO?(0,N.bC)()[eO]:null,eF=(0,X.D5)(E,eg);if(E&&null===eM)return console.error("[SharePanel] Unknown VisibilityValue for doc",E),null;let eN=null==E||null==(t=E.organization)?void 0:t.id;!E||eN||ep.current||(console.error("[SharePanelModal] Doc unexpectedly doesnt have a workspaceId",{docId:E.id,organization:E.organization}),ep.current=!0);let eL=e_.find(e=>e.key===K)||e_[0],eG=e_.length>1&&eL,eB=E&&null!==E.orgAccess,eU=i8[null!=ea?ea:eB?"workspaceAccess":"noAccess"];return er&&(0,H.Xb)()?(0,s.jsx)(ir,{isSharePanelOpen:P,closeIfReady:eD,doc:E,editor:D,handleViewAnalyticsClick:eP,showAnalytics:q&&eI}):(0,s.jsxs)(w.L8,{isDark:es,children:[(0,s.jsxs)(r.aF,{onEsc:eD,isOpen:P,onClose:z,trapFocus:!0,size:"3xl",returnFocusOnClose:!1,children:[(0,s.jsx)(o.m,{}),(0,s.jsxs)(a.$,{"data-share-panel-modal-content":!0,mx:2,children:[(0,s.jsxs)(d.r,{children:[eM&&(0,s.jsx)(c.a,{as:"span",me:3,children:(0,s.jsx)(i3.l,{visibility:eM,isFromOtherOrg:eF})}),eT?(0,s.jsx)(C.x6,{id:"sit2to",values:{displayName:eT}}):(0,s.jsx)(C.x6,{id:"Z8lGw6"})]}),(0,s.jsx)(u.s,{"data-share-panel-close-button":!0,onClick:e=>{e.preventDefault(),eD()}}),(0,s.jsx)(x.c,{}),E?(0,s.jsx)(h.c,{"data-testid":"share-panel-modal-body",children:E&&eN&&(0,s.jsxs)(s.Fragment,{children:[eG&&(0,s.jsxs)(p.B,{direction:"row",alignItems:"center",my:4,children:[(0,s.jsx)(S.x,{selectedOption:eL,setSelectedOption:e=>J(e.key),options:e_,dropdownButtonLeftIcon:eL.icon,breakpoints:{base:!0,md:!1}}),eb&&Y&&!et&&!(null==E?void 0:E.site)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.h,{}),(0,s.jsx)(j.$,{flexShrink:0,onClick:ez,variant:"plain",size:"sm",alignSelf:"flex-start",children:(0,s.jsx)(C.x6,{id:"sAalO9"})})]})]}),(!ev||"invite"==K)&&(0,s.jsx)(iR,{workspaceId:eN,doc:E,user:em,setVerifySearchDone:eR,canManage:eb,isFromOtherOrg:eF,isMultipage:ek,isDark:es}),eb&&"public"===K&&(0,s.jsx)(i4,{doc:E,isConnected:ef,onSharePanelOpen:O,onSharePanelClose:z,canManage:eb,isDark:es}),eb&&"embed"===K&&(0,s.jsx)(iD,{doc:E,onSharePanelOpen:O,onSharePanelClose:z}),ev&&"export"===K&&(0,s.jsx)(iX,{doc:E,editor:D,onSharePanelOpen:O,onSharePanelClose:z,isMultipage:ek,cardRangesDefault:ee})]})}):(0,s.jsx)(h.c,{pb:6,"data-testid":"share-panel-modal-body",children:(0,s.jsxs)(p.B,{children:[(0,s.jsx)(m.E,{height:"55px"}),(0,s.jsx)(m.E,{height:"55px"}),(0,s.jsx)(m.E,{height:"55px"}),(0,s.jsx)(m.E,{height:"55px"})]})}),(0,s.jsx)(x.c,{}),(0,s.jsx)(f.j,{children:(0,s.jsxs)(b.s,{justifyContent:"space-between",flex:1,children:[q&&eI&&(0,s.jsx)(j.$,{isDisabled:!ef,leftIcon:(0,s.jsx)(y.g,{icon:v.q9c}),variant:"ghost",onClick:eP,children:(0,s.jsx)(C.x6,{id:"YaUqUV"})}),(0,s.jsx)(g.h,{}),eS?(0,s.jsx)(j.$,{onClick:e=>{e.preventDefault(),eD()},variant:"solid","data-share-panel-done-button":!0,children:(0,s.jsx)(C.x6,{id:"DPfwMq"})}):(0,s.jsx)(w.Tz,{label:eU,isDisabled:!E,children:(0,s.jsx)(c.a,{children:(0,s.jsx)(j.$,{leftIcon:(0,s.jsx)(y.g,{icon:ec?v.e68:v.KTq}),isDisabled:!E,onClick:e=>{E&&(e.preventDefault(),eu(),ex.isActive(eh)||ex({id:eh,title:(0,s.jsx)(C.x6,{id:"pQjjYo"}),status:"success",duration:5e3,position:"top"}),(0,T.dd)({docId:E.id,source:"sharePanel",type:"tokenUrl"}))},variant:"ghost",children:(0,s.jsx)(C.x6,{id:"y1eoq1"})})})})]})})]})]}),(null==E?void 0:E.id)&&en&&eb&&(0,s.jsx)(L.B,{isOpen:ew,onClose:eE,existingDoc:E})]})})},48720:(e,i,t)=>{"use strict";t.d(i,{b:()=>s});let s=e=>!!(null==e?void 0:e.isTemplate)},49405:(e,i,t)=>{"use strict";t.d(i,{Z:()=>g});var s=t(6029),n=t(46898),l=t(19564),r=t(81278),o=t(55729),a=t(88586),d=t(88571),c=t(38055),u=t(95889),x=t(20715),h=t(82927),p=t(51817),m=t(72492);let g=()=>{let[e]=(0,a.aXl)({refetchQueries:["GetDocs"]}),{push:i}=(0,r.useRouter)(),t=(0,n.d)(),{user:g,currentWorkspace:j}=(0,h.ur)(),f=(0,u.st)();return(0,o.useCallback)(async n=>{var r;let{docId:o,docTitle:a,fileId:h,initialContent:b,channelId:v,source:y,openThemeEditor:w,onSuccess:C,newWindow:k,path:S}=n,_=null==g||null==(r=g.settings)?void 0:r.needsEditorOnboarding;if(!o)return Promise.reject(Error("Cannot duplicate without a docId"));let I=t({id:"duplicate-toast-".concat(o),isClosable:!1,position:"top",status:"loading",colorScheme:"gray",duration:null,title:(0,s.jsx)(l.x6,{id:"OvEjsP"})});return g&&(null==j?void 0:j.id)?e({variables:{duplicateDocInput:{orgId:null==j?void 0:j.id,sourceDocId:o,source:d.a[y],fileId:h,path:S,initialContent:b?{ydoc:(0,m.p0)(b),schemaVersion:p.f$,editors:[null==g?void 0:g.id]}:void 0,...v?{channels:[{channelId:v}]}:{}}}}).then(e=>{var n,r,d;if(!(null==e||null==(n=e.data)?void 0:n.duplicateDoc))throw Error("No data received");null==f||f.track(u.VV.EXAMPLE_DUPLICATED,{doc_id:o,title:a,source:y});let h=null==e||null==(d=e.data)||null==(r=d.duplicateDoc)?void 0:r.id;(0,x.cg)({doc_id:h,source:y,source_doc_id:o}),console.debug("[Duplicate.".concat(y,"] Doc duplicated New doc id (").concat(h,"). Navigating to Editor")),t.update(I,{status:"success",description:(0,s.jsx)(l.x6,{id:"zzDlyQ"}),duration:5e3,isClosable:!0});let p=w?"/docs/".concat(h).concat(w?"?openThemeEditor=true":""):_?"/docs/".concat(h,"?").concat(c.y,"=true"):"/docs/".concat(h);k?window.open(p,"_blank"):i(p),C&&h&&C(h)},e=>{console.error("[Duplicate.".concat(y,"] Error duplicating doc:"),e.message),t.update(I,{title:(0,s.jsx)(l.x6,{id:"ADJtFi"}),description:e.message,status:"error",duration:null,isClosable:!0})}).catch(e=>{console.error("[Duplicate.".concat(y,"] Error duplicating doc:"),e.message),t.update(I,{title:(0,s.jsx)(l.x6,{id:"ADJtFi"}),description:e.message,status:"error",duration:null,isClosable:!0})}):(console.error("[Duplicate.".concat(y,"] Cannot duplicate without a user or workspace"),{user:g}),Promise.reject(Error("Cannot duplicate without a user or workspace")))},[null==j?void 0:j.id,g,t,e,f,i])}},51983:(e,i,t)=>{"use strict";t.d(i,{Kb:()=>a,ZP:()=>c,bC:()=>d,bv:()=>o});var s=t(99492),n=t(77650),l=t(99038),r=t(68455);let o={PRIVATE:"private",LINK_VIEW:"link-view",LINK_COMMENT:"link-comment",LINK_EDIT:"link-edit",PASSWORD_VIEW:"password-view",PASSWORD_COMMENT:"password-comment",PASSWORD_EDIT:"password-edit",INDIVIDUAL:"individual",ORG_VIEW:"org-view",ORG_COMMENT:"org-comment",ORG_EDIT:"org-edit",ORG_MANAGE:"org-manage",CHANNEL_PRIVATE:"channel-private",PUBLIC:"public"},a=[o.ORG_VIEW,o.ORG_COMMENT,o.ORG_EDIT,o.ORG_MANAGE],d=()=>({[o.PRIVATE]:{title:()=>n.Ru._({id:"IZiYjM",values:{GAMMA_ARTIFACT_PROPER_NOUN:l.TP}}),subtitle:()=>n.Ru._({id:"nHujJB",values:{GAMMA_ARTIFACT_PROPER_NOUN:l.TP}}),primaryIcon:s.DW4},[o.LINK_VIEW]:{title:()=>n.Ru._({id:"Pb5t/X",values:{GAMMA_ARTIFACT_PROPER_NOUN:l.TP}}),primaryIcon:s.CQO},[o.LINK_COMMENT]:{title:()=>n.Ru._({id:"FUtIA5",values:{GAMMA_ARTIFACT_PROPER_NOUN:l.TP}}),primaryIcon:s.CQO},[o.LINK_EDIT]:{title:()=>n.Ru._({id:"tNOSZi",values:{GAMMA_ARTIFACT_PROPER_NOUN:l.TP}}),primaryIcon:s.CQO},[o.PASSWORD_VIEW]:{title:()=>n.Ru._({id:"s1I4TC",values:{GAMMA_ARTIFACT_PROPER_NOUN:l.TP}}),primaryIcon:s.OKD},[o.PASSWORD_COMMENT]:{title:()=>n.Ru._({id:"ZVsBuN",values:{GAMMA_ARTIFACT_PROPER_NOUN:l.TP}}),primaryIcon:s.OKD},[o.PASSWORD_EDIT]:{title:()=>n.Ru._({id:"IAzUDH",values:{GAMMA_ARTIFACT_PROPER_NOUN:l.TP}}),primaryIcon:s.OKD},[o.INDIVIDUAL]:{title:()=>n.Ru._({id:"IB6oAl",values:{GAMMA_ARTIFACT_PROPER_NOUN:l.TP}}),subtitle:e=>"".concat(e," can access this ").concat(l.TP,"."),primaryIcon:s.X46},[o.ORG_VIEW]:{title:e=>e?n.Ru._({id:"S+losC",values:{GAMMA_ARTIFACT_PROPER_NOUN:l.TP,org:e}}):n.Ru._({id:"Vk2WI0",values:{GAMMA_ARTIFACT_PROPER_NOUN:l.TP}}),primaryIcon:s.URI,secondaryIcon:s.pS3},[o.ORG_COMMENT]:{title:e=>e?n.Ru._({id:"acq2w5",values:{GAMMA_ARTIFACT_PROPER_NOUN:l.TP,org:e}}):n.Ru._({id:"2ASSnu",values:{GAMMA_ARTIFACT_PROPER_NOUN:l.TP}}),primaryIcon:s.URI,secondaryIcon:s.DN2},[o.ORG_EDIT]:{title:e=>e?n.Ru._({id:"FFdz7p",values:{GAMMA_ARTIFACT_PROPER_NOUN:l.TP,org:e}}):n.Ru._({id:"Ks6kIh",values:{GAMMA_ARTIFACT_PROPER_NOUN:l.TP}}),primaryIcon:s.URI,secondaryIcon:s.zLW},[o.ORG_MANAGE]:{title:e=>e?n.Ru._({id:"3yNlmN",values:{GAMMA_ARTIFACT_PROPER_NOUN:l.TP,org:e}}):n.Ru._({id:"4f22gH",values:{GAMMA_ARTIFACT_PROPER_NOUN:l.TP}}),primaryIcon:s.URI},[o.CHANNEL_PRIVATE]:{title:()=>n.Ru._({id:"Tw6Jzi"}),primaryIcon:r.$},[o.PUBLIC]:{title:()=>n.Ru._({id:"NMHF69",values:{GAMMA_ARTIFACT_PROPER_NOUN:l.TP}}),primaryIcon:s.Ge5}}),c=(e,i)=>{if(!e)return null;let{workspaceAccess:t,orgAccess:s,accessLinks:n,channels:l,collaborators:r,createdBy:a}=e,d=t||s;if("manage"===d)return o.ORG_MANAGE;if("edit"===d)return o.ORG_EDIT;if("comment"===d)return o.ORG_COMMENT;if("view"===d)return o.ORG_VIEW;if(l&&l.some(e=>null!==e.permission))return o.CHANNEL_PRIVATE;if(r&&(null==r?void 0:r.length)>1)return o.INDIVIDUAL;let c=n&&n.find(e=>"token"===e.type&&""===e.token);if(c){if("view"===c.permission)return o.LINK_VIEW;if("comment"===c.permission)return o.LINK_COMMENT;if("edit"===c.permission)return o.LINK_EDIT}let u=n&&n.find(e=>"password"===e.type&&""===e.token);if(u){if("view"===u.permission)return o.PASSWORD_VIEW;if("comment"===u.permission)return o.PASSWORD_COMMENT;if("edit"===u.permission)return o.PASSWORD_EDIT}return i&&!d&&(null==a?void 0:a.id)===i.id?o.PRIVATE:o.INDIVIDUAL}},55252:(e,i,t)=>{"use strict";t.d(i,{U:()=>v});var s=t(74171),n=t(58495),l=t(81278),r=t(55729),o=t(88586),a=t(68301),d=t(343),c=t(58809),u=t(15342),x=t(20715),h=t(68104),p=t(8139),m=t(51817),g=t(49405),j=t(72492),f=t(42721),b=t(70006);let v=()=>{let e=(0,g.Z)(),{user:i,currentWorkspace:t}=(0,f.ur)(),[v]=(0,o.jL_)(),[y]=(0,o.Imo)(),{push:w}=(0,l.useRouter)(),C=(0,d.$)(),k=(0,u.GV)(c.nU),S=(0,a.u)("createFilePage");return(0,r.useCallback)(async l=>{let r,{title:a,path:d,siteId:c,routes:u,sourceDocId:g}=l;if(!d.startsWith("/"))return void console.error("[AddNewPageToSite] Path must start with /. Aborting.",d);if(!(null==t?void 0:t.id)||!c||!u)return;let f={settings:{...p.S9.webpage_fluid.docSettings()},docFlags:{cardLayoutsEnabled:!0},format:"webpage"};if(S&&(null==k?void 0:k.id)&&!g){let{docId:e}=await C({title:a,path:d,documentAttributes:f,file:k}),i=(0,b.pF)({docId:e});return console.debug("[AddPageModal] Doc created. Adding route then navigating to editor",e),await w(i,void 0,{shallow:!0}),e}if(g)await e({docId:g,docTitle:a,source:o.ALe.SitesDuplicatePage,fileId:null==k?void 0:k.id,onSuccess:e=>{r=e},path:d});else{let e=(0,h.k5)(f),s=(0,j.p0)(e),n={title:a,path:d,source:o.ALe.SitesAddPage,initialContent:{ydoc:s,schemaVersion:m.f$,editors:[null==i?void 0:i.id]}},{data:l}=await v({variables:{...n,fileId:null==k?void 0:k.id,workspaceId:null==t?void 0:t.id,orgAccess:o.aXG.Manage,mainPage:"/"===d}});r=null==l?void 0:l.createDoc.id,(0,x.cg)({doc_id:r,source:o.ALe.SitesAddPage,channel:null})}if(!c||!r)return void console.error("[AddPageModal] Site or doc id is undefined. Cannot add route.");let _=e=>y({variables:{input:{siteId:c,docId:r,path:e,offline:!1}},refetchQueries:["GetSite"]});try{await _(d)}catch(e){if(e instanceof s.K&&(0,o.vIB)(e).find(e=>["duplicate_site_path","duplicate_doc_path"].includes(e)))await _("".concat(d,"-").concat((0,n.Ak)(5)));else throw e}let I=(0,b.pF)({docId:r});return console.debug("[AddPageModal] Doc created. Adding route then navigating to editor",r),await w(I,void 0,{shallow:!0}),r},[null==t?void 0:t.id,y,w,e,v,null==i?void 0:i.id,null==k?void 0:k.id,C,S])}},56450:(e,i,t)=>{"use strict";t.d(i,{a:()=>g,m:()=>j});var s=t(6029),n=t(46898),l=t(19564),r=t(81278),o=t(55729),a=t(88586),d=t(38055),c=t(20715),u=t(68104),x=t(8139),h=t(51817),p=t(72492),m=t(82927);let g={example_deck_clone_toast:a.ALe.DuplicateInspiration,import_google_doc:a.ALe.ImportGoogleDoc,import_google_slides:a.ALe.ImportGoogleSlides,import_docx:a.ALe.ImportDocx,import_pptx:a.ALe.ImportPptx,import_webpage:a.ALe.ImportWebpage,import_pdf:a.ALe.ImportPdf,blank:a.ALe.Blank,template_browser:a.ALe.DuplicateTemplate,get_started_modal:a.ALe.Blank,template_modal_griditem:a.ALe.DuplicateTemplate,template_dashboard_griditem:a.ALe.DuplicateTemplate,template_modal_preview:a.ALe.DuplicateTemplate,template_modal_preview_create_theme:a.ALe.DuplicateTemplate,"slash-new":a.ALe.SlashNew,editor_toolbar_doc_menu_duplicate:a.ALe.DuplicateDoc,dashboard_docs_view_duplicate:a.ALe.DuplicateDoc,ai_generated:a.ALe.AiGenerated,ai_generated_advanced:a.ALe.AiGenerated,sites_add_page:a.ALe.SitesAddPage,sites_copy_to_site:a.ALe.SitesCopyToSite,sites_duplicate_page:a.ALe.SitesDuplicatePage,editor_y_doc_too_large_duplicate:a.ALe.DuplicateDoc,file_add_page:a.ALe.SitesAddPage,snapshots_drawer_duplicate:a.ALe.DuplicateDoc,workspace_template:a.ALe.DuplicateDoc},j=()=>{let{user:e,currentWorkspace:i}=(0,m.ur)(),[t,{data:j,loading:f}]=(0,a.jL_)(),{push:b,replace:v}=(0,r.useRouter)(),y=(0,n.d)();return[(0,o.useCallback)(n=>{var r;let o=null==e||null==(r=e.settings)?void 0:r.needsEditorOnboarding,a=n.source,m=null==n?void 0:n.channelId,j=(null==n?void 0:n.historyFn)==="replace"?v:b;if(!(null==i?void 0:i.id))return void console.error("[createDocAndNavigate] No currentWorkspace found");let f=n.docSettings||x.S9.deck_default.docSettings(),w=n.format||"deck",C=(null==n?void 0:n.document)?n.document:"empty"==(o?"quickstart":"empty")?(0,u.HC)(e,{settings:{...f},format:w}):(0,u.f$)(e,{settings:{...f},format:w}),k=(0,p.p0)(C);return console.debug("[createDocAndNavigate] Creating doc",{document:C,encodedDocument:k}),t({variables:{workspaceId:null==i?void 0:i.id,title:(null==n?void 0:n.title)||"",source:g[n.source],initialContent:{ydoc:k,schemaVersion:h.f$,editors:[null==e?void 0:e.id]},...m?{channels:[{channelId:m}]}:{}}}).then(async e=>{let{data:i}=e;(0,c.cg)({doc_id:null==i?void 0:i.createDoc.id,source:a,channel:m||null,format:w}),console.debug("[createDocAndNavigate] Doc created. Navigating to Editor",null==i?void 0:i.createDoc.id),j("/docs/".concat(null==i?void 0:i.createDoc.id).concat(o?"?".concat(d.y,"=true"):""))}).catch(e=>{console.error("[createDocAndNavigate]",e),y({title:(0,s.jsx)(l.x6,{id:"0jT1fA"}),description:e.message,position:"top",status:"error",isClosable:!0,duration:null})})},[t,null==i?void 0:i.id,b,v,y,e]),{data:j,loading:f}]}},60120:(e,i,t)=>{"use strict";t.d(i,{H:()=>o});var s=t(6029),n=t(48810),l=t(55597),r=t(48621);let o=e=>{let{length:i,idealLength:t,maxLength:o}=e,a=i>=o;return(0,s.jsxs)(n.E,{fontSize:"xs",color:a?"red.400":"gray.500",children:[a&&(0,s.jsx)(r.g,{icon:l.QJT})," ",i,"/",null!=t?t:o]})}},66546:(e,i,t)=>{"use strict";t.d(i,{L:()=>w});var s=t(6029),n=t(24302),l=t(94740),r=t(66199),o=t(49611),a=t(18078),d=t(88136),c=t(38676),u=t(25311),x=t(48810),h=t(99492),p=t(48621),m=t(47412),g=t(19564),j=t(99038),f=t(22445),b=t(82927),v=t(81292),y=t(84693);let w=e=>{let{email:i,name:t,workspaceName:w,workspaceId:C}=e,k=(0,b.CX)(),S=(0,y.f)(C),{onOpen:_,onClose:I,isOpen:A}=(0,f.E)({id:"invite-guest-to-workspace"}),R=(0,n.dU)(!1,!0),E=R?"gray.800":void 0,T=R?"white":void 0,D=R?"gray.600":void 0,P=R?"var(--chakra-colors-gray-600)":void 0;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.A,{closeOnBlur:!0,children:e=>{let{onClose:i}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.W,{children:(0,s.jsx)(o.$,{leftIcon:(0,s.jsx)(p.g,{icon:h.AQM}),size:"xs",colorScheme:"gray",me:1,px:2,h:"auto",py:1,children:(0,s.jsx)(g.x6,{id:"O1wAlQ"})})}),(0,s.jsxs)(a.h,{color:T,bgColor:E,borderColor:D,children:[(0,s.jsx)(d.R,{bgColor:E,sx:P&&{"--popper-arrow-shadow-color":P}}),(0,s.jsx)(c.D,{fontWeight:"bold",borderColor:D,children:(0,s.jsx)(g.x6,{id:"XYV7FR"})}),(0,s.jsxs)(u.e,{children:[(0,s.jsx)(x.E,{fontSize:"sm",children:(0,s.jsx)(g.x6,{id:"hJZ5XP",values:{name:t,workspaceName:w,GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:j.Ix}})}),(0,s.jsx)(m.Tz,{isDisabled:k,label:(0,s.jsx)(g.x6,{id:"kPU6O6"}),children:(0,s.jsx)(o.$,{isDisabled:!k,w:"100%",mt:2,onClick:()=>{_(),i()},children:(0,s.jsx)(g.x6,{id:"qVqqmP"})})})]})]})]})}}),S&&(0,s.jsx)(v.y,{isOpen:A,onClose:I,workspace:S,canManageWorkspace:k,initialInvites:i?[{email:i}]:void 0})]})}},68568:(e,i,t)=>{"use strict";t.d(i,{D5:()=>x,PR:()=>p,U5:()=>m,oe:()=>j,vz:()=>g});var s=t(6029),n=t(99492),l=t(19564),r=t(77650),o=t(88586),a=t(99038),d=t(70006),c=t(68455),u=t(51983);let x=(e,i)=>{var t;return(null==e||null==(t=e.organization)?void 0:t.id)!==(null==i?void 0:i.id)},h=(e,i,t)=>{var r,a;if(!i)return[];let h=(null==e||null==(r=e.channels)?void 0:r.map(e=>{let{id:i,name:t,slug:s}=e;return{id:i,label:t,href:(0,d.gU)({id:i,slug:s}),icon:c.$}}))||[],p=(0,u.ZP)(e,i),m=x(e,t),g=m?[{id:"shared-from-external-org",label:(null==e||null==(a=e.organization)?void 0:a.name)?(0,s.jsx)(l.x6,{id:"lFZJ+N",values:{0:e.organization.name}}):(0,s.jsx)(l.x6,{id:"qn35Ez"}),icon:n.AQM,color:"gray.500"}]:[];if(e.source!==o.ALe.ApiAiGenerated||m||g.push({id:"ai-generated",label:(0,s.jsx)(l.x6,{id:"OZtEcz"}),icon:n.jTw,color:"gray.500",colorScheme:"green"}),p===u.bv.PUBLIC)return[{id:"public",label:(0,s.jsx)(l.x6,{id:"7d1a0d"}),icon:n.Ge5,color:"gray.500"},...g,...h];if(p===u.bv.PRIVATE)return[{id:"private",label:(0,s.jsx)(l.x6,{id:"zwBp5t"}),icon:n.DW4,color:"gray.500"},...g];if(p===u.bv.INDIVIDUAL){let t=(e.collaborators||[]).filter(e=>e.user.id!==i.id).length;return[{id:"collaborators",label:(0,s.jsx)(l.x6,{id:"o2NxSP",values:{numCollaborators:t}}),icon:n.X46,color:"gray.500"},...g]}if(m)return g;if(p&&u.Kb.includes(p))return[{id:"workspace",label:(0,s.jsx)(l.x6,{id:"0Gd0NU"}),icon:n.URI,color:"gray.500"},...g,...h];return h},p=e=>{let{doc:i,user:t,currentWorkspace:s,channelToExclude:n}=e;return h(i,t,s).filter(e=>e.id!==n)},m=(e,i)=>{var t;return e&&i&&!e.orgAccess&&(null==(t=e.createdBy)?void 0:t.id)===i.id},g=e=>(null==e?void 0:e.orgAccess)?r.Ru._({id:"5Ma3Lv",values:{GAMMA_ARTIFACT_PROPER_NOUN:a.TP}}):null,j=e=>({title:e?(0,s.jsx)(l.x6,{id:"Cjc2Uk",values:{docTitle:e}}):(0,s.jsx)(l.x6,{id:"og/uYl"}),description:(0,s.jsx)(l.x6,{id:"lO2nUo"}),status:"info",duration:5e3,isClosable:!0,position:"top"})},69413:(e,i,t)=>{"use strict";t.d(i,{Cr:()=>c,Eu:()=>b,G0:()=>f,H9:()=>g,J3:()=>u,L_:()=>j,M$:()=>p,Q3:()=>y,g9:()=>v,jI:()=>m,yA:()=>h});var s=t(83817),n=t.n(s),l=t(79784),r=t(88586);let o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=["italic","oblique"];for(let t of e)for(let e of i)if(-1!==t.toLowerCase().indexOf(e))return!0;return!1},a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(let i of e){if(d(i,["thin"]))return 100;if(d(i,["light","lite"],["extra","ultra","x"]))return 200;if(d(i,["light"]))return 300;if(d(i,["medium"]))return 500;if(d(i,["bold"],["demi","semi"]))return 600;if(d(i,["bold"],["extra","x"]))return 800;if(d(i,["bold"]))return 700;if(d(i,["black","heavy","ultra"]))return 900}return 400},d=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let s of i)if(0===t.length){if(-1!==e.toLowerCase().indexOf(s.toLowerCase()))return!0}else for(let i of t)if(-1!==e.toLowerCase().indexOf(s.toLowerCase())&&-1!==e.toLowerCase().indexOf(i.toLowerCase()))return!0;return!1};class c extends Error{}let u=async e=>new Promise((i,t)=>{let s=new FileReader;s.onload=e=>{var s,n,r,d,u,x,h,p,m,g,j,f,b,v,y,w,C,k,S;let _=null==(s=e.target)?void 0:s.result;try{let e=(0,l.qg)(_),t=null!=(w=null==(n=Object.values(null!=(y=null==(d=e.tables)||null==(r=d.name)?void 0:r.preferredSubfamily)?y:null==(x=e.tables)||null==(u=x.name)?void 0:u.fontSubfamily))?void 0:n[0])?w:"",s=null!=(C=null==(h=Object.values(null==(m=e.tables)||null==(p=m.name)?void 0:p.fullName))?void 0:h[0])?C:"",I=null!=(S=null==(g=Object.values(null!=(k=null==(f=e.tables)||null==(j=f.name)?void 0:j.preferredFamily)?k:null==(v=e.tables)||null==(b=v.name)?void 0:b.fontFamily))?void 0:g[0])?S:"";if(e.tables.fvar)throw new c;i({familyName:I,isItalic:o([t,s]),weight:a([t,s])})}catch(e){t(e)}},s.onerror=e=>{console.error("[parseFontFile] unable to read the font file, providing defaults",e),i({familyName:"",isItalic:!1,weight:400})},s.readAsArrayBuffer(e)}),x=e=>{let i=e.lastIndexOf(".");return -1===i||i===e.length-1?{name:e,extension:void 0}:{name:e.slice(0,i),extension:e.slice(i+1)}},h=e=>{let{extension:i}=x(e);return i===r.AKY.Otf||i===r.AKY.Ttf?i:r.AKY.Ttf},p=e=>{let{existingFont:i}=e;if(!i)return!0;let t={fontName:i.name,fontId:i.id,fontFiles:i.fontFiles.map(e=>({id:e.id,name:e.name,weight:e.weight,isItalic:e.isItalic,fileType:e.fileType,sourceUrl:e.sourceUrl}))},s={fontName:e.fontName,fontId:e.fontId,fontFiles:e.uploadFontFiles.map(e=>({id:e.fontFile.id,name:e.fontFile.name,weight:e.fontFile.weight,isItalic:e.fontFile.isItalic,fileType:e.fontFile.fileType,sourceUrl:e.fontFile.sourceUrl}))};return!n()(t,s)},m=e=>Object.keys(e.reduce((e,i)=>{let t=[i.weight,i.isItalic].join("__");return{...e,[t]:!0}},{})).length,g=e=>Object.values(e.reduce((e,i)=>{let t=i.fontFile,s=[t.weight,t.isItalic,t.fileType].join("__");return e[s]=e[s]||[],e[s].push(i),e},{})).reduce((e,i)=>{if(i.length>1)for(let t of i)e[t.uploadId]=!0;return e},{}),j=e=>e.reduce((e,i)=>{let t=i.fontFile.weight;return{...e,[t]:[...e[t]||[],i]}},{}),f=function(e){let i=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return e.sort((e,t)=>i?Number(e)-Number(t):Number(t)-Number(e))},b=e=>f(Array.from(new Set(e.map(e=>e.weight)))),v=(e,i)=>{if(void 0===i)return;if(i>e[e.length-1])return e[e.length-1];let t=1/0,s=-1;for(let n=0;n<e.length;n++){let l=Math.abs(i-e[n]);if(l<t)t=l,s=n;else break}return e[s]},y=e=>!!e&&0!==e.length&&-1===e.findIndex(e=>!e.isItalic)},70583:()=>{},74907:(e,i,t)=>{"use strict";t.d(i,{w:()=>l});var s=t(6029),n=t(19564);let l=()=>({100:(0,s.jsx)(n.x6,{id:"xKi1hd"}),200:(0,s.jsx)(n.x6,{id:"c7s0mT"}),300:(0,s.jsx)(n.x6,{id:"4domrp"}),400:(0,s.jsx)(n.x6,{id:"3CTvmZ"}),500:(0,s.jsx)(n.x6,{id:"uDtGuX"}),600:(0,s.jsx)(n.x6,{id:"U9FxnD"}),700:(0,s.jsx)(n.x6,{id:"gw5LiU"}),800:(0,s.jsx)(n.x6,{id:"4eWNFN"}),900:(0,s.jsx)(n.x6,{id:"Y4B02e"})})},81627:(e,i,t)=>{"use strict";t.d(i,{L:()=>d});var s=t(81278),n=t(55729),l=t(51272),r=t(88586),o=t(42721);let a=()=>{let[e]=(0,r.bME)();return(0,n.useCallback)(async i=>{var t;let{prompt:s,templateDocId:n}=i;return null==(t=(await e({variables:{input:{workspaceId:(0,o.gx)(),generationType:r.xbH.Remix,input:{prompt:s,settings:{...(0,l.Xg)()},templateDocId:n}}}})).data)?void 0:t.createDocGeneration},[e])},d=()=>{let e=(0,s.useRouter)(),i=a(),[t,l]=(0,n.useState)(!1);return{remixThis:(0,n.useCallback)(async s=>{if(!t){l(!0);try{let t=await i({prompt:"",templateDocId:s});t&&await e.push("/remix/".concat(t.id))}finally{l(!1)}}},[i,t,e]),isLoading:t}}},81664:(e,i,t)=>{"use strict";t.d(i,{R:()=>s});let s=new(t(83747)).b},87752:(e,i,t)=>{"use strict";t.d(i,{$:()=>o});var s=t(6029),n=t(58297),l=t(99492),r=t(48621);let o=e=>{let{icon:i,showDisabled:t=!1,size:o=8}=e;return(0,s.jsx)(n.j,{color:"gray.700",textAlign:"center",bg:"gray.200",size:o,opacity:t?.5:1,children:t?(0,s.jsxs)("span",{className:"fa-stack",children:[(0,s.jsx)(r.g,{icon:l.$Dv,className:"fa-stack-1x"}),(0,s.jsx)(r.g,{icon:i,className:"fa-stack-1x"})]}):(0,s.jsx)(r.g,{size:"1x",icon:i})})}},88240:(e,i,t)=>{"use strict";t.d(i,{w:()=>s});var s=function(e){return e.PresentationsFromScratch="presentationsFromScratch",e.PresentationsFromNotes="presentationsFromNotes",e.EnhancePptOrPdf="enhancePptOrPdf",e.Websites="websites",e.SocialMedia="socialMedia",e.AiImages="aiImages",e.NotSure="notSure",e}({})},88571:(e,i,t)=>{"use strict";t.d(i,{a:()=>s.a,m:()=>s.m});var s=t(56450)},91140:(e,i,t)=>{"use strict";t.d(i,{j:()=>s});let s=t(55729).lazy(()=>Promise.all([t.e(6171),t.e(6374),t.e(5516),t.e(1707)]).then(t.bind(t,1707)).then(e=>({default:e.default})))},95772:(e,i,t)=>{"use strict";t.d(i,{l:()=>d});var s=t(6029),n=t(24302),l=t(26420),r=t(99492),o=t(55597),a=t(48621);let d=e=>{let{visibility:i,isFromOtherOrg:t}=e,d=(0,n.dU)("white","var(--chakra-colors-gray-800)");return(0,s.jsxs)(s.Fragment,{children:[t&&(0,s.jsx)(a.g,{icon:r.AQM}),(0,s.jsxs)(l.a,{as:"span",className:"fa-layers fa-fw",children:[(0,s.jsx)(a.g,{icon:i.primaryIcon}),i.secondaryIcon&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.g,{icon:o.GEE,color:d,transform:"down-6 right-6"}),(0,s.jsx)(a.g,{icon:i.secondaryIcon,transform:"shrink-7 right-6 down-6"})]})]})]})}},96804:(e,i,t)=>{"use strict";t.d(i,{B:()=>A});var s=t(6029),n=t(46898),l=t(67909),r=t(36071),o=t(54731),a=t(17920),d=t(3674),c=t(40691),u=t(26385),x=t(83638),h=t(25223),p=t(38036),m=t(16426),g=t(61204),j=t(49611),f=t(47412),b=t(19564),v=t(77650),y=t(81278),w=t(55729),C=t(88586),k=t(55252),S=t(44141),_=t(82927),I=t(70006);let A=e=>{var i;let{isOpen:t,onClose:A,existingDoc:R}=e,E=(0,n.d)(),T=(0,w.useRef)(null),[D,P]=(0,w.useState)(!1),{currentWorkspace:z}=(0,_.ur)(),[O,M]=(0,w.useState)(""),[F]=(0,C.Ybb)(),[N]=(0,C.aXl)(),L=(0,k.U)(),{push:G}=(0,y.useRouter)(),B=(0,w.useCallback)(async()=>{if(null==R?void 0:R.id){await (0,S.fb)(R.id),P(!0);try{var e,i;let{data:t}=await N({variables:{duplicateDocInput:{sourceDocId:R.id,source:C.ALe.SitesCopyToSite,title:(null==R?void 0:R.title)||v.Ru._({id:"wja8aL"}),orgId:null==z?void 0:z.id,orgAccess:C.aXG.Manage,themeId:null}}}),s=null==t||null==(e=t.duplicateDoc)?void 0:e.id;if(!s)return void console.error("[CreateSiteModal] Failed to duplicate doc with id",R.id);let{data:n}=await F({variables:{input:{workspaceId:null==z?void 0:z.id,name:O,routes:[{docId:s,path:"/"}],themeId:null==R||null==(i=R.theme)?void 0:i.id}}});if(!(null==n?void 0:n.createSite))return void console.error("[CreateSiteModal] Failed to create site, no site returned");let l=(0,I.pF)({docId:s});G(l),A()}catch(e){E({status:"error",title:(0,s.jsx)(b.x6,{id:"Pdboh4"}),description:(0,s.jsx)(b.x6,{id:"c6YG3V"})}),console.error(e)}P(!1)}},[F,null==z?void 0:z.id,N,null==R?void 0:R.id,null==R||null==(i=R.theme)?void 0:i.id,null==R?void 0:R.title,O,G,E]),U=(0,w.useCallback)(async()=>{P(!0);let{data:e}=await F({variables:{input:{workspaceId:null==z?void 0:z.id,name:O,routes:[]}}}),i=null==e?void 0:e.createSite;if(!i)return void console.error("[CreateSiteModal] Failed to create site, no site returned");L({siteId:null==i?void 0:i.id,routes:null==i?void 0:i.routes,title:"Home",path:"/"})},[L,F,null==z?void 0:z.id,O]),W=(0,w.useCallback)(async()=>(null==R?void 0:R.id)?B():U(),[null==R?void 0:R.id,B,U]),V=O.length>0;return(0,s.jsx)(f.L8,{isDark:!1,children:(0,s.jsxs)(l.aF,{isOpen:t,onClose:A,initialFocusRef:T,size:"2xl",children:[(0,s.jsx)(r.m,{}),(0,s.jsxs)(o.$,{children:[(0,s.jsx)(a.r,{children:(0,s.jsx)(b.x6,{id:"JHMOcq"})}),(0,s.jsx)(d.s,{}),(0,s.jsx)(c.c,{children:(0,s.jsx)(u.B,{spacing:4,children:(0,s.jsxs)(x.MJ,{children:[(0,s.jsx)(h.l,{children:(0,s.jsx)(b.x6,{id:"Lve3H6"})}),(0,s.jsx)(p.p,{ref:T,placeholder:v.Ru._({id:"tlD7N3"}),onChange:e=>{M(e.target.value)},onKeyDown:e=>{V&&"Enter"===e.key&&W()}})]})})}),(0,s.jsx)(m.j,{children:(0,s.jsxs)(g.e,{children:[(0,s.jsx)(j.$,{variant:"ghost",onClick:A,children:(0,s.jsx)(b.x6,{id:"dEgA5A"})}),(0,s.jsx)(j.$,{variant:"solid",onClick:W,isDisabled:!V,isLoading:D,children:(0,s.jsx)(b.x6,{id:"JHMOcq"})})]})})]})]})})}}}]);
//# sourceMappingURL=3604-5851bb99709237ad.js.map